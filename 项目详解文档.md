# Topic Radar (é€‰é¢˜é›·è¾¾) - é¡¹ç›®è¯¦è§£æ–‡æ¡£

> ä¸€ä¸ªåŸºäº AI å¤šæ™ºèƒ½ä½“çš„å†…å®¹å‘ç°ä¸é€‰é¢˜ç­–åˆ’ç³»ç»Ÿ
> è‡ªåŠ¨ä» YouTubeã€Bç«™ã€Reddit ç­‰å¹³å°æŒ–æ˜çˆ†æ¬¾ç´ æï¼Œå¹¶æ™ºèƒ½ç­–åˆ’é€‰é¢˜æ–¹æ¡ˆ

---

## ğŸ“š ç›®å½•

1. [é¡¹ç›®æ¦‚è§ˆ](#1-é¡¹ç›®æ¦‚è§ˆ)
2. [æ ¸å¿ƒæ¦‚å¿µ](#2-æ ¸å¿ƒæ¦‚å¿µ)
3. [æŠ€æœ¯æ¶æ„](#3-æŠ€æœ¯æ¶æ„)
4. [ç›®å½•ç»“æ„è¯¦è§£](#4-ç›®å½•ç»“æ„è¯¦è§£)
5. [æ ¸å¿ƒæ–‡ä»¶æ·±åº¦å‰–æ](#5-æ ¸å¿ƒæ–‡ä»¶æ·±åº¦å‰–æ)
6. [å®Œæ•´è¿è¡Œæµç¨‹](#6-å®Œæ•´è¿è¡Œæµç¨‹)
7. [æ•°æ®æµè½¬è¿‡ç¨‹](#7-æ•°æ®æµè½¬è¿‡ç¨‹)
8. [é…ç½®æ–‡ä»¶è¯´æ˜](#8-é…ç½®æ–‡ä»¶è¯´æ˜)
9. [å…³é”®æŠ€æœ¯ç‚¹](#9-å…³é”®æŠ€æœ¯ç‚¹)
10. [ä½¿ç”¨æŒ‡å—](#10-ä½¿ç”¨æŒ‡å—)

---

## 1. é¡¹ç›®æ¦‚è§ˆ

### 1.1 è¿™ä¸ªé¡¹ç›®æ˜¯åšä»€ä¹ˆçš„ï¼Ÿ

æƒ³è±¡ä½ æ˜¯ä¸€ä¸ªå†…å®¹åˆ›ä½œè€…ï¼ˆæ¯”å¦‚ UP ä¸»ã€è§†é¢‘åšä¸»ï¼‰ï¼Œæ¯å¤©æœ€å¤´ç–¼çš„é—®é¢˜å°±æ˜¯ï¼š**ä»Šå¤©æ‹ä»€ä¹ˆï¼Ÿä»€ä¹ˆå†…å®¹èƒ½ç«ï¼Ÿ**

**Topic Radarï¼ˆé€‰é¢˜é›·è¾¾ï¼‰** å°±åƒä½ çš„"æ™ºèƒ½é€‰é¢˜åŠ©æ‰‹"ï¼š
- è‡ªåŠ¨åœ¨ YouTubeã€Bç«™ã€Reddit ç­‰å¹³å°æœç´¢çƒ­é—¨å†…å®¹
- ç”¨ç»Ÿè®¡å­¦æ–¹æ³•ç­›é€‰å‡º"çˆ†æ¬¾æ½œåŠ›"æœ€å¤§çš„ç´ æ
- æœ€åç”¨ AI åˆ†æè¿™äº›ç´ æï¼Œç­–åˆ’å‡º 3 ä¸ªå…·ä½“çš„é€‰é¢˜æ–¹æ¡ˆ

### 1.2 æ ¸å¿ƒä»·å€¼

| ä¼ ç»Ÿæ–¹å¼ | Topic Radar |
|---------|------------|
| äººå·¥åˆ·å¹³å°æ‰¾çµæ„Ÿï¼ˆ2-3å°æ—¶ï¼‰ | è‡ªåŠ¨é‡‡é›†ï¼ˆ5åˆ†é’Ÿï¼‰ |
| å‡­æ„Ÿè§‰åˆ¤æ–­æ˜¯å¦ä¼šç« | ç»Ÿè®¡å­¦è¿‡æ»¤ï¼ˆå¼‚å¸¸æ£€æµ‹ï¼‰ |
| é€‰é¢˜æ€è·¯å±€é™ | AI æ·±åº¦é˜…è¯»æ‰€æœ‰ç´ æå¹¶æ•´åˆ |

### 1.3 æŠ€æœ¯äº®ç‚¹

```
âœ… ReAct æ¨¡å¼ï¼šLLM è‡ªä¸»è§„åˆ’å¹¶è°ƒç”¨å·¥å…·
âœ… å¤šæ¨¡å‹ç¼–æ’ï¼šæ¨ç†ã€åˆ›ä½œã€å¿«é€Ÿå¤„ç†å„å¸å…¶èŒ
âœ… ç»“æ„åŒ–è¾“å‡ºï¼šå¼ºåˆ¶ AI è¾“å‡ºç¬¦åˆæ ¼å¼
âœ… ç»Ÿè®¡å­¦è¿‡æ»¤ï¼šä¸æ˜¯ç®€å•é˜ˆå€¼ï¼Œè€Œæ˜¯å¼‚å¸¸æ£€æµ‹
âœ… é•¿ä¸Šä¸‹æ–‡åˆ©ç”¨ï¼š256k ä¸Šä¸‹æ–‡è¯»å®Œæ‰€æœ‰ç´ æ
```

---

## 2. æ ¸å¿ƒæ¦‚å¿µ

### 2.1 ä»€ä¹ˆæ˜¯"å¤šæ™ºèƒ½ä½“"ï¼Ÿ

è¿™ä¸ªé¡¹ç›®ä¸æ˜¯ä¸€ä¸ª AI å¹²æ‰€æœ‰æ´»ï¼Œè€Œæ˜¯åƒä¸€ä¸ª"å›¢é˜Ÿ"ï¼š

```
ğŸ‘¨â€ğŸ’¼ Plannerï¼ˆè§„åˆ’å¤§è„‘ï¼‰
     â†“ å†³ç­–ï¼š"å…ˆæœ YouTubeï¼Œå†æŸ¥ Bç«™ï¼Œç„¶åç›‘æ§é¢‘é“..."
ğŸ‘· Executorï¼ˆæ‰§è¡Œä¹‹æ‰‹ï¼‰
     â†“ è¡ŒåŠ¨ï¼šè°ƒç”¨æœç´¢å·¥å…·ï¼Œæ”¶é›†æ•°æ®
ğŸ§¹ Filterï¼ˆæ™ºèƒ½ç­›é€‰å™¨ï¼‰
     â†“ ç²¾é€‰ï¼šç”¨ç»Ÿè®¡å­¦æ‰¾å‡ºæœ€æœ‰æ½œåŠ›çš„ 10 æ¡
ğŸ¨ Architectï¼ˆé€‰é¢˜ç­–åˆ’å¸ˆï¼‰
     â†“ ç­–åˆ’ï¼šé˜…è¯»æ‰€æœ‰ç´ æï¼Œè¾“å‡º 3 ä¸ªé€‰é¢˜æ–¹æ¡ˆ
```

æ¯ä¸ªæ™ºèƒ½ä½“éƒ½æœ‰è‡ªå·±çš„"ä¸“ä¸šæŠ€èƒ½"ï¼Œåˆ†å·¥åˆä½œå®Œæˆä»»åŠ¡ã€‚

### 2.2 ä»€ä¹ˆæ˜¯ ReAct æ¨¡å¼ï¼Ÿ

**ReAct = Reasoningï¼ˆæ¨ç†ï¼‰ + Actingï¼ˆè¡ŒåŠ¨ï¼‰**

ä¼ ç»Ÿ AIï¼šä½ é—®ä¸€ä¸ªé—®é¢˜ï¼Œå®ƒç›´æ¥ç»™ç­”æ¡ˆã€‚
ReAct AIï¼šå®ƒä¼š"æ€è€ƒ"â†’"è¡ŒåŠ¨"â†’"è§‚å¯Ÿç»“æœ"â†’"ç»§ç»­æ€è€ƒ"ï¼Œå¾ªç¯å¾€å¤ã€‚

**ä¸¾ä¾‹**ï¼š
```
ç”¨æˆ·ï¼šå¸®æˆ‘æ‰¾ AI é¢†åŸŸçš„çƒ­é—¨å†…å®¹

Planner æ€è€ƒğŸ’­ï¼š
  "æˆ‘éœ€è¦å…ˆæœ YouTubeï¼Œçœ‹çœ‹æœ‰æ²¡æœ‰ç›¸å…³è§†é¢‘..."

Planner å†³ç­–ğŸ¯ï¼š
  è°ƒç”¨å·¥å…· youtube_search(keyword="AI News 2025-11")

Executor æ‰§è¡ŒğŸ”¨ï¼š
  â†’ è¿”å› 8 æ¡ç»“æœ

Planner å†æ€è€ƒğŸ’­ï¼š
  "æ”¶é›†äº† 8 æ¡ï¼Œè¿˜éœ€è¦ 10 æ¡ï¼Œè¯•è¯• Bç«™..."

Planner å†³ç­–ğŸ¯ï¼š
  è°ƒç”¨å·¥å…· bilibili_search(keyword="AIæ–°é—»")

...å¾ªç¯ç›´åˆ°æ»¡è¶³ç›®æ ‡ (18æ¡)
```

### 2.3 ä»€ä¹ˆæ˜¯ LangGraphï¼Ÿ

**LangGraph** æ˜¯ä¸€ä¸ª"å·¥ä½œæµç¼–æ’æ¡†æ¶"ï¼Œå¯ä»¥æŠŠå¤šä¸ªæ™ºèƒ½ä½“ä¸²èµ·æ¥ï¼š

```
      å¼€å§‹
       â†“
    Planner â†â”€â”€â”
       â†“       â”‚
    Executor â”€â”€â”˜
       â†“
    Filter
       â†“
   Architect
       â†“
      ç»“æŸ
```

å®ƒç®¡ç†ï¼š
- èŠ‚ç‚¹ä¹‹é—´å¦‚ä½•è·³è½¬
- çŠ¶æ€ï¼ˆæ•°æ®ï¼‰å¦‚ä½•åœ¨èŠ‚ç‚¹é—´ä¼ é€’
- å¾ªç¯æ¡ä»¶ï¼ˆæ¯”å¦‚ Planner â†” Executor å¾ªç¯ï¼‰

---

## 3. æŠ€æœ¯æ¶æ„

### 3.1 æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ç”¨æˆ·äº¤äº’å±‚                            â”‚
â”‚               main.py (äº¤äº’å¼ CLI)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    LangGraph ç¼–æ’å±‚                          â”‚
â”‚              core/graph.py (çŠ¶æ€å›¾å®šä¹‰)                      â”‚
â”‚                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚   â”‚ Planner  â”‚â†’â†’ â”‚ Executor â”‚â†’â†’ â”‚  Filter  â”‚â†’â†’ â”‚Architect â”‚â”‚
â”‚   â”‚(è§„åˆ’å¤§è„‘)â”‚â†â† â”‚(æ‰§è¡Œä¹‹æ‰‹)â”‚   â”‚(æ™ºèƒ½ç­›é€‰)â”‚   â”‚(é€‰é¢˜ç­–åˆ’)â”‚â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      å·¥å…·é€‚é…å±‚                              â”‚
â”‚          tools/adapters/ (å¹³å°å°è£…)                         â”‚
â”‚                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚ YouTube  â”‚  â”‚ Bilibili â”‚  â”‚  Reddit  â”‚  â”‚Web Searchâ”‚  â”‚
â”‚   â”‚ Adapter  â”‚  â”‚ Adapter  â”‚  â”‚   RSS    â”‚  â”‚  Tavily  â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   å¤–éƒ¨æœåŠ¡ / API                             â”‚
â”‚    YouTube API Â· Bç«™API Â· Reddit Â· OpenRouter (LLMç½‘å…³)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 åˆ†å±‚è¯´æ˜

| å±‚çº§ | èŒè´£ | å…³é”®æ–‡ä»¶ |
|------|------|---------|
| **ç”¨æˆ·äº¤äº’å±‚** | æ¥æ”¶ç”¨æˆ·è¾“å…¥ï¼Œå±•ç¤ºç»“æœ | `main.py` |
| **ç¼–æ’å±‚** | ç®¡ç†å·¥ä½œæµï¼ŒçŠ¶æ€æµè½¬ | `core/graph.py`, `core/state.py` |
| **èŠ‚ç‚¹å±‚** | å…·ä½“çš„æ™ºèƒ½ä½“é€»è¾‘ | `nodes/planner.py`, `nodes/executor.py`, `nodes/filter.py`, `nodes/architect.py` |
| **å·¥å…·å±‚** | å¹³å° API å°è£… | `tools/adapters/*.py` |
| **é…ç½®å±‚** | æ¨¡å‹ã€æç¤ºè¯ã€ä¸šåŠ¡é…ç½® | `config/*.yaml` |

---

## 4. ç›®å½•ç»“æ„è¯¦è§£

```
multi-agent-create/
â”‚
â”œâ”€â”€ config/                          # ğŸ“ é…ç½®æ–‡ä»¶ç›®å½•ï¼ˆYAMLæ ¼å¼ï¼‰
â”‚   â”œâ”€â”€ models.yaml                  # AIæ¨¡å‹é…ç½®ï¼ˆKimiã€DeepSeekï¼‰
â”‚   â”œâ”€â”€ prompts.yaml                 # æ™ºèƒ½ä½“æç¤ºè¯ï¼ˆäººè®¾ã€ç›®æ ‡ã€æ–¹æ³•è®ºï¼‰
â”‚   â”œâ”€â”€ settings.yaml                # ä¸šåŠ¡é…ç½®ï¼ˆç›®æ ‡é¢†åŸŸã€ç™½åå•KOLã€é˜ˆå€¼ï¼‰
â”‚   â””â”€â”€ tools.yaml                   # å·¥å…·æ³¨å†Œè¡¨ï¼ˆå£°æ˜æ‰€æœ‰å¯ç”¨å·¥å…·ï¼‰
â”‚
â”œâ”€â”€ core/                            # ğŸ§  æ ¸å¿ƒæ¡†æ¶ï¼ˆLangGraph + çŠ¶æ€ç®¡ç†ï¼‰
â”‚   â”œâ”€â”€ config.py                    # é…ç½®åŠ è½½å™¨ï¼ˆè¯»å– YAMLï¼‰
â”‚   â”œâ”€â”€ graph.py                     # LangGraphå·¥ä½œæµå®šä¹‰ï¼ˆèŠ‚ç‚¹+è¾¹+è·¯ç”±ï¼‰
â”‚   â”œâ”€â”€ llm.py                       # LLMç½‘å…³ï¼ˆæ”¯æŒå¤šæ¨¡å‹è°ƒåº¦ï¼‰
â”‚   â”œâ”€â”€ prompts.py                   # æç¤ºè¯åŠ è½½å™¨
â”‚   â”œâ”€â”€ state.py                     # å…¨å±€çŠ¶æ€å®šä¹‰ï¼ˆRadarStateï¼‰
â”‚   â”œâ”€â”€ tool_loader.py               # åŠ¨æ€å·¥å…·åŠ è½½å™¨ï¼ˆä» tools.yaml åŠ è½½ï¼‰
â”‚   â””â”€â”€ tool_registry.py             # å·¥å…·æ³¨å†Œä¸­å¿ƒï¼ˆç®¡ç†æ‰€æœ‰å·¥å…·ï¼‰
â”‚
â”œâ”€â”€ nodes/                           # ğŸ¤– æ™ºèƒ½ä½“èŠ‚ç‚¹å®ç°
â”‚   â”œâ”€â”€ planner.py                   # è§„åˆ’å¤§è„‘ï¼ˆReActæ¨¡å¼ï¼Œè‡ªä¸»å†³ç­–ï¼‰
â”‚   â”œâ”€â”€ executor.py                  # æ‰§è¡Œä¹‹æ‰‹ï¼ˆè°ƒç”¨å·¥å…·ï¼Œæ”¶é›†æ•°æ®ï¼‰
â”‚   â”œâ”€â”€ filter.py                    # æ™ºèƒ½ç­›é€‰å™¨ï¼ˆç»Ÿè®¡å­¦å¼‚å¸¸æ£€æµ‹ï¼‰
â”‚   â”œâ”€â”€ architect.py                 # é€‰é¢˜ç­–åˆ’å¸ˆï¼ˆç»“æ„åŒ–è¾“å‡ºï¼‰
â”‚   â”œâ”€â”€ aggregator.py                # âš ï¸ å·²å¼ƒç”¨ï¼ˆè¢«planner+executoræ›¿ä»£ï¼‰
â”‚   â””â”€â”€ discovery.py                 # KOLå‘ç°èŠ‚ç‚¹ï¼ˆç½‘é¡µæœç´¢ï¼‰
â”‚
â”œâ”€â”€ tools/                           # ğŸ”§ å·¥å…·å±‚ï¼ˆå¹³å°é€‚é…å™¨ï¼‰
â”‚   â”œâ”€â”€ adapters/                    # å„å¹³å°é€‚é…å™¨
â”‚   â”‚   â”œâ”€â”€ bilibili_adapter.py      # Bç«™APIå°è£…
â”‚   â”‚   â”œâ”€â”€ youtube_adapter.py       # YouTubeå°è£…ï¼ˆyt-dlpï¼‰
â”‚   â”‚   â”œâ”€â”€ search_adapter.py        # é€šç”¨æœç´¢é€‚é…å™¨ï¼ˆTavily/Firecrawlï¼‰
â”‚   â”‚   â””â”€â”€ x_adapter.py             # Twitter/Xé€‚é…å™¨
â”‚   â”œâ”€â”€ captcha_solver.py            # éªŒè¯ç è§£å†³å™¨
â”‚   â”œâ”€â”€ web_search.py                # ç½‘é¡µæœç´¢ç½‘å…³
â”‚   â””â”€â”€ youtube_scout.py             # YouTubeæ•°æ®é‡‡é›†å·¥å…·
â”‚
â”œâ”€â”€ docs/                            # ğŸ“„ æ–‡æ¡£
â”‚   â””â”€â”€ hybrid-search-flow.md        # æ··åˆæœç´¢æµç¨‹è¯´æ˜
â”‚
â”œâ”€â”€ user_data/                       # ğŸ’¾ ç”¨æˆ·æ•°æ®ï¼ˆæµè§ˆå™¨ç¼“å­˜ç­‰ï¼‰
â”‚   â””â”€â”€ douyin_browser/              # æŠ–éŸ³æµè§ˆå™¨é…ç½®æ–‡ä»¶
â”‚
â”œâ”€â”€ main.py                          # ğŸš€ ç¨‹åºå…¥å£ï¼ˆäº¤äº’å¼CLIï¼‰
â”œâ”€â”€ requirements.txt                 # ğŸ“¦ Pythonä¾èµ–æ¸…å•
â”œâ”€â”€ .env                             # ğŸ”‘ ç¯å¢ƒå˜é‡é…ç½®ï¼ˆAPI Keysï¼‰
â”œâ”€â”€ env.example                      # ğŸ”‘ ç¯å¢ƒå˜é‡ç¤ºä¾‹
â”œâ”€â”€ README.md                        # é¡¹ç›®è¯´æ˜æ–‡æ¡£
â”œâ”€â”€ multi-agent.md                   # æŠ€æœ¯æ¶æ„è§„æ ¼è¯´æ˜ä¹¦
â”œâ”€â”€ project_review.md                # é¡¹ç›®ä¼˜åŒ–æ–¹æ¡ˆ
â””â”€â”€ program_information.md           # ç¨‹åºè¿è¡Œä¿¡æ¯è®°å½•
```

### æ–‡ä»¶æ•°é‡ç»Ÿè®¡

- **é…ç½®æ–‡ä»¶**ï¼š4 ä¸ª YAML
- **æ ¸å¿ƒæ¨¡å—**ï¼š7 ä¸ª Python æ–‡ä»¶
- **èŠ‚ç‚¹æ¨¡å—**ï¼š6 ä¸ª Python æ–‡ä»¶
- **å·¥å…·æ¨¡å—**ï¼š8 ä¸ª Python æ–‡ä»¶
- **æ–‡æ¡£æ–‡ä»¶**ï¼š7 ä¸ª Markdown

---

## 5. æ ¸å¿ƒæ–‡ä»¶æ·±åº¦å‰–æ

### 5.1 main.py - ç¨‹åºå…¥å£

**è¿™ä¸ªæ–‡ä»¶åšä»€ä¹ˆï¼Ÿ**
ç¨‹åºçš„å¯åŠ¨å™¨ï¼Œè´Ÿè´£ï¼š
1. å’Œç”¨æˆ·äº¤äº’ï¼ˆè¯¢é—®ä»Šå¤©æƒ³æœä»€ä¹ˆï¼‰
2. åˆå§‹åŒ–ç³»ç»ŸçŠ¶æ€
3. å¯åŠ¨ LangGraph å·¥ä½œæµ
4. å±•ç¤ºæœ€ç»ˆç»“æœ

**å…³é”®ä»£ç è§£æ**ï¼š

```python
# 1. åŠ è½½é…ç½®å’Œç¯å¢ƒå˜é‡
load_dotenv()  # è¯»å– .env æ–‡ä»¶ï¼ˆAPI Keysï¼‰
settings = load_settings()  # è¯»å– config/settings.yaml

# 2. äº¤äº’å¼å¯åŠ¨å‘å¯¼
def interactive_startup(settings):
    # è¯¢é—®ç”¨æˆ·ï¼šä»Šå¤©æƒ³æœä»€ä¹ˆé¢†åŸŸï¼Ÿ
    # è¯¢é—®ç”¨æˆ·ï¼šä¼˜å…ˆå“ªäº›å¹³å°ï¼Ÿï¼ˆYouTube/Bç«™ï¼‰
    # è¯¢é—®ç”¨æˆ·ï¼šæ¯ä¸ªä¸»é¢˜è¦é‡‡é›†å¤šå°‘æ¡ï¼Ÿ
    return settings, session_focus, topic_targets

# 3. åˆå§‹åŒ–çŠ¶æ€
initial_state = RadarState(
    target_domains=["AI News", "Python Tutorials"],  # ç›®æ ‡é¢†åŸŸ
    topic_targets={"AI News": 6, "Python": 6},      # é‡‡é›†ç›®æ ‡
    topic_progress={"AI News": 0, "Python": 0}      # å½“å‰è¿›åº¦
)

# 4. è¿è¡Œå·¥ä½œæµï¼ˆæ ¸å¿ƒï¼ï¼‰
final_state = app.invoke(initial_state)  # app æ¥è‡ª core/graph.py

# 5. å±•ç¤ºç»“æœ
for proposal in final_state.get("proposals"):
    print(f"æ ‡é¢˜: {proposal.title}")
    print(f"æ¨èç†ç”±: {proposal.rationale}")
```

**é€šä¿—è§£é‡Š**ï¼š
å°±åƒä½ æ‰“å¼€ä¸€ä¸ª APPï¼Œå®ƒå…ˆé—®ä½ "æƒ³æœä»€ä¹ˆï¼Ÿ"ï¼Œä½ å›ç­”åï¼Œå®ƒå¼€å§‹å·¥ä½œï¼Œæœ€åç»™ä½ çœ‹ç»“æœã€‚

---

### 5.2 core/state.py - çŠ¶æ€ç®¡ç†

**è¿™ä¸ªæ–‡ä»¶åšä»€ä¹ˆï¼Ÿ**
å®šä¹‰äº†æ•´ä¸ªç³»ç»Ÿçš„"å†…å­˜"â€”â€”æ‰€æœ‰æ™ºèƒ½ä½“å…±äº«çš„æ•°æ®ç»“æ„ã€‚

**æ ¸å¿ƒæ•°æ®ç»“æ„**ï¼š

```python
class RadarState(BaseModel):
    # === è¾“å…¥éƒ¨åˆ† ===
    target_domains: List[str]  # ["AI News", "Python Tutorials"]
    monitoring_list: Dict      # ç™½åå• KOL

    # === è¿è¡Œæ—¶æ•°æ® ===
    candidates: List[ContentItem]  # æ”¶é›†åˆ°çš„åŸå§‹ç´ æï¼ˆ45æ¡ï¼‰
    filtered_candidates: List[ContentItem]  # ç­›é€‰åçš„ç²¾é€‰ç´ æï¼ˆ10æ¡ï¼‰

    # === è¿›åº¦è¿½è¸ª ===
    topic_progress: Dict[str, int]  # {"AI News": 8, "Python": 10}
    topic_targets: Dict[str, int]   # {"AI News": 6, "Python": 6}

    # === ReAct è§„åˆ’å™¨çŠ¶æ€ ===
    plan_scratchpad: List[Dict]  # è®°å½• Planner çš„æ€è€ƒå’Œè¡ŒåŠ¨
    plan_status: str  # "planning" | "executing" | "finished"

    # === è¾“å‡ºç»“æœ ===
    proposals: List[TopicBrief]  # æœ€ç»ˆçš„ 3 ä¸ªé€‰é¢˜æ–¹æ¡ˆ
    logs: List[str]  # è¿è¡Œæ—¥å¿—
```

**å…³é”®æ•°æ®æ¨¡å‹**ï¼š

```python
# ContentItem - å•æ¡ç´ æ
class ContentItem(BaseModel):
    platform: str         # "youtube" | "bilibili"
    title: str            # "ä¸ºä»€ä¹ˆ DeepSeek è¿™ä¹ˆç«ï¼Ÿ"
    url: str              # è§†é¢‘é“¾æ¥
    author_name: str      # åšä¸»åå­—
    view_count: int       # æ’­æ”¾é‡
    interaction: int      # äº’åŠ¨æ•°ï¼ˆç‚¹èµ+è¯„è®º+æ”¶è—ï¼‰
    score: float          # ç­›é€‰å™¨è®¡ç®—çš„åˆ†æ•°
    raw_data: Dict        # åŸå§‹æ•°æ®ï¼ˆåŒ…å«æè¿°ã€æ ‡ç­¾ç­‰ï¼‰

# TopicBrief - é€‰é¢˜æ–¹æ¡ˆ
class TopicBrief(BaseModel):
    id: str               # é€‰é¢˜ID
    title: str            # "DeepSeek V3 æ·±åº¦è¯„æµ‹"
    core_angle: str       # "ä»æ¨ç†èƒ½åŠ›å¯¹æ¯”è§’åº¦åˆ‡å…¥"
    rationale: str        # "ä¸ºä»€ä¹ˆé€‰è¿™ä¸ªé¢˜"
    source_type: str      # "viral_hit" | "competitor"
    reference_data: List  # å¼•ç”¨çš„ç´ ææ•°æ®
```

**é€šä¿—è§£é‡Š**ï¼š
å°±åƒä¸€ä¸ªå…±äº«çš„ Excel è¡¨æ ¼ï¼Œæ‰€æœ‰æ™ºèƒ½ä½“éƒ½åœ¨å¾€é‡Œé¢å†™æ•°æ®å’Œè¯»æ•°æ®ã€‚

---

### 5.3 core/graph.py - å·¥ä½œæµç¼–æ’

**è¿™ä¸ªæ–‡ä»¶åšä»€ä¹ˆï¼Ÿ**
å®šä¹‰æ™ºèƒ½ä½“çš„æ‰§è¡Œé¡ºåºå’Œè·³è½¬é€»è¾‘ã€‚

**å®Œæ•´ä»£ç è§£æ**ï¼š

```python
from langgraph.graph import StateGraph, END

# 1. åˆ›å»ºçŠ¶æ€å›¾
workflow = StateGraph(RadarState)

# 2. æ³¨å†ŒèŠ‚ç‚¹ï¼ˆæ™ºèƒ½ä½“ï¼‰
workflow.add_node("planner", planner.run_planner)
workflow.add_node("executor", executor.run_executor)
workflow.add_node("filter", filter.run_hybrid_filter)
workflow.add_node("architect", architect.run_architect)

# 3. è®¾ç½®å…¥å£
workflow.set_entry_point("planner")

# 4. å®šä¹‰è·¯ç”±é€»è¾‘ï¼ˆæ ¸å¿ƒï¼ï¼‰
def router(state: RadarState):
    if state.plan_status == "executing":
        return "executor"  # å»æ‰§è¡Œå·¥å…·
    elif state.plan_status == "finished":
        return "filter"    # å¼€å§‹ç­›é€‰
    else:
        return "planner"   # ç»§ç»­è§„åˆ’

# 5. æ·»åŠ è¾¹
workflow.add_conditional_edges("planner", router, {...})
workflow.add_edge("executor", "planner")  # æ‰§è¡Œå®Œå›åˆ°è§„åˆ’
workflow.add_edge("filter", "architect")  # ç­›é€‰å®Œå»ç­–åˆ’
workflow.add_edge("architect", END)       # ç­–åˆ’å®Œç»“æŸ

# 6. ç¼–è¯‘æˆå¯æ‰§è¡Œåº”ç”¨
app = workflow.compile()
```

**æµç¨‹å›¾**ï¼š

```
        [å¼€å§‹]
          â†“
      Planner â†â”€â”€â”€â”€â”€â”€â”€â”
          â†“           â”‚
    (åˆ¤æ–­ plan_status) â”‚
          â†“           â”‚
    [executing?]      â”‚
          â†“ Yes       â”‚
      Executor â”€â”€â”€â”€â”€â”€â”€â”˜

    [finished?]
          â†“ Yes
        Filter
          â†“
      Architect
          â†“
        [ç»“æŸ]
```

**é€šä¿—è§£é‡Š**ï¼š
å°±åƒä¸€ä¸ªæµç¨‹å›¾ï¼Œè§„å®šäº†"å…ˆåšä»€ä¹ˆï¼Œå†åšä»€ä¹ˆï¼Œä»€ä¹ˆæ—¶å€™å¾ªç¯"ã€‚

---

### 5.4 nodes/planner.py - è§„åˆ’å¤§è„‘ï¼ˆæ ¸å¿ƒä¸­çš„æ ¸å¿ƒï¼ï¼‰

**è¿™ä¸ªæ–‡ä»¶åšä»€ä¹ˆï¼Ÿ**
è¿™æ˜¯æ•´ä¸ªç³»ç»Ÿæœ€èªæ˜çš„éƒ¨åˆ†ï¼Œè´Ÿè´£ï¼š
1. åˆ†æå½“å‰çŠ¶æ€ï¼ˆå·²ç»æ”¶é›†äº†å¤šå°‘æ•°æ®ï¼Ÿï¼‰
2. å†³å®šä¸‹ä¸€æ­¥è¡ŒåŠ¨ï¼ˆè¯¥è°ƒç”¨å“ªä¸ªå·¥å…·ï¼Ÿï¼‰
3. åˆ¤æ–­æ˜¯å¦å®Œæˆï¼ˆæ”¶é›†å¤Ÿäº†å—ï¼Ÿï¼‰

**ReAct å¾ªç¯æµç¨‹**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. åˆ†æå½“å‰çŠ¶æ€                     â”‚
â”‚    - å·²æ”¶é›†: 8 æ¡                   â”‚
â”‚    - ç›®æ ‡: 18 æ¡                    â”‚
â”‚    - å†å²: è°ƒç”¨è¿‡ youtube_search    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. LLM æ¨ç†                         â”‚
â”‚    "è¿˜éœ€è¦ 10 æ¡ï¼Œè¯•è¯• Bç«™..."      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. è¾“å‡ºå†³ç­–                         â”‚
â”‚    ToolCall:                        â”‚
â”‚      tool_name: "bilibili_search"   â”‚
â”‚      arguments: {"keyword": "AI"}   â”‚
â”‚      reasoning: "æ‰©å±•æ•°æ®æº"        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. æ›´æ–°çŠ¶æ€                         â”‚
â”‚    plan_status: "executing"         â”‚
â”‚    plan_scratchpad: [...]           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å…³é”®ä»£ç ç‰‡æ®µ**ï¼š

```python
def run_planner(state: RadarState) -> Dict[str, Any]:
    # 1. æ£€æŸ¥æ˜¯å¦è¾¾æˆç›®æ ‡
    collected = len(state.candidates)
    if collected >= TARGET_TOTAL_ITEMS:  # 18æ¡
        return {"plan_status": "finished"}

    # 2. å‡†å¤‡ä¸Šä¸‹æ–‡ç»™ LLM
    history_text = ""
    for entry in state.plan_scratchpad:
        if "tool_call" in entry:
            history_text += f"[æ€è€ƒ]: {entry['reasoning']}\n"
            history_text += f"[è¡ŒåŠ¨]: {entry['tool_name']}\n"
        if "tool_result" in entry:
            history_text += f"[ç»“æœ]: {entry['summary']}\n"

    # 3. æ„å»ºæç¤ºè¯
    user_prompt = f"""
    ç›®æ ‡: ä¸ºä¸»é¢˜ '{target}' æ”¶é›†é«˜è´¨é‡å†…å®¹ã€‚
    å½“å‰å·²æ”¶é›†: {collected} æ¡ï¼Œç›®æ ‡è‡³å°‘ {TARGET_TOTAL_ITEMS} æ¡ã€‚

    å¯ç”¨å·¥å…·:
    {json.dumps(tool_schemas)}

    æ‰§è¡Œå†å²:
    {history_text}

    **å…³é”®ç­–ç•¥**:
    1. æœç´¢æ—¶å¿…é¡»åŠ å…¥æ—¥æœŸï¼ˆå¦‚ "AI News 2025-11"ï¼‰
    2. YouTube æœç´¢ç”¨è‹±æ–‡ï¼ŒBç«™ç”¨ä¸­æ–‡
    3. å·¥å…·å¤±è´¥äº†å°±æ¢ä¸€ä¸ª

    è¯·è§„åˆ’ä¸‹ä¸€æ­¥è¡ŒåŠ¨ã€‚
    """

    # 4. è°ƒç”¨ LLMï¼ˆä½¿ç”¨ç»“æ„åŒ–è¾“å‡ºï¼‰
    plan: PlannerOutput = get_llm_with_schema(
        user_prompt=user_prompt,
        response_model=PlannerOutput,  # å¼ºåˆ¶è¾“å‡ºæ ¼å¼
        capability="reasoning"  # ä½¿ç”¨ Kimi K2
    )

    # 5. ä¿å­˜å†³ç­–åˆ° scratchpad
    state.plan_scratchpad.append({
        "tool_call": plan.action.model_dump(),
        "timestamp": "now"
    })

    # 6. è¿”å›çŠ¶æ€æ›´æ–°
    return {"plan_status": "executing"}
```

**å…³é”®ç­–ç•¥**ï¼š

1. **æ—¶é—´æ„ŸçŸ¥**ï¼šè‡ªåŠ¨åœ¨å…³é”®è¯ååŠ æ—¥æœŸï¼ˆ"AI News" â†’ "AI News 2025-11"ï¼‰
2. **è¯­è¨€é€‚é…**ï¼š
   - YouTube æœç´¢ï¼šä¸­æ–‡ç¿»è¯‘æˆè‹±æ–‡ï¼ˆ"AIæ–°é—»" â†’ "AI News"ï¼‰
   - Bç«™æœç´¢ï¼šä¿æŒä¸­æ–‡
3. **å·¥å…·åˆ‡æ¢**ï¼šå¦‚æœ YouTube æœä¸åˆ°ï¼Œè‡ªåŠ¨å°è¯• Reddit æˆ– Web Search
4. **å®‰å…¨ä¸Šé™**ï¼šæœ€å¤šè§„åˆ’ 20 æ­¥ï¼Œé˜²æ­¢æ­»å¾ªç¯

**é€šä¿—è§£é‡Š**ï¼š
å°±åƒä¸€ä¸ªé¡¹ç›®ç»ç†ï¼Œå®ƒä¸æ–­çœ‹çœ‹"ä»»åŠ¡å®Œæˆäº†å¤šå°‘"ï¼Œç„¶ååˆ†é…ä¸‹ä¸€æ­¥å·¥ä½œã€‚

---

### 5.5 nodes/executor.py - æ‰§è¡Œä¹‹æ‰‹

**è¿™ä¸ªæ–‡ä»¶åšä»€ä¹ˆï¼Ÿ**
è´Ÿè´£æ‰§è¡Œ Planner ä¸‹è¾¾çš„æŒ‡ä»¤ï¼Œè°ƒç”¨å…·ä½“çš„å·¥å…·ã€‚

**æ‰§è¡Œæµç¨‹**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. ä» plan_scratchpad è¯»å–æŒ‡ä»¤      â”‚
â”‚    tool_name: "youtube_search"      â”‚
â”‚    arguments: {"keyword": "AI"}     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. ä»å·¥å…·æ³¨å†Œè¡¨è·å–å·¥å…·å‡½æ•°         â”‚
â”‚    tool_def = registry.get_tool()   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. æ‰§è¡Œå·¥å…·                         â”‚
â”‚    result = tool_def.func(args)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. æ•°æ®å…¥åº“ï¼ˆè½¬æ¢ä¸º ContentItemï¼‰   â”‚
â”‚    state.candidates.extend(items)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. "æ”¶è·"ï¼ˆHarvestï¼‰æ–°çš„KOL         â”‚
â”‚    ä»è§†é¢‘é“¾æ¥æå–é¢‘é“ID             â”‚
â”‚    åŠ å…¥ pending_monitors é˜Ÿåˆ—       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 6. æ›´æ–°è¿›åº¦                         â”‚
â”‚    topic_progress["AI News"] += 8   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 7. ä¿å­˜ç»“æœåˆ° scratchpad            â”‚
â”‚    last_entry["tool_result"] = {...}â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“
        [è¿”å› Planner]
```

**å…³é”®ä»£ç ç‰‡æ®µ**ï¼š

```python
def run_executor(state: RadarState) -> Dict[str, Any]:
    # 1. è·å–æœ€åä¸€æ¡æŒ‡ä»¤
    last_entry = state.plan_scratchpad[-1]
    tool_call = last_entry.get("tool_call")

    tool_name = tool_call["tool_name"]
    tool_args = tool_call["arguments"]

    # 2. æ‰§è¡Œå·¥å…·
    tool_def = registry.get_tool(tool_name)
    result = tool_def.func(tool_args)  # è°ƒç”¨é€‚é…å™¨

    # 3. æ•°æ®æ ‡å‡†åŒ–
    new_items = []
    for item in result.data:
        ci = ContentItem(**item)  # è½¬æ¢ä¸ºæ ‡å‡†æ ¼å¼
        new_items.append(ci)

    # 4. å…¥åº“
    state.candidates.extend(new_items)

    # 5. è‡ªåŠ¨å‘ç°æ–°çš„ KOLï¼ˆHarvestï¼‰
    _harvest_sources(state, new_items, tool_name)
    # ä¾‹å¦‚ï¼šä» YouTube è§†é¢‘é“¾æ¥ä¸­æå–é¢‘é“ ID
    # è‡ªåŠ¨åŠ å…¥ pending_monitors["youtube"] é˜Ÿåˆ—

    # 6. æ›´æ–°è¿›åº¦
    topic_hint = tool_args.get("topic_hint")  # "AI News"
    state.topic_progress[topic_hint] += len(new_items)

    # 7. ä¿å­˜ç»“æœ
    last_entry["tool_result"] = result.model_dump()

    return {"plan_status": "planning"}  # å›åˆ° Planner
```

**Harvestï¼ˆæ”¶è·ï¼‰æœºåˆ¶**ï¼š

å½“ Executor æ”¶é›†åˆ° YouTube è§†é¢‘æ—¶ï¼Œå®ƒä¼šï¼š
1. æå–è§†é¢‘é“¾æ¥ä¸­çš„é¢‘é“ ID
2. è‡ªåŠ¨åŠ å…¥ `pending_monitors["youtube"]` é˜Ÿåˆ—
3. Planner åœ¨åç»­è§„åˆ’ä¸­ä¼šè‡ªåŠ¨ç›‘æ§è¿™äº›é¢‘é“

**é€šä¿—è§£é‡Š**ï¼š
å°±åƒä¸€ä¸ªæ‰§è¡ŒåŠ©ç†ï¼Œè€æ¿è¯´"å»ä¹°å’–å•¡"ï¼Œå®ƒå°±å»ä¹°ï¼Œç„¶åæŠ¥å‘Š"ä¹°äº† 2 æ¯å’–å•¡ï¼ŒèŠ±äº† 10 å…ƒ"ã€‚

---

### 5.6 nodes/filter.py - æ™ºèƒ½ç­›é€‰å™¨

**è¿™ä¸ªæ–‡ä»¶åšä»€ä¹ˆï¼Ÿ**
ä» 45 æ¡åŸå§‹ç´ æä¸­ï¼Œç­›é€‰å‡ºæœ€æœ‰"çˆ†æ¬¾æ½œåŠ›"çš„ 10 æ¡ã€‚

**æ ¸å¿ƒç®—æ³•ï¼šåŒç­–ç•¥æ··åˆç­›é€‰**

#### ç­–ç•¥ Aï¼šç›‘æ§æ¨¡å¼ï¼ˆçºµå‘å¯¹æ¯”ï¼‰

**ç›®æ ‡**ï¼šå‘ç°åšä¸»"å‘æŒ¥è¶…å¸¸"çš„è§†é¢‘

```python
# åˆ¤æ–­é€»è¾‘
if è§†é¢‘æ’­æ”¾é‡ > åšä¸»å¹³å‡æ’­æ”¾é‡ * 1.2:
    âœ… é€šè¿‡ï¼è¿™ä¸ªè§†é¢‘æ¯”å¹³æ—¶å¥½ 20%
    score = 80 + (æ¯”ä¾‹ * 10)

# ä¾‹å­ï¼š
# åšä¸»å¹³æ—¶å¹³å‡ 10ä¸‡ æ’­æ”¾
# è¿™ä¸ªè§†é¢‘æœ‰ 15ä¸‡ æ’­æ”¾
# ratio = 15ä¸‡ / 10ä¸‡ = 1.5
# score = 80 + (1.5 * 10) = 95 åˆ†
```

**ç‰¹ä¾‹**ï¼šç»å¯¹çˆ†æ¬¾ï¼ˆ50ä¸‡+æ’­æ”¾ï¼‰ï¼Œå³ä½¿åšä¸»å¹³æ—¶å°±å¾ˆå¼ºï¼Œä¹Ÿä¿ç•™ã€‚

#### ç­–ç•¥ Bï¼šçŒæ€æ¨¡å¼ï¼ˆæ¨ªå‘å¯¹æ¯”ï¼‰

**ç›®æ ‡**ï¼šå‘ç°åŒè¡Œä¸­çš„"é»‘é©¬"

```python
# 1. è®¡ç®—æ± å­çš„ä¸­ä½æ•°
median_views = 5000  # æ‰€æœ‰è§†é¢‘æ’­æ”¾é‡çš„ä¸­ä½æ•°

# 2. åˆ¤æ–­é€»è¾‘
if è§†é¢‘æ’­æ”¾é‡ > ä¸­ä½æ•° * 2:
    âœ… é€šè¿‡ï¼è¿™æ˜¯èµ›é“é»‘é©¬

# æˆ–è€…ï¼š
if äº’åŠ¨ç‡ > 2%:  # (ç‚¹èµ+è¯„è®º) / ç²‰ä¸æ•°
    âœ… é€šè¿‡ï¼é«˜è´¨é‡å†…å®¹
```

#### è·¨å¹³å°å½’ä¸€åŒ–

ä¸åŒå¹³å°çš„æ•°æ®ä¸èƒ½ç›´æ¥æ¯”è¾ƒï¼š
- YouTube 10ä¸‡æ’­æ”¾ â‰ˆ Bç«™ 1ä¸‡æ’­æ”¾
- éœ€è¦å½’ä¸€åŒ–

```python
# 1. è®¡ç®—æ¯ä¸ªå¹³å°çš„ä¸­ä½æ•°
platform_median = {
    "youtube": 10000,
    "bilibili": 1000
}

# 2. å½’ä¸€åŒ–
normalized_view = è§†é¢‘æ’­æ”¾é‡ / å¹³å°ä¸­ä½æ•°

# ä¾‹å­ï¼š
# YouTube è§†é¢‘ 8ä¸‡æ’­æ”¾ / 1ä¸‡ä¸­ä½æ•° = 8.0x
# Bç«™ è§†é¢‘ 8000æ’­æ”¾ / 1000ä¸­ä½æ•° = 8.0x
# â†’ ä¸¤è€…å¤„äºåŒä¸€æ°´å¹³ï¼
```

**å®Œæ•´æµç¨‹å›¾**ï¼š

```
    [45 æ¡åŸå§‹ç´ æ]
          â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  å»é‡å¤„ç†   â”‚
    â”‚ (URL+æ ‡é¢˜)  â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
          â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚è·¨å¹³å°å½’ä¸€åŒ– â”‚
    â”‚è®¡ç®—äº’åŠ¨ç‡   â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
          â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  åˆ†ç»„å¤„ç†          â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ç›‘æ§æ•°æ®â”‚æœç´¢æ•°æ®   â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”´â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“       â†“
    [ç­–ç•¥A]  [ç­–ç•¥B]
    çºµå‘å¯¹æ¯”  æ¨ªå‘å¯¹æ¯”
         â†“       â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  åˆå¹¶æ’åº   â”‚
    â”‚ (æŒ‰scoreé™åº)â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
          â†“
    [Top 10 ç²¾é€‰ç´ æ]
```

**é€šä¿—è§£é‡Š**ï¼š
å°±åƒé€‰ç§€èŠ‚ç›®çš„æµ·é€‰è¯„å§”ï¼Œå®ƒç”¨"æ•°æ®+ç®—æ³•"ç­›æ‰å¹³åº¸çš„ï¼Œç•™ä¸‹æœ€æœ‰æ½œåŠ›çš„ã€‚

---

### 5.7 nodes/architect.py - é€‰é¢˜ç­–åˆ’å¸ˆ

**è¿™ä¸ªæ–‡ä»¶åšä»€ä¹ˆï¼Ÿ**
è¯»å– 10 æ¡ç²¾é€‰ç´ æï¼Œç­–åˆ’å‡º 3 ä¸ªå…·ä½“çš„é€‰é¢˜æ–¹æ¡ˆã€‚

**å…³é”®ç‰¹æ€§ï¼šç»“æ„åŒ–è¾“å‡º**

ä½¿ç”¨ `instructor` åº“å¼ºåˆ¶ AI è¾“å‡ºç¬¦åˆ Pydantic æ¨¡å‹ï¼š

```python
# 1. å®šä¹‰è¾“å‡ºæ ¼å¼
class TopicBrief(BaseModel):
    id: str
    title: str                # é€‰é¢˜æ ‡é¢˜
    core_angle: str           # æ ¸å¿ƒåˆ‡å…¥ç‚¹
    rationale: str            # æ¨èç†ç”±
    source_type: str          # æ¥æºç±»å‹
    reference_data: List      # å¼•ç”¨çš„ç´ æ

class TopicBriefList(BaseModel):
    proposals: List[TopicBrief]  # å¿…é¡»æ˜¯ 3 ä¸ª

# 2. å‡†å¤‡ä¸Šä¸‹æ–‡
candidates_summary = []
for item in state.filtered_candidates:
    desc = item.raw_data.get('description', '')[:3000]  # å–å‰3000å­—
    candidates_summary.append(f"""
    ã€ç´ æ #{idx}ã€‘
    æ¥æº: {item.platform}
    æ ‡é¢˜: {item.title}
    æ•°æ®: æ’­æ”¾ {item.view_count} | äº’åŠ¨ {item.interaction}
    åšä¸»: {item.author_name}
    æ ¸å¿ƒå†…å®¹æ‘˜è¦:
    {desc}
    """)

context_str = "\n".join(candidates_summary)

# 3. è°ƒç”¨ LLMï¼ˆä½¿ç”¨é•¿ä¸Šä¸‹æ–‡æ¨¡å‹ï¼‰
result: TopicBriefList = llm.call_with_schema(
    user_prompt=f"è¯·ç­–åˆ’ 3 ä¸ªé€‰é¢˜ï¼š\n{context_str}",
    schema_model=TopicBriefList,
    capability="creative"  # Kimi K2 (256kä¸Šä¸‹æ–‡)
)

# 4. è¿”å›ç»“æœ
return {"proposals": result.proposals}
```

**æç¤ºè¯ç­–ç•¥**ï¼ˆæ¥è‡ª `config/prompts.yaml`ï¼‰ï¼š

```yaml
architect_agent:
  role: "çˆ†æ¬¾é€‰é¢˜æ¶æ„å¸ˆ"
  goal: "åŸºäºæœé›†åˆ°çš„æƒ…æŠ¥ï¼Œç­–åˆ’å‡º 3 ä¸ªæå…·å¸å¼•åŠ›çš„è§†é¢‘é€‰é¢˜æ–¹æ¡ˆ"
  methodology: |
    1. æ ‡é¢˜å…šï¼ˆæ­£å‘ï¼‰ï¼šæ ‡é¢˜å¿…é¡»åœ¨ 3 ç§’å†…æŠ“ä½çœ¼çƒ
    2. æ•°æ®é©±åŠ¨ï¼šæ¯ä¸ªé€‰é¢˜éƒ½åŸºäºé«˜çƒ­åº¦æ•°æ®
    3. å·®å¼‚åŒ–ï¼šæä¾›æ–°çš„åˆ‡å…¥ç‚¹ï¼Œä¸èƒ½å®Œå…¨ç…§æ¬
```

**é•¿ä¸Šä¸‹æ–‡çš„ä¼˜åŠ¿**ï¼š

ä¼ ç»Ÿ LLMï¼ˆ4k ä¸Šä¸‹æ–‡ï¼‰ï¼š
- åªèƒ½è¯» 2-3 æ¡ç´ æçš„æè¿°
- å®¹æ˜“é—æ¼é‡è¦ä¿¡æ¯

Kimi K2ï¼ˆ256k ä¸Šä¸‹æ–‡ï¼‰ï¼š
- èƒ½è¯»å®Œæ‰€æœ‰ 10 æ¡ç´ æçš„å®Œæ•´æè¿°ï¼ˆæ¯æ¡ 3000 å­—ï¼‰
- èƒ½å‘ç°ç´ æä¹‹é—´çš„å…³è”
- ç­–åˆ’æ›´æœ‰æ·±åº¦

**é€šä¿—è§£é‡Š**ï¼š
å°±åƒä¸€ä¸ªèµ„æ·±ç¼–è¾‘ï¼Œè¯»å®Œæ‰€æœ‰ç´ æåï¼Œç­–åˆ’å‡º"è¿™ä¸ªé¢˜æå¯ä»¥è¿™æ ·åš"çš„å…·ä½“æ–¹æ¡ˆã€‚

---

### 5.8 core/llm.py - LLM ç½‘å…³

**è¿™ä¸ªæ–‡ä»¶åšä»€ä¹ˆï¼Ÿ**
ç®¡ç†å¤šä¸ª AI æ¨¡å‹ï¼Œæ ¹æ®ä¸åŒä»»åŠ¡è°ƒåº¦ä¸åŒæ¨¡å‹ã€‚

**æ¨¡å‹åˆ†å·¥**ï¼ˆæ¥è‡ª `config/models.yaml`ï¼‰ï¼š

| èƒ½åŠ›æ ‡ç­¾ | æ¨¡å‹ | ç”¨é€” | ç‰¹ç‚¹ |
|---------|------|------|------|
| `reasoning` | Kimi K2 | è§„åˆ’ï¼ˆPlannerï¼‰ | æ·±åº¦æ¨ç†ï¼Œ256kä¸Šä¸‹æ–‡ |
| `creative` | Kimi K2 | ç­–åˆ’ï¼ˆArchitectï¼‰ | é•¿æ–‡æœ¬ç†è§£ï¼Œåˆ›ä½œèƒ½åŠ› |
| `fast` | DeepSeek V3 | æ•°æ®å¤„ç† | é€Ÿåº¦å¿«ï¼Œæˆæœ¬ä½ |

**æ ¸å¿ƒç±»ï¼šModelGateway**

```python
class ModelGateway:
    def __init__(self):
        # è¯»å–é…ç½®
        self.config = load_model_config()
        self.api_key = os.getenv("LLM_API_KEY")
        self.base_url = "https://openrouter.ai/api/v1"

        # åˆå§‹åŒ– Instructorï¼ˆç»“æ„åŒ–è¾“å‡ºï¼‰
        self.instructor_client = instructor.from_openai(...)

    def _get_model_params(self, capability: str):
        """æ ¹æ®èƒ½åŠ›æ ‡ç­¾è·å–æ¨¡å‹é…ç½®"""
        # capability: "reasoning" | "creative" | "fast"
        return self.config["models"][capability]

    def call_with_schema(self, user_prompt, schema_model, capability):
        """ç»“æ„åŒ–è¾“å‡ºï¼ˆæ ¸å¿ƒï¼ï¼‰"""
        # 1. è·å–æ¨¡å‹é…ç½®
        config = self._get_model_params(capability)
        model_id = config["model_id"]  # "moonshotai/kimi-k2-thinking"

        # 2. è°ƒç”¨ Instructorï¼ˆè‡ªåŠ¨å¤„ç†éªŒè¯å’Œé‡è¯•ï¼‰
        response = self.instructor_client.chat.completions.create(
            model=model_id,
            response_model=schema_model,  # Pydantic æ¨¡å‹
            messages=[
                {"role": "system", "content": system_prompt},
                {"role": "user", "content": user_prompt}
            ],
            temperature=config.get("temperature"),
            max_tokens=config.get("max_tokens")
        )

        return response  # å·²ç»æ˜¯ Pydantic å¯¹è±¡ï¼
```

**ä¸ºä»€ä¹ˆç”¨ OpenRouterï¼Ÿ**

OpenRouter æ˜¯ä¸€ä¸ª LLM ç½‘å…³ï¼ˆAPI ä»£ç†ï¼‰ï¼Œä¼˜åŠ¿ï¼š
- ç»Ÿä¸€æ¥å£ï¼šä¸€ä¸ª API Key è°ƒç”¨ 100+ æ¨¡å‹
- è‡ªåŠ¨åˆ‡æ¢ï¼šå¦‚æœä¸€ä¸ªæ¨¡å‹æŒ‚äº†ï¼Œè‡ªåŠ¨ç”¨å¤‡ç”¨æ¨¡å‹
- æˆæœ¬ä¼˜åŒ–ï¼šè‡ªåŠ¨é€‰æ‹©æœ€ä¾¿å®œçš„å¯ç”¨æ¨¡å‹

**ç»“æ„åŒ–è¾“å‡ºçš„é­”æ³•ï¼ˆInstructoråº“ï¼‰**ï¼š

ä¼ ç»Ÿæ–¹å¼ï¼š
```python
# 1. è°ƒç”¨ LLM
response = llm.call("è¯·è¾“å‡º JSON")

# 2. è§£æ JSONï¼ˆå®¹æ˜“å‡ºé”™ï¼‰
try:
    data = json.loads(response)
except:
    # ğŸ˜­ LLM è¾“å‡ºæ ¼å¼ä¸å¯¹ï¼Œç¨‹åºå´©æºƒ
```

ä½¿ç”¨ Instructorï¼š
```python
# 1. å®šä¹‰ Pydantic æ¨¡å‹
class Output(BaseModel):
    title: str
    score: int

# 2. å¼ºåˆ¶ LLM è¾“å‡ºç¬¦åˆæ ¼å¼
result: Output = llm.call_with_schema(
    prompt="...",
    schema_model=Output
)

# 3. ç›´æ¥ä½¿ç”¨ï¼ˆä¿è¯ç±»å‹å®‰å…¨ï¼‰
print(result.title)  # âœ… ä¸€å®šæ˜¯ str
print(result.score)  # âœ… ä¸€å®šæ˜¯ int
```

å¦‚æœ LLM è¾“å‡ºæ ¼å¼ä¸å¯¹ï¼ŒInstructor ä¼šï¼š
1. è‡ªåŠ¨é‡è¯•ï¼ˆæœ€å¤š 3 æ¬¡ï¼‰
2. å‘Šè¯‰ LLM å“ªé‡Œæ ¼å¼é”™äº†
3. æœ€ç»ˆè¿”å›ç¬¦åˆæ ¼å¼çš„ç»“æœ

**é€šä¿—è§£é‡Š**ï¼š
å°±åƒä¸€ä¸ª"ç¿»è¯‘ä¸­å¿ƒ"ï¼Œæ ¹æ®ä»»åŠ¡ç±»å‹é€‰æ‹©æœ€åˆé€‚çš„ç¿»è¯‘å‘˜ï¼ˆAIæ¨¡å‹ï¼‰ï¼Œå¹¶ç¡®ä¿ç¿»è¯‘ç»“æœæ ¼å¼æ­£ç¡®ã€‚

---

### 5.9 core/tool_registry.py - å·¥å…·æ³¨å†Œç³»ç»Ÿ

**è¿™ä¸ªæ–‡ä»¶åšä»€ä¹ˆï¼Ÿ**
ç®¡ç†æ‰€æœ‰å¯ç”¨å·¥å…·ï¼Œè®© Planner çŸ¥é“"æœ‰å“ªäº›å·¥å…·å¯ä»¥ç”¨"ã€‚

**æ ¸å¿ƒæ¦‚å¿µï¼šå·¥å…·å®šä¹‰**

```python
class ToolDefinition(BaseModel):
    name: str                      # "youtube_search"
    description: str               # "æœç´¢ YouTube è§†é¢‘"
    input_schema: Dict             # JSON Schemaï¼ˆå‚æ•°å®šä¹‰ï¼‰
    func: Callable                 # å®é™…çš„ Python å‡½æ•°

    def to_schema(self):
        """è½¬æ¢ä¸º OpenAI Function Calling æ ¼å¼"""
        return {
            "type": "function",
            "function": {
                "name": self.name,
                "description": self.description,
                "parameters": self.input_schema
            }
        }
```

**æ³¨å†Œæµç¨‹**ï¼š

```python
# 1. åˆ›å»ºå…¨å±€æ³¨å†Œè¡¨
registry = ToolRegistry()

# 2. æ³¨å†Œå·¥å…·ï¼ˆåœ¨ tool_loader.py ä¸­ï¼‰
from tools.adapters.youtube_adapter import YouTubeAdapter

adapter = YouTubeAdapter()

registry.register(
    name="youtube_search",
    description="æœç´¢ YouTube è§†é¢‘",
    input_model=YouTubeSearchInput,  # Pydantic æ¨¡å‹
    func=adapter.search_videos,       # å®é™…å‡½æ•°
    capabilities=["search", "video"]
)

# 3. Planner ä½¿ç”¨
tool_schemas = registry.list_tool_schemas()
# â†’ LLM çœ‹åˆ°æ‰€æœ‰å¯ç”¨å·¥å…·çš„è¯´æ˜ï¼Œå†³å®šè°ƒç”¨å“ªä¸ª

# 4. Executor ä½¿ç”¨
tool_def = registry.get_tool("youtube_search")
result = tool_def.func(arguments)
```

**å·¥å…·é…ç½®ï¼ˆtools.yamlï¼‰**ï¼š

```yaml
tools:
  youtube_search:
    adapter_class: "tools.adapters.youtube_adapter.YouTubeAdapter"
    adapter_method: "search_videos"
    input_model: "YouTubeSearchInput"
    description: "æœç´¢ YouTube è§†é¢‘ï¼Œæ”¯æŒå…³é”®è¯å’Œæ—¶é—´èŒƒå›´"
    capabilities: ["search", "video", "youtube"]
```

**é€šä¿—è§£é‡Š**ï¼š
å°±åƒä¸€ä¸ªå·¥å…·ç®±çš„"ç›®å½•"ï¼Œè®°å½•äº†"æœ‰å“ªäº›å·¥å…·ï¼Œæ€ä¹ˆç”¨"ã€‚

---

### 5.10 tools/adapters/bilibili_adapter.py - Bç«™é€‚é…å™¨

**è¿™ä¸ªæ–‡ä»¶åšä»€ä¹ˆï¼Ÿ**
å°è£… Bç«™ APIï¼Œæä¾›ç»Ÿä¸€æ¥å£ã€‚

**æ ¸å¿ƒåŠŸèƒ½**ï¼š

```python
class BilibiliAdapter:
    def search_videos(self, params: BilibiliSearchInput):
        """æœç´¢ Bç«™è§†é¢‘"""
        # 1. è°ƒç”¨ bilibili-api-python åº“
        results = sync(search.search_by_type(
            keyword=params.keyword,
            search_type=SearchObjectType.VIDEO,
            page_size=params.limit
        ))

        # 2. æ•°æ®æ ‡å‡†åŒ–
        items = []
        for v in results['result']:
            item = {
                "platform": "bilibili",
                "source_type": "search",
                "title": v.get('title'),
                "url": f"https://www.bilibili.com/video/{v.get('bvid')}",
                "author_name": v.get('author'),
                "author_id": str(v.get('mid')),
                "view_count": v.get('play'),
                "interaction": v.get('favorites') + v.get('review'),
                "raw_data": v  # ä¿ç•™åŸå§‹æ•°æ®
            }
            items.append(item)

        # 3. è¿”å›æ ‡å‡†æ ¼å¼
        return ToolResult(
            status="success",
            data=items,
            summary=f"Found {len(items)} videos"
        )

    def monitor_user(self, params: BilibiliMonitorInput):
        """ç›‘æ§ UP ä¸»æŠ•ç¨¿"""
        u = user.User(uid=int(params.user_id))
        resp = sync(u.get_videos(ps=params.limit))
        # ... ç±»ä¼¼å¤„ç†
```

**æ•°æ®æ ‡å‡†åŒ–çš„é‡è¦æ€§**ï¼š

ä¸åŒå¹³å°çš„ API è¿”å›æ ¼å¼ä¸åŒï¼š
- YouTube: `snippet.title`, `statistics.viewCount`
- Bç«™: `title`, `play`

é€‚é…å™¨çš„ä½œç”¨å°±æ˜¯æŠŠå®ƒä»¬è½¬æ¢ä¸ºç»Ÿä¸€æ ¼å¼ï¼š

```python
# ç»Ÿä¸€æ ¼å¼
{
    "platform": "bilibili" | "youtube",
    "title": "...",
    "url": "...",
    "view_count": 1000,
    "interaction": 500,
    ...
}
```

**é€šä¿—è§£é‡Š**ï¼š
å°±åƒä¸€ä¸ª"ç¿»è¯‘å™¨"ï¼ŒæŠŠ Bç«™ API çš„"æ–¹è¨€"ç¿»è¯‘æˆç³»ç»Ÿèƒ½ç†è§£çš„"æ ‡å‡†æ™®é€šè¯"ã€‚

---

## 6. å®Œæ•´è¿è¡Œæµç¨‹

### 6.1 å¯åŠ¨é˜¶æ®µ

```
ç”¨æˆ·è¿è¡Œ: python main.py
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. åŠ è½½ç¯å¢ƒå˜é‡ (.env)              â”‚
â”‚    - LLM_API_KEY                    â”‚
â”‚    - TAVILY_API_KEY                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. åŠ è½½é…ç½®æ–‡ä»¶                     â”‚
â”‚    - config/settings.yaml           â”‚
â”‚    - config/models.yaml             â”‚
â”‚    - config/prompts.yaml            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. äº¤äº’å¼å‘å¯¼                       â”‚
â”‚    Q: ä»Šå¤©æƒ³æœä»€ä¹ˆé¢†åŸŸï¼Ÿ            â”‚
â”‚    A: AI News, Python Tutorials     â”‚
â”‚    Q: ä¼˜å…ˆå“ªäº›å¹³å°ï¼Ÿ                â”‚
â”‚    A: youtube, bilibili             â”‚
â”‚    Q: æ¯ä¸ªä¸»é¢˜è¦å‡ æ¡ï¼Ÿ              â”‚
â”‚    A: AI News:6, Python:6           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. åˆå§‹åŒ–çŠ¶æ€                       â”‚
â”‚    RadarState {                     â”‚
â”‚      target_domains: ["AI News"]    â”‚
â”‚      topic_targets: {"AI News": 6}  â”‚
â”‚      topic_progress: {"AI News": 0} â”‚
â”‚      candidates: []                 â”‚
â”‚    }                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“
        [è¿›å…¥å·¥ä½œæµ]
```

### 6.2 Planner-Executor å¾ªç¯ï¼ˆæ ¸å¿ƒï¼ï¼‰

**ç¬¬ 1 è½®**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Planner åˆ†æï¼š                             â”‚
â”‚ - ç›®æ ‡: æ”¶é›† 18 æ¡                         â”‚
â”‚ - å½“å‰: 0 æ¡                               â”‚
â”‚ - å†å²: æ—                                  â”‚
â”‚                                            â”‚
â”‚ LLM æ¨ç†:                                  â”‚
â”‚ "éœ€è¦ä» YouTube å¼€å§‹æœç´¢..."              â”‚
â”‚                                            â”‚
â”‚ å†³ç­–:                                      â”‚
â”‚   tool_name: "youtube_search"              â”‚
â”‚   arguments: {                             â”‚
â”‚     "keyword": "AI News 2025-11",          â”‚
â”‚     "limit": 8                             â”‚
â”‚   }                                        â”‚
â”‚   reasoning: "ä¼˜å…ˆæœç´¢ YouTube è‹±æ–‡å†…å®¹"   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â†“ plan_status = "executing"
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Executor æ‰§è¡Œï¼š                            â”‚
â”‚ 1. è°ƒç”¨ YouTubeAdapter.search_videos()    â”‚
â”‚ 2. è¿”å› 8 æ¡è§†é¢‘æ•°æ®                       â”‚
â”‚ 3. æ ‡å‡†åŒ–ä¸º ContentItem                    â”‚
â”‚ 4. state.candidates.extend([...])         â”‚
â”‚ 5. æå–é¢‘é“ IDï¼ŒåŠ å…¥ pending_monitors      â”‚
â”‚ 6. topic_progress["AI News"] += 8         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â†“ plan_status = "planning"
        [å›åˆ° Planner]
```

**ç¬¬ 2 è½®**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Planner åˆ†æï¼š                             â”‚
â”‚ - ç›®æ ‡: 18 æ¡                              â”‚
â”‚ - å½“å‰: 8 æ¡                               â”‚
â”‚ - å†å²: youtube_search æˆåŠŸ                â”‚
â”‚                                            â”‚
â”‚ LLM æ¨ç†:                                  â”‚
â”‚ "è¿˜éœ€è¦ 10 æ¡ï¼Œè¯•è¯• Bç«™..."               â”‚
â”‚                                            â”‚
â”‚ å†³ç­–:                                      â”‚
â”‚   tool_name: "bilibili_search"             â”‚
â”‚   arguments: {                             â”‚
â”‚     "keyword": "AIæ–°é—»",                   â”‚
â”‚     "limit": 8                             â”‚
â”‚   }                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Executor æ‰§è¡Œï¼š                            â”‚
â”‚ è¿”å› 8 æ¡ Bç«™è§†é¢‘                          â”‚
â”‚ topic_progress["AI News"] += 8 â†’ 16       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â†“
        [å›åˆ° Planner]
```

**ç¬¬ 3 è½®**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Planner åˆ†æï¼š                             â”‚
â”‚ - å½“å‰: 16 æ¡                              â”‚
â”‚ - ç›®æ ‡: 18 æ¡                              â”‚
â”‚                                            â”‚
â”‚ LLM æ¨ç†:                                  â”‚
â”‚ "å·® 2 æ¡ï¼Œä» pending_monitors ä¸­ç›‘æ§é¢‘é“"  â”‚
â”‚                                            â”‚
â”‚ å†³ç­–:                                      â”‚
â”‚   tool_name: "youtube_monitor"             â”‚
â”‚   arguments: {                             â”‚
â”‚     "channel_url": "https://..."           â”‚
â”‚   }                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Executor æ‰§è¡Œï¼š                            â”‚
â”‚ è¿”å› 5 æ¡é¢‘é“è§†é¢‘                          â”‚
â”‚ topic_progress["AI News"] += 5 â†’ 21       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â†“
        [å›åˆ° Planner]
```

**ç¬¬ 4 è½®**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Planner åˆ†æï¼š                             â”‚
â”‚ - å½“å‰: 21 æ¡                              â”‚
â”‚ - ç›®æ ‡: 18 æ¡ âœ…                           â”‚
â”‚                                            â”‚
â”‚ å†³ç­–:                                      â”‚
â”‚   is_finished = True                       â”‚
â”‚   plan_status = "finished"                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â†“
        [è¿›å…¥ Filter]
```

### 6.3 Filter ç­›é€‰é˜¶æ®µ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è¾“å…¥: 21 æ¡åŸå§‹ç´ æ                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. å»é‡ï¼ˆURL + æ ‡é¢˜ï¼‰                      â”‚
â”‚    21 æ¡ â†’ 18 æ¡                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. è·¨å¹³å°å½’ä¸€åŒ–                            â”‚
â”‚    è®¡ç®— normalized_view, engagement_rate   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. åˆ†ç»„å¤„ç†                                â”‚
â”‚    - monitor_items: 5 æ¡ï¼ˆç›‘æ§æ•°æ®ï¼‰       â”‚
â”‚    - hunter_items: 13 æ¡ï¼ˆæœç´¢æ•°æ®ï¼‰       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç­–ç•¥ A: ç›‘æ§æ¨¡å¼    â”‚ ç­–ç•¥ B: çŒæ€æ¨¡å¼     â”‚
â”‚ (çºµå‘å¯¹æ¯”)          â”‚ (æ¨ªå‘å¯¹æ¯”)           â”‚
â”‚                     â”‚                      â”‚
â”‚ 5 æ¡ â†’ 3 æ¡é€šè¿‡     â”‚ 13 æ¡ â†’ 8 æ¡é€šè¿‡     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. åˆå¹¶æ’åºï¼ˆæŒ‰ score é™åºï¼‰               â”‚
â”‚    11 æ¡ â†’ Top 10                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è¾“å‡º: 10 æ¡ç²¾é€‰ç´ æ                        â”‚
â”‚ state.filtered_candidates = [...]          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â†“
        [è¿›å…¥ Architect]
```

### 6.4 Architect ç­–åˆ’é˜¶æ®µ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è¾“å…¥: 10 æ¡ç²¾é€‰ç´ æ                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. å‡†å¤‡ä¸Šä¸‹æ–‡ï¼ˆé•¿æ–‡æœ¬ï¼‰                    â”‚
â”‚    - ç´ æ #1: æ ‡é¢˜ + æè¿°ï¼ˆ3000å­—ï¼‰        â”‚
â”‚    - ç´ æ #2: ...                          â”‚
â”‚    - ...                                   â”‚
â”‚    - ç´ æ #10: ...                         â”‚
â”‚    æ€»é•¿åº¦: ~30,000 å­—                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. è°ƒç”¨ LLMï¼ˆKimi K2 - 256kä¸Šä¸‹æ–‡ï¼‰        â”‚
â”‚    ç³»ç»Ÿæç¤ºè¯:                             â”‚
â”‚      "ä½ æ˜¯çˆ†æ¬¾é€‰é¢˜æ¶æ„å¸ˆ..."               â”‚
â”‚    ç”¨æˆ·æç¤ºè¯:                             â”‚
â”‚      "è¯·ç­–åˆ’ 3 ä¸ªé€‰é¢˜..."                  â”‚
â”‚    è¦æ±‚:                                   â”‚
â”‚      - æ·±åº¦æ•´åˆç´ æ                        â”‚
â”‚      - æ ‡é¢˜å¸å¼•çœ¼çƒ                        â”‚
â”‚      - æä¾›æ–°åˆ‡å…¥ç‚¹                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. ç»“æ„åŒ–è¾“å‡ºï¼ˆInstructor å¼ºåˆ¶ï¼‰           â”‚
â”‚    response_model: TopicBriefList          â”‚
â”‚    è‡ªåŠ¨éªŒè¯æ ¼å¼ï¼Œé‡è¯•é”™è¯¯                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è¾“å‡º: 3 ä¸ªé€‰é¢˜æ–¹æ¡ˆ                         â”‚
â”‚                                            â”‚
â”‚ TopicBrief #1:                             â”‚
â”‚   title: "DeepSeek V3 æ·±åº¦è¯„æµ‹"            â”‚
â”‚   core_angle: "ä»æ¨ç†èƒ½åŠ›å¯¹æ¯”åˆ‡å…¥"         â”‚
â”‚   rationale: "ç»“åˆç´ æ #1, #3, #7..."      â”‚
â”‚                                            â”‚
â”‚ TopicBrief #2: ...                         â”‚
â”‚ TopicBrief #3: ...                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â†“
        [å·¥ä½œæµç»“æŸ]
```

### 6.5 ç»“æœå±•ç¤º

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ main.py æ¥æ”¶ final_state                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ‰“å°è¿è¡Œæ—¥å¿—:                              â”‚
â”‚ - ã€é‡‡é›†ã€‘youtube_search â†’ AI News (+8)    â”‚
â”‚ - ã€é‡‡é›†ã€‘bilibili_search â†’ AI News (+8)   â”‚
â”‚ - ã€å‘ç°ã€‘æ–°å¢é¢‘é“ ...                     â”‚
â”‚ - ã€ç­›é€‰ã€‘è¾“å…¥ 18 æ¡ï¼Œè¾“å‡º 10 æ¡           â”‚
â”‚ - æˆåŠŸç”Ÿæˆ 3 ä¸ªé€‰é¢˜ææ¡ˆ                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ‰“å°é€‰é¢˜ç®€æŠ¥:                              â”‚
â”‚                                            â”‚
â”‚ ğŸ“„ é€‰é¢˜ #1                                 â”‚
â”‚ æ ‡é¢˜: DeepSeek V3 æ·±åº¦è¯„æµ‹                 â”‚
â”‚ åˆ‡å…¥ç‚¹: ä»æ¨ç†èƒ½åŠ›å¯¹æ¯”è§’åº¦                 â”‚
â”‚ æ¨èç†ç”±: ç»“åˆäº†å¤šä¸ªç´ æçš„äº®ç‚¹...          â”‚
â”‚ æ¥æºç­–ç•¥: viral_hit                        â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€           â”‚
â”‚ ğŸ“„ é€‰é¢˜ #2                                 â”‚
â”‚ ...                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 7. æ•°æ®æµè½¬è¿‡ç¨‹

### 7.1 æ•°æ®çš„"ä¸€ç”Ÿ"

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é˜¶æ®µ 1: åŸå§‹æ•°æ®ï¼ˆAPI å“åº”ï¼‰          â”‚
â”‚                                      â”‚
â”‚ YouTube API è¿”å›:                    â”‚
â”‚ {                                    â”‚
â”‚   "snippet": {                       â”‚
â”‚     "title": "Why AI is Hot?",       â”‚
â”‚     "channelId": "UC123..."          â”‚
â”‚   },                                 â”‚
â”‚   "statistics": {                    â”‚
â”‚     "viewCount": "100000"            â”‚
â”‚   }                                  â”‚
â”‚ }                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â†“ é€‚é…å™¨æ ‡å‡†åŒ–
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é˜¶æ®µ 2: æ ‡å‡†åŒ–æ•°æ®ï¼ˆContentItemï¼‰     â”‚
â”‚                                      â”‚
â”‚ ContentItem {                        â”‚
â”‚   platform: "youtube",               â”‚
â”‚   title: "Why AI is Hot?",           â”‚
â”‚   url: "https://...",                â”‚
â”‚   author_name: "Tech Channel",       â”‚
â”‚   view_count: 100000,                â”‚
â”‚   interaction: 5000,                 â”‚
â”‚   raw_data: {...}  # ä¿ç•™åŸå§‹æ•°æ®    â”‚
â”‚ }                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â†“ å…¥åº“ (Executor)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é˜¶æ®µ 3: å€™é€‰æ± ï¼ˆstate.candidatesï¼‰    â”‚
â”‚                                      â”‚
â”‚ [                                    â”‚
â”‚   ContentItem #1,                    â”‚
â”‚   ContentItem #2,                    â”‚
â”‚   ...                                â”‚
â”‚   ContentItem #18                    â”‚
â”‚ ]                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â†“ ç­›é€‰ (Filter)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é˜¶æ®µ 4: ç²¾é€‰æ± ï¼ˆfiltered_candidatesï¼‰ â”‚
â”‚                                      â”‚
â”‚ [                                    â”‚
â”‚   ContentItem #1 (score: 95),        â”‚
â”‚   ContentItem #2 (score: 88),        â”‚
â”‚   ...                                â”‚
â”‚   ContentItem #10 (score: 65)        â”‚
â”‚ ]                                    â”‚
â”‚                                      â”‚
â”‚ + å¢å¼ºå­—æ®µ:                          â”‚
â”‚   - normalized_view: 8.5x            â”‚
â”‚   - engagement_rate: 0.025           â”‚
â”‚   - analysis_note: "èµ›é“é»‘é©¬"        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â†“ ç­–åˆ’ (Architect)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é˜¶æ®µ 5: é€‰é¢˜æ–¹æ¡ˆï¼ˆTopicBriefï¼‰        â”‚
â”‚                                      â”‚
â”‚ TopicBrief {                         â”‚
â”‚   id: "topic_001",                   â”‚
â”‚   title: "DeepSeek V3 æ·±åº¦è¯„æµ‹",     â”‚
â”‚   core_angle: "æ¨ç†èƒ½åŠ›å¯¹æ¯”",        â”‚
â”‚   rationale: "ç»“åˆç´ æ #1, #3...",   â”‚
â”‚   source_type: "viral_hit",          â”‚
â”‚   reference_data: [                  â”‚
â”‚     ContentItem #1,                  â”‚
â”‚     ContentItem #3,                  â”‚
â”‚     ContentItem #7                   â”‚
â”‚   ]                                  â”‚
â”‚ }                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.2 çŠ¶æ€ï¼ˆRadarStateï¼‰çš„æ¼”å˜

**åˆå§‹çŠ¶æ€**ï¼š

```python
RadarState {
    target_domains: ["AI News"],
    topic_targets: {"AI News": 6},
    topic_progress: {"AI News": 0},
    candidates: [],
    filtered_candidates: [],
    proposals: [],
    plan_status: "planning",
    plan_scratchpad: []
}
```

**ç¬¬ 1 è½® Planner å**ï¼š

```python
RadarState {
    ...
    plan_status: "executing",
    plan_scratchpad: [
        {
            "tool_call": {
                "tool_name": "youtube_search",
                "arguments": {"keyword": "AI News 2025-11"},
                "reasoning": "ä¼˜å…ˆæœç´¢ YouTube"
            }
        }
    ]
}
```

**ç¬¬ 1 è½® Executor å**ï¼š

```python
RadarState {
    ...
    candidates: [ContentItem #1, ..., ContentItem #8],  # æ–°å¢ 8 æ¡
    topic_progress: {"AI News": 8},  # è¿›åº¦æ›´æ–°
    pending_monitors: {"youtube": ["UC123..."]},  # å‘ç°æ–°é¢‘é“
    plan_status: "planning",  # å›åˆ°è§„åˆ’
    plan_scratchpad: [
        {
            "tool_call": {...},
            "tool_result": {  # æ–°å¢æ‰§è¡Œç»“æœ
                "status": "success",
                "summary": "Found 8 videos",
                "data": [...]
            }
        }
    ]
}
```

**... å¾ªç¯ 3 è½®å ...**

**Filter å**ï¼š

```python
RadarState {
    ...
    candidates: [18 æ¡],
    filtered_candidates: [10 æ¡],  # æ–°å¢ç²¾é€‰æ± 
    plan_status: "finished"
}
```

**Architect åï¼ˆæœ€ç»ˆçŠ¶æ€ï¼‰**ï¼š

```python
RadarState {
    ...
    proposals: [  # æ–°å¢é€‰é¢˜æ–¹æ¡ˆ
        TopicBrief #1,
        TopicBrief #2,
        TopicBrief #3
    ],
    logs: [
        "ã€é‡‡é›†ã€‘youtube_search â†’ AI News (+8)",
        "ã€é‡‡é›†ã€‘bilibili_search â†’ AI News (+8)",
        "ã€ç­›é€‰ã€‘è¾“å…¥ 18 æ¡ï¼Œè¾“å‡º 10 æ¡",
        "æˆåŠŸç”Ÿæˆ 3 ä¸ªé€‰é¢˜ææ¡ˆ"
    ]
}
```

---

## 8. é…ç½®æ–‡ä»¶è¯´æ˜

### 8.1 config/settings.yaml - ä¸šåŠ¡é…ç½®

```yaml
# ç›®æ ‡é¢†åŸŸï¼ˆç”¨æˆ·å…³æ³¨çš„å†…å®¹ç±»å‹ï¼‰
target_domains:
  - "AI News"                    # AI æ–°é—»
  - "Python Tutorials"           # Python æ•™ç¨‹
  - "Tech Reviews"               # ç§‘æŠ€è¯„æµ‹

# ç™½åå• KOLï¼ˆé¢„è®¾è¦ç›‘æ§çš„åšä¸»ï¼‰
whitelist_kols:
  youtube:
    - "https://www.youtube.com/@channelname"
  bilibili:
    - "123456"  # Bç«™ UP ä¸» ID (mid)

# ç­›é€‰é˜ˆå€¼
thresholds:
  low_fan_limit: 50000           # ä½ç²‰ä¸Šé™ï¼ˆ5ä¸‡ä»¥ä¸‹ç®—"å°åšä¸»"ï¼‰
  min_interaction: 5000          # æœ€å°äº’åŠ¨é‡ï¼ˆç‚¹èµ+è¯„è®ºï¼‰
  viral_coefficient: 0.1         # çˆ†æ¬¾ç³»æ•°ï¼ˆä¿ç•™ï¼Œæš‚æœªä½¿ç”¨ï¼‰

# æ‰§è¡Œé…ç½®
execution:
  max_duration_minutes: 5        # æœ€å¤§è¿è¡Œæ—¶é—´ï¼ˆé˜²æ­¢æ­»å¾ªç¯ï¼‰
  monitor_interval_hours: 6      # ç›‘æ§é—´éš”ï¼ˆå®šæ—¶ä»»åŠ¡ç”¨ï¼‰
```

**å¦‚ä½•ä¿®æ”¹ï¼Ÿ**

1. ä¿®æ”¹ç›®æ ‡é¢†åŸŸï¼š
   ```yaml
   target_domains:
     - "React æ•™ç¨‹"
     - "ç‹¬ç«‹å¼€å‘"
   ```

2. æ·»åŠ ç™½åå• KOLï¼š
   ```yaml
   whitelist_kols:
     youtube:
       - "https://www.youtube.com/@fireship"
     bilibili:
       - "1577804"  # ææ°¸ä¹è€å¸ˆ
   ```

### 8.2 config/models.yaml - AI æ¨¡å‹é…ç½®

```yaml
models:
  # æ¨ç†èƒ½åŠ›ï¼ˆè§„åˆ’ç”¨ï¼‰
  reasoning:
    model_id: "moonshotai/kimi-k2-thinking"  # Kimi K2
    temperature: 0.6      # åˆ›é€ æ€§ï¼ˆ0=ä¸¥è°¨ï¼Œ1=å‘æ•£ï¼‰
    max_tokens: 8000      # æœ€å¤§è¾“å‡ºé•¿åº¦
    timeout: 180          # è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰

  # åˆ›ä½œèƒ½åŠ›ï¼ˆç­–åˆ’ç”¨ï¼‰
  creative:
    model_id: "moonshotai/kimi-k2-thinking"
    temperature: 0.5
    max_tokens: 16000     # é•¿æ–‡æœ¬è¾“å‡º
    timeout: 180

  # å¿«é€Ÿå¤„ç†ï¼ˆæ•°æ®æ¸…æ´—ç”¨ï¼‰
  fast:
    model_id: "deepseek/deepseek-chat"  # DeepSeek V3
    temperature: 0.0      # å®Œå…¨ç¡®å®šæ€§
    max_tokens: 2000
    timeout: 30

# OpenRouter é…ç½®
openrouter:
  site_url: "https://github.com/your-repo/topic-radar"
  site_name: "Topic Radar Agent"
```

**ä¸ºä»€ä¹ˆé€‰ Kimi K2ï¼Ÿ**

- 256k ä¸Šä¸‹æ–‡ï¼šèƒ½è¯»å®Œæ‰€æœ‰ç´ æ
- æ·±åº¦æ¨ç†ï¼šé€‚åˆè§„åˆ’å’Œç­–åˆ’
- æˆæœ¬é€‚ä¸­ï¼šæ¯” GPT-4 ä¾¿å®œ

**ä¸ºä»€ä¹ˆé€‰ DeepSeek V3ï¼Ÿ**

- é€Ÿåº¦å¿«ï¼šé€‚åˆæ•°æ®å¤„ç†
- æˆæœ¬ä½ï¼š$0.27/M tokens
- è´¨é‡å¥½ï¼šæ¥è¿‘ GPT-4 æ°´å¹³

### 8.3 config/prompts.yaml - æç¤ºè¯é…ç½®

```yaml
discovery_agent:
  role: "é¦–å¸­æƒ…æŠ¥å®˜"
  goal: "æ·±å…¥åˆ†æç›®æ ‡é¢†åŸŸï¼Œæ‹†è§£å‡ºå…·æœ‰çˆ†æ¬¾æ½œåŠ›çš„ç»†åˆ†èµ›é“"
  methodology: |
    1. æ‹’ç»å¹³åº¸ï¼šä¸è¦"AI News"è¿™ç§æ³›è¯ï¼Œè¦"DeepSeekæœ¬åœ°éƒ¨ç½²æ•™ç¨‹"
    2. å…³æ³¨æƒ…ç»ªï¼šæœç´¢è¯è¦åŒ…å«æƒ…ç»ªï¼ˆ"åæ‚”"ã€"å¤ªæ…¢"ã€"è¢«å‘"ï¼‰
    3. æ‹¥æŠ±å˜åŒ–ï¼šå…³æ³¨ 2025 å¹´ Q4 æœ€æ–°åŠ¨æ€

  system_template: |
    ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„{role}ã€‚ä½ çš„ç›®æ ‡æ˜¯{goal}ã€‚

    ã€ä½ çš„æ€è€ƒæ³•åˆ™ã€‘
    {methodology}

    è¯·æ ¹æ®ç”¨æˆ·çš„æŒ‡ä»¤ï¼Œè¾“å‡ºç²¾å‡†çš„ JSON æœç´¢è®¡åˆ’ã€‚

architect_agent:
  role: "çˆ†æ¬¾é€‰é¢˜æ¶æ„å¸ˆ"
  goal: "ç­–åˆ’å‡º 3 ä¸ªæå…·å¸å¼•åŠ›çš„è§†é¢‘é€‰é¢˜æ–¹æ¡ˆ"
  methodology: |
    1. æ ‡é¢˜å…šï¼ˆæ­£å‘ï¼‰ï¼šæ ‡é¢˜å¿…é¡»åœ¨ 3 ç§’å†…æŠ“ä½çœ¼çƒ
    2. æ•°æ®é©±åŠ¨ï¼šæ¯ä¸ªé€‰é¢˜éƒ½åŸºäºé«˜çƒ­åº¦æ•°æ®
    3. å·®å¼‚åŒ–ï¼šæä¾›æ–°çš„åˆ‡å…¥ç‚¹ï¼Œä¸èƒ½å®Œå…¨ç…§æ¬

  system_template: |
    ä½ æ˜¯ä¸€ä¸ªé¡¶çº§çš„{role}ã€‚ä½ çš„ç›®æ ‡æ˜¯{goal}ã€‚

    ã€ä½ çš„é€‰é¢˜æ ‡å‡†ã€‘
    {methodology}

    ã€é‡è¦ã€‘
    ä½ çš„æ‰€æœ‰è¾“å‡ºå¿…é¡»å®Œå…¨ä½¿ç”¨ä¸­æ–‡ã€‚
    è¾“å‡ºæ ¼å¼å¿…é¡»æ˜¯ä¸¥æ ¼çš„ JSONã€‚
```

**å¦‚ä½•è°ƒæ•´æç¤ºè¯ï¼Ÿ**

ä¿®æ”¹ `methodology` éƒ¨åˆ†ï¼Œæ¯”å¦‚ï¼š

```yaml
architect_agent:
  methodology: |
    1. äº‰è®®æ€§ï¼šé€‰é¢˜è¦æœ‰äº‰è®®ç‚¹ï¼Œå¼•å‘è®¨è®º
    2. æ•°æ®æ”¯æ’‘ï¼šå¿…é¡»å¼•ç”¨å…·ä½“æ•°æ®
    3. å®ç”¨ä»·å€¼ï¼šè§‚ä¼—çœ‹å®Œèƒ½å­¦åˆ°ä¸œè¥¿
```

### 8.4 config/tools.yaml - å·¥å…·æ³¨å†Œè¡¨

```yaml
tools:
  # YouTube æœç´¢
  youtube_search:
    adapter_class: "tools.adapters.youtube_adapter.YouTubeAdapter"
    adapter_method: "search_videos"
    input_model: "YouTubeSearchInput"
    description: "æœç´¢ YouTube è§†é¢‘ï¼Œæ”¯æŒå…³é”®è¯å’Œæ—¶é—´èŒƒå›´"
    capabilities: ["search", "video", "youtube"]

  # YouTube ç›‘æ§
  youtube_monitor:
    adapter_class: "tools.adapters.youtube_adapter.YouTubeAdapter"
    adapter_method: "monitor_channel"
    input_model: "YouTubeMonitorInput"
    description: "ç›‘æ§ YouTube é¢‘é“çš„æœ€æ–°è§†é¢‘"
    capabilities: ["monitor", "youtube"]

  # Bç«™ æœç´¢
  bilibili_search:
    adapter_class: "tools.adapters.bilibili_adapter.BilibiliAdapter"
    adapter_method: "search_videos"
    input_model: "BilibiliSearchInput"
    description: "æœç´¢ Bç«™è§†é¢‘"
    capabilities: ["search", "video", "bilibili"]

  # Bç«™ ç›‘æ§
  bilibili_monitor:
    adapter_class: "tools.adapters.bilibili_adapter.BilibiliAdapter"
    adapter_method: "monitor_user"
    input_model: "BilibiliMonitorInput"
    description: "ç›‘æ§ Bç«™ UP ä¸»æŠ•ç¨¿"
    capabilities: ["monitor", "bilibili"]

  # é€šç”¨ç½‘é¡µæœç´¢
  web_search:
    adapter_class: "tools.adapters.search_adapter.SearchAdapter"
    adapter_method: "search"
    input_model: "SearchInput"
    description: "ä½¿ç”¨ Tavily æˆ– Firecrawl è¿›è¡Œç½‘é¡µæœç´¢"
    capabilities: ["search", "web"]
```

**å¦‚ä½•æ·»åŠ æ–°å·¥å…·ï¼Ÿ**

1. åˆ›å»ºé€‚é…å™¨ï¼š
   ```python
   # tools/adapters/reddit_adapter.py
   class RedditAdapter:
       def search_posts(self, params):
           # ... å®ç°æœç´¢é€»è¾‘
           return ToolResult(...)
   ```

2. æ³¨å†Œåˆ° tools.yamlï¼š
   ```yaml
   reddit_search:
     adapter_class: "tools.adapters.reddit_adapter.RedditAdapter"
     adapter_method: "search_posts"
     input_model: "RedditSearchInput"
     description: "æœç´¢ Reddit å¸–å­"
     capabilities: ["search", "reddit"]
   ```

3. Planner è‡ªåŠ¨è¯†åˆ«å¹¶ä½¿ç”¨ï¼

---

## 9. å…³é”®æŠ€æœ¯ç‚¹

### 9.1 ReAct æ¨¡å¼çš„å®ç°

**ä¼ ç»Ÿ Prompt**ï¼š
```
ç”¨æˆ·ï¼šå¸®æˆ‘æ‰¾ AI æ–°é—»
AIï¼šå¥½çš„ï¼Œè¿™é‡Œæœ‰ 3 æ¡æ–°é—»...
```

**ReAct Prompt**ï¼š
```
ç³»ç»Ÿï¼šä½ æ˜¯ä¸€ä¸ªæ™ºèƒ½ä½“ï¼Œå¯ä»¥è°ƒç”¨å·¥å…·ã€‚è¯·è¾“å‡º JSON æ ¼å¼çš„è¡ŒåŠ¨è®¡åˆ’ã€‚

ç”¨æˆ·ï¼š
ç›®æ ‡: æ”¶é›† AI æ–°é—»
å½“å‰å·²æ”¶é›†: 0 æ¡
ç›®æ ‡: 18 æ¡

å¯ç”¨å·¥å…·:
- youtube_search
- bilibili_search
- web_search

è¯·è§„åˆ’ä¸‹ä¸€æ­¥è¡ŒåŠ¨ã€‚

AI è¾“å‡º:
{
  "thought": "éœ€è¦å…ˆä» YouTube æœç´¢è‹±æ–‡å†…å®¹",
  "action": {
    "tool_name": "youtube_search",
    "arguments": {"keyword": "AI News 2025-11"},
    "reasoning": "YouTube æ˜¯ä¸»è¦å¹³å°"
  },
  "is_finished": false
}
```

**æ ¸å¿ƒè¦ç´ **ï¼š
1. å·¥å…·åˆ—è¡¨ï¼ˆè®© AI çŸ¥é“å¯ä»¥åšä»€ä¹ˆï¼‰
2. å½“å‰çŠ¶æ€ï¼ˆè®© AI çŸ¥é“è¿›åº¦ï¼‰
3. æ‰§è¡Œå†å²ï¼ˆé¿å…é‡å¤ï¼‰
4. ç»“æ„åŒ–è¾“å‡ºï¼ˆç¡®ä¿æ ¼å¼æ­£ç¡®ï¼‰

### 9.2 ç»“æ„åŒ–è¾“å‡ºï¼ˆInstructorï¼‰

**é—®é¢˜**ï¼šLLM è¾“å‡ºä¸ç¨³å®š

```python
# æœŸæœ›è¾“å‡º
{"title": "æ ‡é¢˜", "score": 85}

# å®é™…è¾“å‡ºï¼ˆå„ç§å¥‡è‘©æ ¼å¼ï¼‰
"æ ‡é¢˜æ˜¯ xxxï¼Œåˆ†æ•° 85"
"```json\n{\"title\": \"...\"}\n```"
{"title": "...", "score": "85åˆ†"}  # score æ˜¯å­—ç¬¦ä¸²ï¼
```

**è§£å†³æ–¹æ¡ˆ**ï¼šInstructor åº“

```python
from instructor import from_openai
from pydantic import BaseModel

class Output(BaseModel):
    title: str
    score: int  # å¼ºåˆ¶ç±»å‹

client = from_openai(openai_client)

# è‡ªåŠ¨é‡è¯•ç›´åˆ°æ ¼å¼æ­£ç¡®
result = client.chat.completions.create(
    model="...",
    response_model=Output,  # é­”æ³•åœ¨è¿™é‡Œ
    messages=[...]
)

print(result.title)  # âœ… ä¿è¯æ˜¯ str
print(result.score)  # âœ… ä¿è¯æ˜¯ int
```

### 9.3 è·¨å¹³å°æ•°æ®å½’ä¸€åŒ–

**é—®é¢˜**ï¼šä¸åŒå¹³å°çš„æ’­æ”¾é‡ä¸èƒ½ç›´æ¥æ¯”è¾ƒ

| å¹³å° | 1ä¸‡æ’­æ”¾ | 10ä¸‡æ’­æ”¾ |
|------|---------|----------|
| YouTube | å°è§†é¢‘ | ä¸­ç­‰è§†é¢‘ |
| Bç«™ | ä¸é”™çš„è§†é¢‘ | å¤§çˆ†æ¬¾ |
| æŠ–éŸ³ | æ‰‘è¡—äº† | å°çˆ†æ¬¾ |

**è§£å†³æ–¹æ¡ˆ**ï¼šå½’ä¸€åŒ–

```python
# 1. è®¡ç®—æ¯ä¸ªå¹³å°çš„åŸºå‡†çº¿ï¼ˆä¸­ä½æ•°ï¼‰
platform_median = {
    "youtube": 10000,
    "bilibili": 1000,
    "douyin": 50000
}

# 2. å½’ä¸€åŒ–
normalized_view = view_count / platform_median[platform]

# 3. ç°åœ¨å¯ä»¥è·¨å¹³å°æ¯”è¾ƒäº†ï¼
# YouTube 8ä¸‡æ’­æ”¾ / 1ä¸‡ = 8.0x
# Bç«™ 8000æ’­æ”¾ / 1000 = 8.0x
# â†’ ä¸¤è€…æ°´å¹³ç›¸å½“
```

### 9.4 å¼‚å¸¸æ£€æµ‹ï¼ˆZ-Scoreï¼‰

**ç®€å•é˜ˆå€¼çš„é—®é¢˜**ï¼š

```python
# ç®€å•è§„åˆ™ï¼šæ’­æ”¾é‡ > 10ä¸‡ å°±æ˜¯çˆ†æ¬¾
if view_count > 100000:
    âœ… é€šè¿‡

# é—®é¢˜ï¼š
# - å¤§åšä¸»å¹³æ—¶å°± 50ä¸‡æ’­æ”¾ï¼Œ10ä¸‡ åè€Œæ˜¯æ‰‘è¡—äº†
# - å°åšä¸» 5000 æ’­æ”¾å¯èƒ½å·²ç»æ˜¯è¶…å¸¸å‘æŒ¥
```

**Z-Score å¼‚å¸¸æ£€æµ‹**ï¼š

```python
# è®¡ç®—åšä¸»çš„å†å²å¹³å‡å€¼å’Œæ ‡å‡†å·®
author_avg = 10000
author_std = 2000

# å½“å‰è§†é¢‘æ’­æ”¾é‡
view_count = 15000

# Z-Score = (å½“å‰å€¼ - å¹³å‡å€¼) / æ ‡å‡†å·®
z_score = (15000 - 10000) / 2000 = 2.5

# å¦‚æœ z_score > 2 (è¶…è¿‡å¹³å‡å€¼ 2 ä¸ªæ ‡å‡†å·®)
# â†’ è¿™æ˜¯å¼‚å¸¸å€¼ï¼ˆè¶…å¸¸å‘æŒ¥ï¼‰
```

**é¡¹ç›®ä¸­çš„ç®€åŒ–ç‰ˆæœ¬**ï¼š

```python
# åšä¸»å¹³å‡æ’­æ”¾é‡
author_avg_views = 10000

# å½“å‰è§†é¢‘æ’­æ”¾é‡
view_count = 15000

# æ¯”ä¾‹
ratio = view_count / author_avg_views = 1.5

# å¦‚æœ ratio > 1.2 (æ¯”å¹³æ—¶å¥½ 20%)
if ratio > 1.2:
    âœ… é€šè¿‡ï¼è¿™æ˜¯è¶…å¸¸å‘æŒ¥
```

### 9.5 åŠ¨æ€å·¥å…·åŠ è½½

**ä¼ ç»Ÿæ–¹å¼**ï¼ˆç¡¬ç¼–ç ï¼‰ï¼š

```python
# æ¯æ¬¡æ·»åŠ å·¥å…·éƒ½è¦æ”¹ä»£ç 
def call_tool(name, args):
    if name == "youtube_search":
        return youtube_adapter.search(args)
    elif name == "bilibili_search":
        return bilibili_adapter.search(args)
    # ... æ·»åŠ æ–°å·¥å…·è¦åœ¨è¿™é‡ŒåŠ  elif
```

**åŠ¨æ€åŠ è½½**ï¼ˆé…ç½®é©±åŠ¨ï¼‰ï¼š

```python
# 1. tools.yaml é…ç½®
youtube_search:
  adapter_class: "tools.adapters.youtube_adapter.YouTubeAdapter"
  adapter_method: "search_videos"

# 2. åŠ¨æ€å¯¼å…¥
import importlib

module_path, class_name = "tools.adapters.youtube_adapter", "YouTubeAdapter"
module = importlib.import_module(module_path)
adapter_class = getattr(module, class_name)
adapter = adapter_class()

# 3. è°ƒç”¨
method = getattr(adapter, "search_videos")
result = method(args)

# æ·»åŠ æ–°å·¥å…·åªéœ€ä¿®æ”¹ YAMLï¼Œæ— éœ€æ”¹ä»£ç ï¼
```

---

## 10. ä½¿ç”¨æŒ‡å—

### 10.1 å®‰è£…ä¾èµ–

```bash
# 1. å…‹éš†é¡¹ç›®
git clone <your-repo>
cd multi-agent-create

# 2. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼ˆæ¨èï¼‰
python -m venv venv
source venv/bin/activate  # Linux/Mac
# æˆ–
venv\Scripts\activate  # Windows

# 3. å®‰è£…ä¾èµ–
pip install -r requirements.txt
```

### 10.2 é…ç½®ç¯å¢ƒå˜é‡

```bash
# å¤åˆ¶ç¤ºä¾‹æ–‡ä»¶
cp env.example .env

# ç¼–è¾‘ .env
nano .env
```

**å¿…éœ€é…ç½®**ï¼š

```bash
# LLM APIï¼ˆå¿…é¡»ï¼‰
LLM_API_KEY=sk-or-v1-xxxxx  # OpenRouter API Key
LLM_BASE_URL=https://openrouter.ai/api/v1

# æœç´¢å·¥å…·ï¼ˆè‡³å°‘é…ç½®ä¸€ä¸ªï¼‰
TAVILY_API_KEY=tvly-xxxxx  # Tavily æœç´¢ï¼ˆæ¨èï¼‰
FIRECRAWL_API_KEY=fc-xxxxx  # Firecrawlï¼ˆå¤‡ç”¨ï¼‰
```

**å¯é€‰é…ç½®**ï¼š

```bash
# Twitter/Xï¼ˆå¦‚æœéœ€è¦ï¼‰
X_USERNAME=your_username
X_EMAIL=your_email
X_PASSWORD=your_password

# æµè§ˆå™¨æ¨¡å¼
HEADLESS_BROWSER=true  # æ— å¤´æ¨¡å¼ï¼ˆæœåŠ¡å™¨ç”¨ï¼‰
```

### 10.3 è¿è¡Œç¨‹åº

```bash
python main.py
```

**äº¤äº’å¼æµç¨‹**ï¼š

```
ğŸ¤– é€‰é¢˜é›·è¾¾å·²å°±ç»ª (Topic Radar Ready)
----------------------------------------
å½“å‰é…ç½®é¢†åŸŸ: ['AI News', 'Python Tutorials']

æŒ‰ Enter ä¿®æ”¹ä»Šæ—¥ç›®æ ‡ï¼Œæˆ–ç­‰å¾… 3ç§’ è‡ªåŠ¨æ‰§è¡Œ...
æ˜¯å¦éœ€è¦è°ƒæ•´ä»Šæ—¥ç›®æ ‡? (y/N): y

[1/2] è¯·è¾“å…¥ä»Šæ—¥å…³æ³¨çš„é¢†åŸŸ/å…³é”®è¯ (é€—å·åˆ†éš”):
é»˜è®¤ [AI News,Python Tutorials]: AIæ–°é—»,DeepSeekæ•™ç¨‹

æœ¬è½®ä¼˜å…ˆå…³æ³¨å“ªäº›ä¸»é¢˜? (é€—å·åˆ†éš”, å›è½¦è·³è¿‡):
ä¼˜å…ˆé‡‡é›†çš„å¹³å°? (ä»…æ”¯æŒ youtube,bilibili): youtube,bilibili
æ˜¯å¦æœ‰ç‰¹åˆ«æƒ³è·Ÿçš„ä½œè€…/é¢‘é“? (é€—å·åˆ†éš”): ææ°¸ä¹
æœ¬è½®æƒ³é‡ç‚¹è§‚å¯Ÿå“ªäº›æŒ‡æ ‡? (å¦‚ æ’­æ”¾é‡,äº’åŠ¨ç‡): æ’­æ”¾é‡,äº’åŠ¨ç‡

ä¸ºä¸»é¢˜è®¾ç½®é‡‡é›†ç›®æ ‡ (æ ¼å¼ ä¸»é¢˜:æ•°é‡): AIæ–°é—»:8,DeepSeekæ•™ç¨‹:10

--- æ­£åœ¨åˆå§‹åŒ–æ™ºèƒ½ä½“ç½‘ç»œ ---

[æœ¬è½®å…³æ³¨é‡ç‚¹]
- ä¸»é¢˜: ['AIæ–°é—»', 'DeepSeekæ•™ç¨‹']
- å¹³å°: ['youtube', 'bilibili']
- ä½œè€…: ['ææ°¸ä¹']
- è§‚å¯ŸæŒ‡æ ‡: ['æ’­æ”¾é‡', 'äº’åŠ¨ç‡']
- ä¸»é¢˜ç›®æ ‡: {'AIæ–°é—»': 8, 'DeepSeekæ•™ç¨‹': 10}

--- èŠ‚ç‚¹: è§„åˆ’å¤§è„‘ (Node: Planner) ---
ğŸ§  æ€è€ƒ: éœ€è¦å…ˆä» YouTube æœç´¢è‹±æ–‡å†…å®¹...
ğŸ‘‰ å†³ç­–: è°ƒç”¨ youtube_search

--- èŠ‚ç‚¹: æ‰§è¡Œä¹‹æ‰‹ (Node: Executor) ---
ğŸ”¨ æ‰§è¡Œ: youtube_search...
âœ… ç»“æœ: Found 8 videos
ğŸ“¥ å…¥åº“: 8 æ¡æ•°æ®

...ï¼ˆå¾ªç¯æ‰§è¡Œï¼‰

--- èŠ‚ç‚¹: æ™ºèƒ½ç­›é€‰ (Node: Filter) ---
ğŸ“Š çŒæ€æ± æ’­æ”¾ä¸­ä½æ•°: 5000
ğŸ§¹ æ™ºèƒ½ç­›é€‰å®Œæˆ: ä» 18 æ¡ä¸­ç²¾é€‰ 10 æ¡å¼‚å¸¸ä¼˜è´¨å†…å®¹ã€‚

--- èŠ‚ç‚¹: é€‰é¢˜ç­–åˆ’ (Node: Architect) ---
ğŸ§  æ­£åœ¨é˜…è¯»å¹¶ç­–åˆ’é€‰é¢˜...

=== âœ… æ‰§è¡Œå®Œæˆ ===

[ç²¾é€‰é€‰é¢˜ç®€æŠ¥]

ğŸ“„ é€‰é¢˜ #1
æ ‡é¢˜: DeepSeek V3 æ·±åº¦è¯„æµ‹ï¼šæ¨ç†èƒ½åŠ›è¶…è¶Š GPT-4ï¼Ÿ
åˆ‡å…¥ç‚¹: ä»æ¨ç†èƒ½åŠ›å¯¹æ¯”è§’åº¦ï¼Œç»“åˆå®é™…æµ‹è¯•æ¡ˆä¾‹
æ¨èç†ç”±: ç»“åˆäº†å¤šä¸ªé«˜æ’­æ”¾ç´ æçš„äº®ç‚¹ï¼Œå…³æ³¨åº¦é«˜
æ¥æºç­–ç•¥: viral_hit
----------------------------------------
...
```

### 10.4 å¸¸è§é—®é¢˜

**Q1: æŠ¥é”™ "LLM_API_KEY not set"**

A: æ£€æŸ¥ `.env` æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œæ˜¯å¦æ­£ç¡®é…ç½®äº† API Keyã€‚

**Q2: YouTube æœç´¢å¤±è´¥**

A: å¯èƒ½æ˜¯ yt-dlp è¢«é™æµï¼Œè§£å†³æ–¹æ¡ˆï¼š
- é…ç½®ä»£ç†ï¼ˆæ¨èï¼‰
- é™ä½æœç´¢é¢‘ç‡
- ä½¿ç”¨ Tavily æœç´¢ä½œä¸ºå¤‡ç”¨

**Q3: ç­›é€‰åæ²¡æœ‰ç»“æœ**

A: é™ä½é˜ˆå€¼ï¼š
```yaml
# config/settings.yaml
thresholds:
  low_fan_limit: 10000  # é™ä½ç²‰ä¸ä¸Šé™
  min_interaction: 1000  # é™ä½äº’åŠ¨é‡è¦æ±‚
```

**Q4: ç­–åˆ’çš„é€‰é¢˜è´¨é‡ä¸é«˜**

A: ä¼˜åŒ–æç¤ºè¯ï¼š
```yaml
# config/prompts.yaml
architect_agent:
  methodology: |
    1. æ ‡é¢˜è¦å…·ä½“ï¼Œé¿å…æ³›æ³›è€Œè°ˆ
    2. å¿…é¡»å¼•ç”¨è‡³å°‘ 3 ä¸ªç´ æ
    3. æä¾›å¯æ‰§è¡Œçš„è„šæœ¬å¤§çº²
```

---

## æ€»ç»“

è¿™ä¸ªé¡¹ç›®æ˜¯ä¸€ä¸ª**å®Œæ•´çš„ AI å¤šæ™ºèƒ½ä½“ç³»ç»Ÿ**ï¼Œæ ¸å¿ƒåˆ›æ–°ç‚¹ï¼š

1. **ReAct è‡ªä¸»è§„åˆ’**ï¼šä¸æ˜¯ç¡¬ç¼–ç æµç¨‹ï¼Œè€Œæ˜¯ LLM è‡ªä¸»å†³ç­–
2. **å¤šæ¨¡å‹ç¼–æ’**ï¼šæ¨ç†ã€åˆ›ä½œã€å¿«é€Ÿå¤„ç†å„å¸å…¶èŒ
3. **ç»Ÿè®¡å­¦ç­›é€‰**ï¼šä¸æ˜¯ç®€å•é˜ˆå€¼ï¼Œè€Œæ˜¯å¼‚å¸¸æ£€æµ‹
4. **ç»“æ„åŒ–è¾“å‡º**ï¼šå¼ºåˆ¶ AI è¾“å‡ºç¬¦åˆæ ¼å¼
5. **é•¿ä¸Šä¸‹æ–‡åˆ©ç”¨**ï¼š256k ä¸Šä¸‹æ–‡è¯»å®Œæ‰€æœ‰ç´ æ

**æŠ€æœ¯æ ˆæ€»ç»“**ï¼š

| å±‚çº§ | æŠ€æœ¯ |
|------|------|
| ç¼–æ’ | LangGraph |
| LLM | Kimi K2, DeepSeek V3 |
| ç»“æ„åŒ–è¾“å‡º | Instructor + Pydantic |
| æ•°æ®é‡‡é›† | yt-dlp, bilibili-api-python |
| é…ç½®ç®¡ç† | YAML + .env |
| é‡è¯•æœºåˆ¶ | tenacity |

**é€‚ç”¨åœºæ™¯**ï¼š

- å†…å®¹åˆ›ä½œè€…æ‰¾é€‰é¢˜
- åª’ä½“å…¬å¸åšé€‰é¢˜ç­–åˆ’
- ç ”ç©¶äººå‘˜åšè¶‹åŠ¿åˆ†æ
- ä»»ä½•éœ€è¦"è‡ªåŠ¨å‘ç°çƒ­é—¨å†…å®¹"çš„åœºæ™¯

**æ‰©å±•æ–¹å‘**ï¼š

- æ·»åŠ æ›´å¤šå¹³å°ï¼ˆReddit, Twitter, å°çº¢ä¹¦ï¼‰
- å¢åŠ å¼‚æ­¥å¹¶å‘ï¼ˆæå‡é€Ÿåº¦ï¼‰
- æ·»åŠ æŒä¹…åŒ–å­˜å‚¨ï¼ˆæ•°æ®åº“ï¼‰
- å¼€å‘ Web UIï¼ˆæ›´å‹å¥½ï¼‰
- æ·»åŠ å®šæ—¶ä»»åŠ¡ï¼ˆè‡ªåŠ¨ç›‘æ§ï¼‰

---

å¸Œæœ›è¿™ä»½æ–‡æ¡£èƒ½å¸®åŠ©ä½ **å®Œå…¨ç†è§£**è¿™ä¸ªé¡¹ç›®çš„æ¯ä¸€ä¸ªç»†èŠ‚ï¼ ğŸ‰
