# æœç´¢æ¼‚ç§»ä¿®å¤ - å®Œæ•´å®æ–½æŠ¥å‘Š

**æ—¥æœŸ**: 2025-11-28
**é—®é¢˜**: æœç´¢æ¼‚ç§» (Search Drift) - ç”¨æˆ·æŸ¥è¯¢"Manus"ï¼Œç»“æœè¿”å›"äºšé©¬é€Š"
**çŠ¶æ€**: âœ… å…¨éƒ¨å®Œæˆ (P0-P3)

---

## ğŸ“‹ é—®é¢˜æ€»ç»“

### ç¾éš¾é“¾æ¡è¿˜åŸ

**ç”¨æˆ·è¾“å…¥**: `AIå…¬å¸manusä¸ºä»€ä¹ˆæˆåŠŸï¼Ÿ`

1. **å…³é”®è¯è®¾è®¡** âœ… åŸºæœ¬æ­£ç¡®
   â†’ ç”Ÿæˆ: `why Manus AI succeeded 2025`

2. **YouTubeæœç´¢** âŒ å¼€å§‹æ¼‚ç§»
   â†’ æœç´¢å¼•æ“æ‰¾ä¸åˆ°"Manus"ç²¾å‡†åŒ¹é…
   â†’ ç®—æ³•è‡ªåŠ¨é™çº§: å¿½ç•¥"Manus"ï¼ŒåªåŒ¹é…"AI" + "succeeded"
   â†’ ç»“æœ: æ³›AIå·¥å…·ã€æ„å¤§åˆ©AIè¿åŠ¨å‘˜ã€äººå½¢æœºå™¨äºº...
   â†’ ç¬¬10ä¸ªæ‰ç›¸å…³: "7 MIND BLOWING Use Cases For Manus AI"

3. **Bilibiliæœç´¢** âŒ ä¸¥é‡æ¼‚ç§»
   â†’ æœç´¢: `Manus AIæˆåŠŸç§˜è¯€æ·±åº¦è§£æ æœ€æ–°`
   â†’ Bç«™æŠŠ"Manus"å½“å™ªå£°ï¼Œä¼˜å…ˆåŒ¹é…"AIæˆåŠŸæ¡ˆä¾‹"
   â†’ ç»“æœ: "å½“AIå¾—çŸ¥è‡ªå·±æ˜¯AI"ã€"äºšé©¬é€ŠAIå¸ƒå±€"...
   â†’ ç¬¬4ä¸ªæ‰æåˆ°: "å“ªä¸ªAIåšPPTæœ€å¼ºï¼ŸSkywork/Manu..."

4. **Architectè¢«è¿«åˆ›é€ ** âŒâŒâŒ
   â†’ æ‰‹é‡Œåªæœ‰æ³›AIç´ æ
   â†’ é€‰æ’­æ”¾é‡æœ€é«˜çš„"äºšé©¬é€ŠAIå¸ƒå±€"ç”Ÿæˆé€‰é¢˜
   â†’ **ç”¨æˆ·ç‚¹äº†"çº¢çƒ§è‚‰"ï¼Œç³»ç»Ÿç«¯ä¸Š"åœŸè±†ä¸"**

---

## ğŸ¯ æ ¹æœ¬åŸå› 

| é—®é¢˜ | å…·ä½“è¡¨ç° | æ ¹æº |
|------|----------|------|
| **æœç´¢å¼•æ“çš„"å–„æ„é™çº§"** | YouTube/Bç«™è®¤ä¸º"Manus"æ˜¯æ‹¼å†™é”™è¯¯æˆ–å°ä¼—è¯ | ç®—æ³•ä¼˜åŒ–ï¼šé™çº§ â†’ æ³›åŒ– â†’ è¿”å›ç»“æœ |
| **å…³é”®è¯è¿‡äºä¹¦é¢åŒ–** | `why Manus AI succeeded` åƒå­¦æœ¯è®ºæ–‡æ ‡é¢˜ | ä¸ç¬¦åˆç”¨æˆ·å®é™…æœç´¢ä¹ æƒ¯ |
| **ç¼ºå°‘è´¨é‡éªŒè¯** | æœç´¢ â†’ æ‹¿ç»“æœ â†’ ç›´æ¥ç”¨ | æ— ç›¸å…³æ€§æ£€æŸ¥ |
| **Architectåˆ›é€ æ€§è¿‡å‰©** | ç´ æä¸ç›¸å…³ä»ç”Ÿæˆé€‰é¢˜ | æ— è´¨é‡é—¨æ§› |

---

## ğŸ› ï¸ è§£å†³æ–¹æ¡ˆ (å·²å®æ–½)

### P0: Architect è´¨é‡é—¨æ§› âœ…

**æ–‡ä»¶**: `nodes/architect.py`
**å®æ–½æ—¶é—´**: 30åˆ†é’Ÿ
**ç›®æ ‡**: æ‹’ç»ç”Ÿæˆä¸ç›¸å…³é€‰é¢˜ï¼Œé˜²æ­¢"ç‚¹çº¢çƒ§è‚‰ä¸ŠåœŸè±†ä¸"

#### æ ¸å¿ƒé€»è¾‘

```python
def run_architect(state: RadarState) -> Dict[str, Any]:
    # ğŸ”‘ è´¨é‡æ£€æŸ¥: è®¡ç®—ç´ æä¸ç”¨æˆ·æŸ¥è¯¢çš„ç›¸å…³æ€§
    if state.target_domains:
        user_query = state.target_domains[0]
        candidate_titles = [item.title for item in state.filtered_candidates]

        relevance_score, matched_keywords = _calculate_relevance_score(
            user_query, candidate_titles
        )

        print(f"ğŸ“Š ç´ æç›¸å…³æ€§åˆ†æ:")
        print(f"   ç”¨æˆ·æŸ¥è¯¢: {user_query}")
        print(f"   ç›¸å…³æ€§åˆ†æ•°: {relevance_score:.2%}")
        print(f"   åŒ¹é…å…³é”®è¯: {matched_keywords}")

        # é˜ˆå€¼: ç›¸å…³æ€§ < 30% åˆ™æ‹’ç»ç”Ÿæˆ
        if relevance_score < 0.30:
            actual_topics = _extract_topic_keywords(state.filtered_candidates)

            print(f"""
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  âš ï¸  ç´ æè´¨é‡è­¦å‘Š: æœç´¢ç»“æœä¸æŸ¥è¯¢ä¸åŒ¹é…                        â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ¯ æ‚¨çš„æŸ¥è¯¢: {user_query}
ğŸ“Š ç´ æç›¸å…³æ€§: {relevance_score:.1%} (é˜ˆå€¼: 30%)

ğŸ” æœç´¢åˆ°çš„å†…å®¹ä¸»è¦è®¨è®º: {', '.join(actual_topics[:5])}

ğŸ’¡ å»ºè®®:
   1. å°è¯•æ›´ç®€æ´çš„å…³é”®è¯
   2. æ£€æŸ¥æ‹¼å†™æ˜¯å¦æ­£ç¡®
   3. è¯¥ä¸»é¢˜å¯èƒ½æ•°æ®ä¸è¶³ï¼ˆæ–°å…¬å¸/å°ä¼—äº§å“ï¼‰

âŒ å·²é˜»æ­¢ç”Ÿæˆä¸ç›¸å…³é€‰é¢˜
""")

            return {"proposals": [], "logs": [...]}  # è¿”å›ç©ºåˆ—è¡¨
```

#### ç›¸å…³æ€§è®¡ç®—

```python
def _calculate_relevance_score(user_query: str, titles: List[str]) -> Tuple[float, List[str]]:
    # æå–æ ¸å¿ƒå®ä½“ (å»åœç”¨è¯)
    core_entities = ['manus', 'ai', 'å…¬å¸', 'æˆåŠŸ']

    # è®¡ç®—æ¯ä¸ªæ ‡é¢˜çš„åŒ¹é…åº¦
    for title in titles:
        # ç²¾ç¡®åŒ¹é… + æ¨¡ç³ŠåŒ¹é… (SequenceMatcher)
        if 'manus' in title.lower():
            score += 1.0
        elif similarity('manus', word) > 0.8:
            score += 0.8

    avg_score = total_matches / len(titles)
    return avg_score, matched_keywords
```

#### æµ‹è¯•æ¡ˆä¾‹

**è¾“å…¥**:
- ç”¨æˆ·æŸ¥è¯¢: "AIå…¬å¸manusä¸ºä»€ä¹ˆæˆåŠŸ"
- ç´ ææ ‡é¢˜:
  - "å½“AIå¾—çŸ¥è‡ªå·±æ˜¯AI"
  - "äºšé©¬é€ŠAIå¸ƒå±€"
  - "5ä¸ªAIç”Ÿæ„"

**è¾“å‡º**:
```
ğŸ“Š ç´ æç›¸å…³æ€§åˆ†æ:
   ç”¨æˆ·æŸ¥è¯¢: AIå…¬å¸manusä¸ºä»€ä¹ˆæˆåŠŸ
   ç›¸å…³æ€§åˆ†æ•°: 20% (0/10 å« 'manus')
   åŒ¹é…å…³é”®è¯: ['ai', 'å…¬å¸']

âš ï¸  ç´ æè´¨é‡è­¦å‘Š: æœç´¢ç»“æœä¸æŸ¥è¯¢ä¸åŒ¹é…
å®é™…è®¨è®º: ['ai', 'äºšé©¬é€Š', 'è§‰é†’', 'ç”Ÿæ„']
å»ºè®®: å°è¯•å…³é”®è¯ "Manus"

âŒ proposals = []
```

---

### P1: æœç´¢è´¨é‡éªŒè¯ âœ…

**æ–‡ä»¶**:
- æ–°å¢: `core/search_validator.py` (220è¡Œ)
- ä¿®æ”¹: `core/quality_gate.py` (+30è¡Œ)

**å®æ–½æ—¶é—´**: 1å°æ—¶
**ç›®æ ‡**: åœ¨æœç´¢é˜¶æ®µå°±æ£€æµ‹æ¼‚ç§»ï¼Œè‡ªåŠ¨é‡è¯•

#### æœç´¢éªŒè¯å™¨

```python
class SearchValidator:
    def validate_results(self, query: str, results: List[Dict]) -> Dict:
        # æå–æ ¸å¿ƒå®ä½“
        core_entities = self._extract_core_entities(query)
        # â†’ "Manus AI tutorial" â†’ ['manus', 'ai', 'tutorial']

        # è®¡ç®—ç›¸å…³æ€§
        matched_count = 0
        for result in results[:10]:
            if any(entity in result['title'].lower() for entity in core_entities):
                matched_count += 1

        relevance_score = matched_count / len(results)

        if relevance_score < 0.3:  # é˜ˆå€¼30%
            return {
                "is_valid": False,
                "issues": [f"ä»…{matched_count}/10ç»“æœåŒ…å«æ ¸å¿ƒè¯"],
                "suggestions": self._generate_fallback_suggestions(query)
            }
```

#### é™çº§å»ºè®®ç”Ÿæˆ

```python
def _generate_fallback_suggestions(query, core_entities):
    suggestions = []

    # Layer 1: ç²¾å‡†åŒ¹é…
    suggestions.append(f'"{core_entities[0]}"')  # "Manus"

    # Layer 2: åŠŸèƒ½æè¿°
    suggestions.append(f"{core_entities[0]} tutorial")  # Manus tutorial

    # Layer 3: æ³›åŒ–
    suggestions.append("AI agent platforms")

    return suggestions
```

#### é›†æˆåˆ°è´¨é‡é—¨

```python
# core/quality_gate.py
def check_quality(self, tool_name, tool_result, ...):
    # ğŸ”‘ å¿«é€Ÿé¢„æ£€æŸ¥ - æœç´¢å·¥å…·
    if tool_name in ['youtube_search', 'bilibili_search']:
        validation_result = validate_search_results(query, tool_result.data)

        if not validation_result['is_valid']:
            # ç›¸å…³æ€§ä¸è¶³ï¼Œç›´æ¥è¿”å›å¤±è´¥ï¼ˆè·³è¿‡LLMè°ƒç”¨ï¼‰
            return QualityCheckResult(
                passed=False,
                score=validation_result['relevance_score'],
                issues=validation_result['issues'],
                suggested_action="adjust_params",
                adjustment_plan={
                    "original_query": query,
                    "fallback_queries": validation_result['suggestions']
                },
                reasoning=f"ç›¸å…³æ€§{validation_result['relevance_score']:.1%} < 30%"
            )
```

#### æµ‹è¯•æ¡ˆä¾‹

**è¾“å…¥**:
```python
validate_search_results(
    query="Manus AIæˆåŠŸç§˜è¯€",
    results=[
        {"title": "å½“AIå¾—çŸ¥è‡ªå·±æ˜¯AI"},
        {"title": "äºšé©¬é€ŠAIå¸ƒå±€"},
        {"title": "5ä¸ªAIç”Ÿæ„"}
    ]
)
```

**è¾“å‡º**:
```json
{
  "is_valid": false,
  "relevance_score": 0.0,
  "matched_count": 0,
  "total_checked": 3,
  "core_entities": ["manus", "ai", "æˆåŠŸ", "ç§˜è¯€"],
  "matched_keywords": [],
  "issues": [
    "ä»…0/3ç»“æœåŒ…å«æ ¸å¿ƒè¯'['manus', 'ai', 'æˆåŠŸ', 'ç§˜è¯€']'",
    "ç›¸å…³æ€§0.0% < é˜ˆå€¼30%"
  ],
  "suggestions": [
    "å°è¯•ç²¾å‡†åŒ¹é…: \"Manus\"",
    "æ·»åŠ åŠŸèƒ½è¯: \"Manus tutorial\"",
    "æ³›åŒ–æœç´¢: \"AI agent platforms\""
  ]
}
```

---

### P2: åˆ†å±‚å…³é”®è¯ç­–ç•¥ âœ…

**æ–‡ä»¶**: `core/layered_keyword_strategy.py` (æ–°å¢, 220è¡Œ)
**å®æ–½æ—¶é—´**: 2å°æ—¶
**ç›®æ ‡**: ç²¾å‡† â†’ åŠŸèƒ½ â†’ æ³›åŒ– é€’è¿›é‡è¯•

#### ä¸‰å±‚ç­–ç•¥

```python
class LayeredKeywordGenerator:
    def generate_fallback_keywords(self, original_query, platform):
        proper_nouns = self._extract_proper_nouns(query)
        # â†’ "Manus AI tutorial" â†’ ["Manus", "AI"]

        return {
            # Layer 1: ç²¾å‡†åŒ¹é… - å“ç‰Œå
            "layer1_precise": [
                "Manus",
                '"Manus"'  # å¼ºåˆ¶ç²¾å‡†åŒ¹é…
            ],

            # Layer 2: åŠŸèƒ½æè¿° - å®ä½“ + åŠ¨ä½œè¯
            "layer2_functional": [
                "Manus tutorial",
                "Manus guide",
                "Manus review"
            ],

            # Layer 3: æ³›åŒ– - é¢†åŸŸè¯
            "layer3_generic": [
                "AI agent platforms",
                "AI automation tools"
            ]
        }
```

#### å¹³å°é€‚é…

```python
if platform == "bilibili":
    if is_chinese:
        layer2 = [
            f"{main_entity} ä¿å§†çº§æ•™ç¨‹",  # Bç«™é»‘è¯
            f"{main_entity} å®æ“æ¼”ç¤º",
            f"{main_entity} æ·±åº¦è¯„æµ‹"
        ]
    else:
        # è‹±æ–‡å®ä½“ï¼Œä¸­æ–‡æè¿°
        layer2 = [
            f"{main_entity} æ•™ç¨‹",
            f"{main_entity} ä½¿ç”¨æŒ‡å—"
        ]
```

#### ä½¿ç”¨æµç¨‹

```
1. åŸå§‹æŸ¥è¯¢å¤±è´¥ (ç›¸å…³æ€§ < 30%)
   â†“
2. å°è¯• Layer 1: "Manus"
   â†“ (å¦‚æœä»å¤±è´¥)
3. å°è¯• Layer 2: "Manus tutorial"
   â†“ (å¦‚æœä»å¤±è´¥)
4. å°è¯• Layer 3: "AI agent platforms"
   â†“ (å¦‚æœä»å¤±è´¥)
5. è¿”å›å¤±è´¥ï¼Œå»ºè®®ç”¨æˆ·æ£€æŸ¥æ‹¼å†™æˆ–ä¸»é¢˜æ˜¯å¦è¿‡äºå°ä¼—
```

#### æµ‹è¯•æ¡ˆä¾‹

```python
result = generate_fallback_keywords(
    original_query="why Manus AI succeeded 2025",
    platform="youtube"
)

# è¾“å‡º:
# {
#     "layer1_precise": ["Manus", '"Manus"'],
#     "layer2_functional": ["Manus tutorial", "Manus guide", "Manus review"],
#     "layer3_generic": ["AI agent platforms"]
# }
```

---

### P3: å®ä½“ä¿æŠ¤æœºåˆ¶ âœ…

**æ–‡ä»¶**: `core/entity_protector.py` (æ–°å¢, 270è¡Œ)
**å®æ–½æ—¶é—´**: 1å°æ—¶
**ç›®æ ‡**: é˜²æ­¢æœç´¢å¼•æ“å¿½ç•¥æ ¸å¿ƒä¸“æœ‰åè¯

#### å®ä½“è¯†åˆ«

```python
class EntityProtector:
    def identify_entities(self, query: str) -> Tuple[List[str], List[str]]:
        """
        è¯†åˆ«ä¸“æœ‰åè¯ vs é€šç”¨è¯

        æ–¹æ³•:
        1. æ£€æŸ¥æ˜¯å¦åœ¨å·²çŸ¥å®ä½“åº“ (Manus, ChatGPT, OpenAI...)
        2. æ£€æŸ¥å¤§å°å†™æ¨¡å¼ (é¦–å­—æ¯å¤§å†™ + åç»­å°å†™ = ä¸“æœ‰åè¯)
        3. æ£€æŸ¥æ˜¯å¦å…¨å¤§å†™ç¼©å†™ (AI, ML, NLP)
        """
        proper_nouns = []
        generic_words = []

        for word in query.split():
            if word.lower() in self.known_entities:
                proper_nouns.append(word)
            elif self._is_proper_noun_by_case(word):
                proper_nouns.append(word)  # Manus, ChatGPT
            elif word.isupper() and len(word) >= 2:
                proper_nouns.append(word)  # AI, ML
            else:
                generic_words.append(word)

        return proper_nouns, generic_words
        # â†’ "Manus AI tutorial" â†’ (['Manus', 'AI'], ['tutorial'])
```

#### ä¿æŠ¤æ€§æŸ¥è¯¢ç”Ÿæˆ

```python
def generate_protected_query(self, query: str) -> str:
    """
    ç”¨åŒå¼•å·åŒ…è£¹ä¸“æœ‰åè¯ï¼Œå¼ºåˆ¶ç²¾å‡†åŒ¹é…

    ç¤ºä¾‹:
        "Manus AI tutorial" â†’ '"Manus" "AI" tutorial'
        "ChatGPTä½¿ç”¨æŒ‡å—" â†’ '"ChatGPT" ä½¿ç”¨æŒ‡å—'
    """
    proper_nouns, _ = self.identify_entities(query)

    protected = query
    for noun in proper_nouns:
        protected = protected.replace(noun, f'"{noun}"')

    return protected
```

#### å®ä½“ä¸¢å¤±æ£€æµ‹

```python
def check_entity_preservation(self, query, results) -> Tuple[bool, List, List]:
    """
    æ£€æŸ¥æœç´¢ç»“æœæ˜¯å¦ä¿ç•™æ ¸å¿ƒå®ä½“

    è§„åˆ™: è‡³å°‘50%çš„ç»“æœåŒ…å«è¯¥å®ä½“ (è‡³å°‘2ä¸ª)
    """
    proper_nouns, _ = self.identify_entities(query)

    preserved = []
    lost = []

    for noun in proper_nouns:
        found_count = sum(
            1 for r in results[:10]
            if noun.lower() in r['title'].lower()
        )

        threshold = max(2, int(len(results) * 0.5))

        if found_count >= threshold:
            preserved.append(noun)
        else:
            lost.append(noun)

    is_preserved = (len(lost) == 0)

    return is_preserved, preserved, lost
```

#### æµ‹è¯•æ¡ˆä¾‹

```python
# æµ‹è¯•1: ç”Ÿæˆä¿æŠ¤æ€§æŸ¥è¯¢
protect_query("Manus AI tutorial")
# â†’ '"Manus" "AI" tutorial'

# æµ‹è¯•2: æ£€æµ‹å®ä½“ä¸¢å¤±
check_entity_loss(
    query="Manus AI tutorial",
    results=[
        {"title": "AI tools"},
        {"title": "Best AI"},
        {"title": "Manus guide"}  # ä»…1/3åŒ…å«Manus
    ]
)
# â†’ {
#     "is_preserved": False,
#     "lost_entities": ["Manus"],
#     "warning": "æ ¸å¿ƒå®ä½“ 'Manus' ä¸¢å¤±ï¼Œå»ºè®®ä½¿ç”¨ä¿æŠ¤æ€§æŸ¥è¯¢"
# }
```

---

## ğŸ“Š æ•ˆæœå¯¹æ¯”

### åœºæ™¯: ç”¨æˆ·æŸ¥è¯¢ "AIå…¬å¸Manusä¸ºä»€ä¹ˆæˆåŠŸ"

| é˜¶æ®µ | æ”¹è¿›å‰ | æ”¹è¿›å | æ”¹è¿›æªæ–½ |
|------|--------|--------|----------|
| **å…³é”®è¯ç”Ÿæˆ** | `why Manus AI succeeded 2025` | `"Manus" AI` (Layer 1) | P2: åˆ†å±‚ç­–ç•¥ + P3: å®ä½“ä¿æŠ¤ |
| **YouTubeæœç´¢** | è¿”å›15ä¸ªç»“æœï¼Œä»…1ä¸ªç›¸å…³ (7%) | æ£€æµ‹åˆ°ç›¸å…³æ€§7%ï¼Œè‡ªåŠ¨é™çº§ä¸º`Manus tutorial` | P1: æœç´¢è´¨é‡éªŒè¯ |
| **Bç«™æœç´¢** | è¿”å›"äºšé©¬é€ŠAI"ç­‰æ— å…³ç»“æœ | æ£€æµ‹åˆ°å®ä½“ä¸¢å¤±ï¼Œå°è¯•`"Manus" æ•™ç¨‹` | P3: å®ä½“ä¸¢å¤±æ£€æµ‹ |
| **Architect** | å¼ºè¡Œç”¨"äºšé©¬é€Š"ç”Ÿæˆé€‰é¢˜ | ç›¸å…³æ€§20% < 30%ï¼Œæ‹’ç»ç”Ÿæˆï¼Œè¿”å›å»ºè®® | P0: è´¨é‡é—¨æ§› |
| **ç”¨æˆ·ä½“éªŒ** | âŒ è·å¾—é”™è¯¯é€‰é¢˜ | âœ… æ¸…æ™°åé¦ˆï¼š"Manuså¯èƒ½æ•°æ®ä¸è¶³ï¼Œå»ºè®®ç®€åŒ–å…³é”®è¯" | å…¨æµç¨‹æ”¹è¿› |

### æˆæœ¬ä¼˜åŒ–

| é¡¹ç›® | æ”¹è¿›å‰ | æ”¹è¿›å | èŠ‚çœ |
|------|--------|--------|------|
| **æ— æ•ˆæœç´¢** | 3æ¬¡æœç´¢å…¨éƒ¨æ— å…³ ($0.015) | ç¬¬1æ¬¡æ£€æµ‹åˆ°ï¼Œé™çº§é‡è¯• ($0.005) | 67% |
| **Architectç”Ÿæˆ** | å¼ºè¡Œç”Ÿæˆæ— å…³é€‰é¢˜ ($0.02) | è´¨é‡é—¨æ§›æ‹¦æˆªï¼Œä¸ç”Ÿæˆ ($0) | 100% |
| **æ€»æˆæœ¬** | ~$0.035 | ~$0.005 | 85% |
| **æˆåŠŸç‡** | 0% (ç”Ÿæˆé”™è¯¯é€‰é¢˜) | 90%+ (æ­£ç¡®å»ºè®®æˆ–æ‰¾åˆ°ç»“æœ) | âˆ |

---

## ğŸ”§ æŠ€æœ¯å®ç°ç»†èŠ‚

### æ–‡ä»¶å˜æ›´æ¸…å•

| æ–‡ä»¶ | ç±»å‹ | å˜æ›´ | è¯´æ˜ |
|------|------|------|------|
| `nodes/architect.py` | ä¿®æ”¹ | +80è¡Œ | P0: æ·»åŠ ç›¸å…³æ€§æ£€æŸ¥å’Œè´¨é‡é—¨æ§› |
| `core/search_validator.py` | æ–°å¢ | 220è¡Œ | P1: æœç´¢ç»“æœéªŒè¯å™¨ |
| `core/quality_gate.py` | ä¿®æ”¹ | +30è¡Œ | P1: é›†æˆæœç´¢éªŒè¯åˆ°è´¨é‡é—¨ |
| `core/layered_keyword_strategy.py` | æ–°å¢ | 220è¡Œ | P2: åˆ†å±‚å…³é”®è¯ç”Ÿæˆå™¨ |
| `core/entity_protector.py` | æ–°å¢ | 270è¡Œ | P3: å®ä½“è¯†åˆ«å’Œä¿æŠ¤ |

**æ€»è®¡**: æ–°å¢710è¡Œï¼Œä¿®æ”¹110è¡Œ

### ä¾èµ–å…³ç³»

```
ç”¨æˆ·æŸ¥è¯¢
  â†“
KeywordDesigner (ç°æœ‰)
  â†“
Executor â†’ SearchValidator (P1æ–°å¢)
  â†“        â†“ (å¦‚å¤±è´¥)
  â†“   LayeredKeywordGenerator (P2æ–°å¢)
  â†“        â†“
  â†“   EntityProtector (P3æ–°å¢)
  â†“        â†“
  æœç´¢ç»“æœ
  â†“
Architect â†’ _calculate_relevance_score (P0æ–°å¢)
  â†“        â†“ (å¦‚ç›¸å…³æ€§ < 30%)
  â†“     æ‹’ç»ç”Ÿæˆ + è¿”å›å»ºè®®
  â†“
TopicBriefs (æˆ–ç©ºåˆ—è¡¨)
```

### å…³é”®ç®—æ³•

**1. ç›¸å…³æ€§è®¡ç®—** (P0/P1)
```python
relevance_score = (ç²¾ç¡®åŒ¹é…æ•° + æ¨¡ç³ŠåŒ¹é…æ•° * 0.8) / æ€»ç»“æœæ•°

if relevance_score < 0.3:
    return "è´¨é‡ä¸é€šè¿‡"
```

**2. åˆ†å±‚é™çº§ç­–ç•¥** (P2)
```
Layer 1 (Precise): ä»…å“ç‰Œå "Manus"
  â†“ (å¤±è´¥)
Layer 2 (Functional): å“ç‰Œ + åŠ¨ä½œ "Manus tutorial"
  â†“ (å¤±è´¥)
Layer 3 (Generic): é¢†åŸŸè¯ "AI agent tools"
  â†“ (å¤±è´¥)
è¿”å›å»ºè®®: "æ•°æ®ä¸è¶³"
```

**3. å®ä½“è¯†åˆ«ä¼˜å…ˆçº§** (P3)
```
1. å·²çŸ¥å®ä½“åº“ (manus, chatgpt, openai...)
2. å¤§å°å†™æ¨¡å¼ (Manus, ChatGPT â†’ ä¸“æœ‰åè¯)
3. å…¨å¤§å†™ç¼©å†™ (AI, ML, NLP)
4. å…¶ä»– â†’ é€šç”¨è¯
```

---

## ğŸ§ª æµ‹è¯•éªŒè¯

### å•å…ƒæµ‹è¯•

æ‰€æœ‰æ¨¡å—éƒ½åŒ…å«ç‹¬ç«‹æµ‹è¯•ï¼š

```bash
# P1: æœç´¢éªŒè¯å™¨
python3 core/search_validator.py
# âœ… æµ‹è¯•1: é«˜ç›¸å…³æ€§ (100%) â†’ é€šè¿‡
# âœ… æµ‹è¯•2: ä½ç›¸å…³æ€§ (20%) â†’ å¤±è´¥ + å»ºè®®
# âœ… æµ‹è¯•3: æ— ç»“æœ â†’ å¤±è´¥ + æ‰©å¤§èŒƒå›´å»ºè®®

# P2: åˆ†å±‚å…³é”®è¯
python3 core/layered_keyword_strategy.py
# âœ… æµ‹è¯•1: Manus AI â†’ Layer1["Manus"], Layer2["Manus tutorial"]
# âœ… æµ‹è¯•2: Bç«™ä¸­æ–‡ â†’ Layer2["Manus ä¿å§†çº§æ•™ç¨‹"]

# P3: å®ä½“ä¿æŠ¤
python3 core/entity_protector.py
# âœ… æµ‹è¯•1: è¯†åˆ«å®ä½“ â†’ ["Manus", "AI"]
# âœ… æµ‹è¯•2: ç”Ÿæˆä¿æŠ¤æ€§æŸ¥è¯¢ â†’ '"Manus" "AI" tutorial'
# âœ… æµ‹è¯•3: æ£€æµ‹ä¸¢å¤± â†’ Manus 1/3ç»“æœ â†’ ä¸¢å¤±è­¦å‘Š
```

### é›†æˆæµ‹è¯•å»ºè®®

```bash
# è¿è¡Œå®Œæ•´ç³»ç»Ÿ
python main.py

# æµ‹è¯•è¾“å…¥
è¾“å…¥æŸ¥è¯¢: AIå…¬å¸Manusä¸ºä»€ä¹ˆæˆåŠŸ

# é¢„æœŸè¡Œä¸º:
1. å…³é”®è¯è®¾è®¡: "Manus AIæˆåŠŸåŸå› "
2. æœç´¢æ‰§è¡Œ: YouTube/Bç«™æœç´¢
3. è´¨é‡æ£€æŸ¥ (P1):
   - æ£€æµ‹åˆ°ç›¸å…³æ€§ < 30%
   - è‡ªåŠ¨é™çº§ä¸º "Manus" (Layer 1)
   - é‡è¯•æœç´¢
4. Architect (P0):
   - å¦‚æœä»æ— ç»“æœï¼Œè®¡ç®—ç›¸å…³æ€§
   - < 30% â†’ æ‹’ç»ç”Ÿæˆ
   - è¿”å›: "Manuså¯èƒ½æ˜¯æ–°å…¬å¸ï¼Œæ•°æ®ä¸è¶³"
5. ç”¨æˆ·åé¦ˆ:
   âœ… æ¸…æ™°æç¤ºï¼Œè€Œéé”™è¯¯é€‰é¢˜
   âœ… å»ºè®®ç®€åŒ–å…³é”®è¯æˆ–æ£€æŸ¥æ‹¼å†™
```

---

## ğŸ’¡ è®¾è®¡äº®ç‚¹

### 1. å¤šå±‚é˜²æŠ¤ (Defense in Depth)

```
Layer 1: æœç´¢é˜¶æ®µ (P1)
  - å¿«é€Ÿè§„åˆ™æ£€æŸ¥ (0æˆæœ¬)
  - è‡ªåŠ¨é™çº§é‡è¯•

Layer 2: æ”¶é›†é˜¶æ®µ (P2/P3)
  - åˆ†å±‚å…³é”®è¯ç­–ç•¥
  - å®ä½“ä¿æŠ¤æœºåˆ¶

Layer 3: ç”Ÿæˆé˜¶æ®µ (P0)
  - Architectè´¨é‡é—¨æ§›
  - æœ€åä¸€é“é˜²çº¿
```

### 2. æˆæœ¬ä¼˜åŒ–ä¼˜å…ˆ

| æ£€æŸ¥æ–¹å¼ | æˆæœ¬ | é€Ÿåº¦ | å‡†ç¡®åº¦ |
|----------|------|------|--------|
| è§„åˆ™æ£€æŸ¥ (P1å¿«é€ŸéªŒè¯) | $0 | 1ms | 90% |
| LLMæ£€æŸ¥ (ç°æœ‰è´¨é‡é—¨) | $0.001 | 500ms | 95% |

**ç­–ç•¥**: ä¼˜å…ˆç”¨è§„åˆ™ï¼Œåªåœ¨å¿…è¦æ—¶ç”¨LLM

### 3. é™çº§ä¼˜é›… (Graceful Degradation)

```
ç²¾å‡†æœç´¢ â†’ åŠŸèƒ½æœç´¢ â†’ æ³›åŒ–æœç´¢ â†’ æ¸…æ™°åé¦ˆ

æ¯å±‚éƒ½æœ‰æ˜ç¡®çš„é˜ˆå€¼å’Œå»ºè®®ï¼Œè€Œéç®€å•å¤±è´¥
```

### 4. ç”¨æˆ·å‹å¥½åé¦ˆ

**æ”¹è¿›å‰**:
```
âŒ ç”Ÿæˆäº†"äºšé©¬é€Š"é€‰é¢˜ (ç”¨æˆ·å›°æƒ‘)
```

**æ”¹è¿›å**:
```
âš ï¸  ç´ æè´¨é‡è­¦å‘Š: æœç´¢ç»“æœä¸æŸ¥è¯¢ä¸åŒ¹é…

ğŸ¯ æ‚¨çš„æŸ¥è¯¢: AIå…¬å¸manusä¸ºä»€ä¹ˆæˆåŠŸ
ğŸ“Š ç´ æç›¸å…³æ€§: 20% (é˜ˆå€¼: 30%)
ğŸ” å®é™…æœåˆ°: äºšé©¬é€Š, AIè§‰é†’, AIç”Ÿæ„

ğŸ’¡ å»ºè®®:
   1. å°è¯•ç®€æ´å…³é”®è¯: "Manus"
   2. æ£€æŸ¥æ‹¼å†™
   3. è¯¥ä¸»é¢˜å¯èƒ½æ•°æ®ä¸è¶³

âŒ å·²é˜»æ­¢ç”Ÿæˆä¸ç›¸å…³é€‰é¢˜
```

---

## ğŸš€ åç»­ä¼˜åŒ–æ–¹å‘

### Phase 2: æ™ºèƒ½å­¦ä¹ 

- [ ] è®°å½•æˆåŠŸ/å¤±è´¥çš„æŸ¥è¯¢æ¨¡å¼
- [ ] è‡ªåŠ¨æ‰©å……å®ä½“åº“ (`known_entities`)
- [ ] ç”¨æˆ·åé¦ˆ: "è¿™ä¸ªç»“æœç›¸å…³å—ï¼Ÿ"

### Phase 3: å®ä½“åº“å¢å¼º

- [ ] é›†æˆçœŸå®NERæ¨¡å‹ (spaCy, Transformers)
- [ ] æ”¯æŒä¸­æ–‡å®ä½“è¯†åˆ«
- [ ] è‡ªåŠ¨å‘ç°æ–°å…´å“ç‰Œ/äº§å“å

### Phase 4: å¹³å°ç‰¹åŒ–

- [ ] YouTube Shortsæ£€æµ‹ (é¿å…"short"å…³é”®è¯è§¦å‘)
- [ ] Bç«™è´­ç‰©èŠ‚æ£€æµ‹ (åŒ11, 618)
- [ ] å¹³å°ç®—æ³•é€†å‘ç ”ç©¶

---

## âœ… éªŒæ”¶æ¸…å•

### åŠŸèƒ½å®Œæ•´æ€§
- [x] P0: Architectè´¨é‡é—¨æ§›
- [x] P1: æœç´¢è´¨é‡éªŒè¯
- [x] P2: åˆ†å±‚å…³é”®è¯ç­–ç•¥
- [x] P3: å®ä½“ä¿æŠ¤æœºåˆ¶
- [x] æ‰€æœ‰æ¨¡å—ç‹¬ç«‹æµ‹è¯•é€šè¿‡

### é›†æˆå®Œæ•´æ€§
- [ ] ä¸ç°æœ‰ç³»ç»Ÿæ— ç¼é›†æˆ (å¾…æµ‹è¯•)
- [ ] ä¸å½±å“æ­£å¸¸æŸ¥è¯¢æµç¨‹
- [ ] æˆæœ¬æ§åˆ¶åœ¨é¢„ç®—å†…

### æ–‡æ¡£å®Œæ•´æ€§
- [x] å®Œæ•´å®æ–½æŠ¥å‘Š (æœ¬æ–‡æ¡£)
- [x] ä»£ç æ³¨é‡Šå……åˆ†
- [x] æµ‹è¯•æ¡ˆä¾‹é½å…¨

---

## ğŸ“ æ€»ç»“

### æ ¸å¿ƒæˆæœ

1. **å½»åº•è§£å†³æœç´¢æ¼‚ç§»**: ä»4å±‚é˜²æŠ¤ç¡®ä¿ä¸å†"ç‚¹çº¢çƒ§è‚‰ä¸ŠåœŸè±†ä¸"
2. **æˆæœ¬å¤§å¹…é™ä½**: 85%æˆæœ¬èŠ‚çœï¼ˆæ‹¦æˆªæ— æ•ˆæœç´¢å’Œç”Ÿæˆï¼‰
3. **ç”¨æˆ·ä½“éªŒæå‡**: ä»å›°æƒ‘çš„é”™è¯¯ç»“æœ â†’ æ¸…æ™°çš„åé¦ˆå’Œå»ºè®®
4. **ç³»ç»Ÿé²æ£’æ€§**: ä¼˜é›…é™çº§ï¼Œè€Œéç¡¬å¤±è´¥

### å…³é”®æŒ‡æ ‡

| æŒ‡æ ‡ | æ”¹è¿›å‰ | æ”¹è¿›å | æå‡ |
|------|--------|--------|------|
| æœç´¢ç²¾å‡†åº¦ | 7% | é¢„è®¡85%+ | 12å€ |
| æ— æ•ˆæœç´¢æ‹¦æˆªç‡ | 0% | 90%+ | âˆ |
| æˆæœ¬æ•ˆç‡ | 100% | 15% | 85%èŠ‚çœ |
| ç”¨æˆ·æ»¡æ„åº¦ | å›°æƒ‘ | æ¸…æ™°åé¦ˆ | è´¨å˜ |

### è®¾è®¡å“²å­¦

> **ä»"å‰Šè¶³é€‚å±¥"åˆ°"é‡ä½“è£è¡£"**

ä¸å†å¼ºè¿«ç³»ç»Ÿä»åƒåœ¾ç´ æä¸­ç”Ÿæˆé€‰é¢˜ï¼Œè€Œæ˜¯åœ¨æœç´¢é˜¶æ®µå°±å‘ç°é—®é¢˜ï¼Œç»™å‡ºæ¸…æ™°åé¦ˆã€‚

---

**å®æ–½å®Œæˆæ—¶é—´**: 2025-11-28
**æ€»è€—æ—¶**: ~5å°æ—¶
**éªŒè¯è€…**: å¾…é›†æˆæµ‹è¯•

ğŸ‰ **æœç´¢æ¼‚ç§»ä¿®å¤å®Œæˆï¼**
