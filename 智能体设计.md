深度分析智能体 (Analyst Agent) 落地执行方案核心目标：构建一个模拟顶级研究员思考路径的 AI 智能体。输入：选题简报 (TopicBrief)输出：深度研报 (DeepAnalysisReport)模型策略：Reasoning Model (思考) + Fast Model (阅读) 的组合拳。1. 核心定位：内容流水线的“中央情报局”在之前的步骤中，Planner 负责广度扫描，Filter 负责筛选爆款。Analyst Agent 的核心职责是“降噪”与“升维”：降噪 (De-noise)：过滤掉营销号的二手信息，只保留第一手硬核事实。升维 (Elevate)：将平铺直叙的信息，通过第一性原理和思维模型，转化为有洞察力的观点。2. 逻辑架构：三级火箭模型为了实现“通用性”和“深度”，我们将该节点的内部逻辑拆解为三级火箭：🚀 第一级：动态侦察规划 (The Adaptive Scout)逻辑：不要盲目搜索。先像人类研究员一样，根据题目类型决定“去哪找源头”。模型选型：Fast Model (如 DeepSeek V3 / GPT-4o-mini)通用化适配：技术类选题 $\rightarrow$ 目标：Arxiv, GitHub, 官方文档 $\rightarrow$ 动作：scholar_search, web_search(site:github.com)商业/财经类 $\rightarrow$ 目标：研报, 财报, 宏观数据 $\rightarrow$ 动作：web_search(site:sec.gov), web_search(filetype:pdf report)社会/认知类 $\rightarrow$ 目标：书籍, 访谈, 心理学实验 $\rightarrow$ 动作：web_search(interview transcript), web_search(psychology study)产出：ResearchPlan，包含 3-5 个定向搜索指令。🚀 第二级：挖掘与智能萃取 (The Excavator & Processor)逻辑：Garbage In, Garbage Out。必须在数据进入“大脑”之前完成清洗。模型选型：Fast Model (如 DeepSeek V3 / Gemini Flash) —— 利用其长文本与低成本优势。动作：定向挖掘：调用 Tavily 获取网页长文本 (raw_content) 或 Arxiv 获取摘要。智能萃取 (ETL)：输入：20k tokens 的原始杂乱文本。指令：“提取文中关于[研究目的]的核心数据、原话引用和反对意见。忽略废话、广告和套话。”输出：结构化的 KeyInsight 卡片。产出：一组高信噪比的情报卡片。🚀 第三级：认知重构 (The Philosopher)逻辑：基于事实，进行逻辑外科手术。这是您手写笔记中“底层逻辑”发挥作用的地方。模型选型：Reasoning Model (如 DeepSeek-R1, Kimi k2, Claude 3.5 Sonnet) —— 利用其强推理能力。思维模型库 (Prompt 内置)：First Principles：追问 5 个为什么，回归物理/人性本质。Dialectic (辩证法)：寻找主流观点的反面，构建冲突。Mental Models：自动匹配模型（如：熵增定律、网络效应、损失厌恶）。产出：最终的 DeepAnalysisReport。3. 执行路径图 (Workflow)graph TD
    Start[输入: 选题简报 Top 3] --> LoopStart
    
    subgraph "单选题深度分析闭环"
        LoopStart(取出一个选题) --> Classify{1. 领域识别}
        
        Classify -->|技术/AI| PlanTech[策略: 找论文/文档/代码]
        Classify -->|商业/财经| PlanBiz[策略: 找财报/研报/数据]
        Classify -->|生活/认知| PlanLife[策略: 找书/访谈/心理学原理]
        
        PlanTech & PlanBiz & PlanLife --> ExecutePlan[2. 执行搜索 (Tavily/Arxiv)]
        
        ExecutePlan --> RawData[海量原始文本 (含噪音)]
        
        RawData --> Process[3. 智能萃取 (DeepSeek V3)]
        note1[ETL清洗: 去除广告/提取金句/数据核实] --- Process
        
        Process --> Insights[结构化情报卡片]
        
        Insights --> Analyze[4. 深度思考 (DeepSeek-R1/Kimi k2)]
        
        subgraph "分析引擎 (思维链)"
            Analyze --> L1[事实核查 Fact Check]
            L1 --> L2[第一性原理推导 First Principles]
            L2 --> L3[冲突挖掘 Conflict Mining]
            L3 --> L4[思维模型匹配 Mental Models]
        end
    end
    
    Analyze --> Report[输出: 深度研报]
    Report --> LoopEnd{还有选题?}
    LoopEnd -- Yes --> LoopStart
    LoopEnd -- No --> Finish[输出给 Writer]
4. 关键数据结构 (Data Structure)这是落地代码的基础，定义好结构，Agent 才知道怎么工作。# 1. 萃取阶段 (中间产物 - 由 Fast Model 生成)
class KeyInsight(BaseModel):
    source: str       # 来源 (如: OpenAI Technical Report)
    url: str          # 链接
    is_primary: bool  # 是否一手资料 (AI 判断)
    quote: str        # 原话/原文数据 (拒绝编造)
    insight: str      # 对选题的价值解读
    conflict: str     # 是否存在与主流观点的冲突点

# 2. 分析结果 (最终输出 - 由 Reasoning Model 生成)
class DeepAnalysisReport(BaseModel):
    topic_id: str
    
    # 事实层
    hard_evidence: List[str] # 挖掘到的硬核数据/论文结论 (必须带引用)
    
    # 逻辑层
    root_cause: str          # 5-Why 导出的底层归因 (如: 边际成本递减)
    theoretical_model: str   # 使用的学科模型 (如: 熵增定律)
    
    # 叙事层 (给 Writer 的弹药)
    mainstream_view: str     # 大众怎么看
    contrarian_view: str     # 反直觉的洞察 (High Value)
    emotional_hook: str      # 击中用户哪个底层心理 (贪婪/恐惧/懒惰)
    content_strategy: str    # 给 Writer 的具体建议
5. 落地实施步骤 (Roadmap)Step 1: 基础设施升级 (Tools)[x] 部署 tools/scholar_search.py (Arxiv) - 已就绪[ ] 部署 tools/web_search.py (Tavily) - 需确保 include_raw_content=TrueStep 2: 构建“萃取器” (The Processor)编写 ContentProcessor 类。集成 DeepSeek V3 或其他高性价比模型。实现 extract_insights 函数：Input(Long Text) -> Output(KeyInsight)。Step 3: 构建“分析师” (The Analyst Node)编写主 Prompt，包含“第一性原理”、“辩证法”和“思维模型库”指令。集成 DeepSeek-R1 或 Kimi k2。实现动态规划逻辑（根据选题类型分支）。Step 4: 联调与测试输入测试：给一个“RAG技术”的选题。验证点：是否搜了 Arxiv？是否提取了论文摘要？分析报告是否指出了“RAG vs Long Context”的本质冲突？6. 给您的建议 (Pro Tips)容忍度设置：第一手资料（如论文）往往晦涩难懂。如果 AI 没搜到论文，降级策略很重要——允许它退而求其次，搜索“顶级技术博客的深度解读”，不要让程序崩溃。源头标记：强制 AI 在输出中保留 [Source] 标记。这不仅是为了准确，更是为了让最终生成的文案具有权威感（Writer Agent 可以写：“根据 Arxiv 上最新的论文显示...”）。模型温度 (Temperature)：规划 & 萃取：建议 temperature=0.1 (严谨、准确)。深度分析：建议 temperature=0.7 (允许一定的联想和洞察)。