# æ™ºèƒ½å‘ç°æµç¨‹è®¾è®¡ï¼šæœç´¢è¯è®¾è®¡ â†’ å‘ç°åšä¸» â†’ é¡ºè—¤æ‘¸ç“œ

## ğŸ¯ æ ¸å¿ƒæ€è·¯

ä½ çš„æƒ³æ³•éå¸¸æ£’ï¼è¿™ä¸ªæµç¨‹æ›´ç¬¦åˆäººç±»çš„æœç´¢é€»è¾‘ï¼š

```
ç”¨æˆ·éœ€æ±‚: "AI News"
    â†“
1. AI è®¾è®¡ç²¾å‡†æœç´¢è¯
   - "best AI news channels 2025"
   - "top AI YouTube channels"
   - "é¡¶çº§ AI åšä¸»æ¨è"
    â†“
2. Web æœç´¢æ‰¾åˆ°åšä¸»æ¨èæ–‡ç« 
   - æ–‡ç« : "2025å¹´å¿…çœ‹çš„10ä¸ªAIé¢‘é“"
   - æ–‡ç« : "è¿™äº›UPä¸»è®²AIæœ€å¥½"
    â†“
3. ä»æ–‡ç« ä¸­æå–åšä¸»ä¿¡æ¯
   - YouTube: @AIExplained, @TwoMinutePapers
   - Bilibili: ææ°¸ä¹, ç¨šæ™–å›
    â†“
4. é¡ºè—¤æ‘¸ç“œï¼šæœç´¢è¿™äº›åšä¸»çš„å†…å®¹
   - youtube_search "AIExplained AI"
   - bilibili_search "ææ°¸ä¹ AI"
    â†“
5. ç›‘æ§è¿™äº›åšä¸»çš„é¢‘é“
   - youtube_monitor (é¢‘é“URL)
   - bilibili_monitor (UPä¸»ID)
    â†“
6. æ”¶é›†é«˜è´¨é‡ç´ æ âœ…
```

---

## ğŸ“Š æ–°æµç¨‹ vs æ—§æµç¨‹

### æ—§æµç¨‹ï¼ˆé—®é¢˜å¤šï¼‰

```
ç›´æ¥æœç´¢ "AI News"
    â†“
æ‰¾åˆ°ä¸€äº›è§†é¢‘ï¼ˆè´¨é‡ä¸ä¸€å®šå¥½ï¼‰
    â†“
ç›²ç›®é‡‡é›†
```

**é—®é¢˜**ï¼š
- âŒ å…³é”®è¯å¤ªæ³›ï¼Œæœåˆ°çš„å†…å®¹è´¨é‡å‚å·®ä¸é½
- âŒ æ²¡æœ‰åˆ©ç”¨"é¡¶çº§åšä¸»"è¿™ä¸ªä¿¡æ¯
- âŒ æ¯æ¬¡éƒ½ä»å¤´æœï¼Œæµªè´¹ API è°ƒç”¨

### æ–°æµç¨‹ï¼ˆæ›´æ™ºèƒ½ï¼‰

```
AI è®¾è®¡æœç´¢è¯ "best AI channels 2025"
    â†“
Web æœç´¢ â†’ æ‰¾åˆ°æ¨èæ–‡ç« 
    â†“
æå–åšä¸»åˆ—è¡¨ (é¡¶çº§åšä¸»!)
    â†“
é’ˆå¯¹æ€§æœç´¢/ç›‘æ§è¿™äº›åšä¸»
    â†“
é«˜è´¨é‡ç´ æ âœ…
```

**ä¼˜åŠ¿**ï¼š
- âœ… åˆ©ç”¨äººç±»çš„"æ¨èæ–‡ç« "ï¼ˆå·²ç»ç­›é€‰è¿‡çš„ï¼‰
- âœ… é”å®šé¡¶çº§åšä¸»ï¼ˆè´¨é‡ä¿è¯ï¼‰
- âœ… é¡ºè—¤æ‘¸ç“œï¼ˆé«˜æ•ˆï¼‰
- âœ… å¯ä»¥æŒä¹…åŒ–åšä¸»åˆ—è¡¨ï¼ˆä¸‹æ¬¡ç›´æ¥ç”¨ï¼‰

---

## ğŸ”§ æŠ€æœ¯å®ç°æ–¹æ¡ˆ

### é˜¶æ®µ 1ï¼šAI è®¾è®¡æœç´¢è¯

**æ–°å¢èŠ‚ç‚¹**ï¼š`nodes/keyword_designer.py`

```python
class KeywordDesignerOutput(BaseModel):
    """æœç´¢è¯è®¾è®¡è¾“å‡º"""
    discovery_queries: List[str]  # å‘ç°åšä¸»çš„æœç´¢è¯
    content_queries: List[str]    # å‘ç°å†…å®¹çš„æœç´¢è¯
    reasoning: str                # è®¾è®¡ç†ç”±

def run_keyword_designer(state: RadarState) -> Dict[str, Any]:
    """
    è®¾è®¡æœç´¢è¯ï¼Œç”¨äºå‘ç°é¡¶çº§åšä¸»
    """
    target_domains = state.target_domains  # ["AI News", "Python Tutorials"]

    user_prompt = f"""
    ç›®æ ‡é¢†åŸŸ: {target_domains}

    ä»»åŠ¡: è®¾è®¡æœç´¢è¯ï¼Œå¸®åŠ©æˆ‘ä»¬æ‰¾åˆ°è¿™äº›é¢†åŸŸçš„é¡¶çº§åšä¸»/é¢‘é“ã€‚

    è¦æ±‚:
    1. discovery_queries (å‘ç°åšä¸»ç”¨):
       - ä¾‹å¦‚: "best AI YouTube channels 2025"
       - ä¾‹å¦‚: "top Python tutorial creators"
       - ä¾‹å¦‚: "å¿…çœ‹çš„AIåšä¸»æ¨è"

    2. content_queries (å‘ç°å†…å®¹ç”¨):
       - ä¾‹å¦‚: "AI news November 2025"
       - ä¾‹å¦‚: "latest Python 3.12 features"

    è¾“å‡º 3-5 ä¸ªé«˜è´¨é‡æœç´¢è¯ã€‚
    """

    result: KeywordDesignerOutput = get_llm_with_schema(
        user_prompt=user_prompt,
        response_model=KeywordDesignerOutput,
        capability="reasoning"
    )

    return {
        "discovery_queries": result.discovery_queries,
        "content_queries": result.content_queries
    }
```

**è¾“å‡ºç¤ºä¾‹**ï¼š
```json
{
  "discovery_queries": [
    "best AI news YouTube channels 2025",
    "top AI influencers 2025",
    "é¡¶çº§AIåšä¸»æ¨è 2025"
  ],
  "content_queries": [
    "AI news November 2025",
    "latest AI developments 2025"
  ]
}
```

---

### é˜¶æ®µ 2ï¼šä» Web æœç´¢ç»“æœä¸­æå–åšä¸»

**æ–°å¢èŠ‚ç‚¹**ï¼š`nodes/influencer_extractor.py`

```python
class InfluencerInfo(BaseModel):
    """åšä¸»ä¿¡æ¯"""
    name: str                    # "AI Explained"
    platform: str                # "youtube" | "bilibili"
    identifier: str              # "@AIExplained" æˆ– é¢‘é“URL
    mention_count: int = 1       # åœ¨æ–‡ç« ä¸­å‡ºç°æ¬¡æ•°ï¼ˆæƒé‡ï¼‰
    source_url: str = ""         # æ¥æºæ–‡ç« 

class InfluencerExtractorOutput(BaseModel):
    """æå–çš„åšä¸»åˆ—è¡¨"""
    influencers: List[InfluencerInfo]
    summary: str

def run_influencer_extractor(state: RadarState) -> Dict[str, Any]:
    """
    ä» Web æœç´¢ç»“æœä¸­æå–åšä¸»ä¿¡æ¯
    """
    # è·å– Web æœç´¢ç»“æœï¼ˆleadsï¼‰
    web_results = state.leads  # ä¹‹å‰ web_search çš„ç»“æœ

    # å‡†å¤‡ä¸Šä¸‹æ–‡
    context = []
    for lead in web_results:
        context.append(f"""
        æ–‡ç« æ ‡é¢˜: {lead.title}
        URL: {lead.url}
        æ‘˜è¦: {lead.snippet}
        """)

    context_str = "\n---\n".join(context)

    user_prompt = f"""
    ä»¥ä¸‹æ˜¯å…³äº"{state.target_domains}"é¢†åŸŸçš„æ¨èæ–‡ç« :

    {context_str}

    ä»»åŠ¡: ä»è¿™äº›æ–‡ç« ä¸­æå–é¡¶çº§åšä¸»/é¢‘é“ä¿¡æ¯ã€‚

    è¦æ±‚:
    1. å¯»æ‰¾è¢«æ¨èçš„ YouTube é¢‘é“æˆ– Bç«™ UPä¸»
    2. æå–é¢‘é“åç§°å’Œæ ‡è¯†ï¼ˆ@handle æˆ– URLï¼‰
    3. å¦‚æœå¤šæ¬¡æåˆ°åŒä¸€ä¸ªåšä¸»ï¼Œæ ‡è®° mention_count

    é‡ç‚¹æå–:
    - YouTube é¢‘é“: å¦‚ "@AIExplained", "Two Minute Papers"
    - Bç«™ UPä¸»: å¦‚ "ææ°¸ä¹è€å¸ˆ", "ç¨šæ™–å›"
    """

    result: InfluencerExtractorOutput = get_llm_with_schema(
        user_prompt=user_prompt,
        response_model=InfluencerExtractorOutput,
        capability="creative"  # é•¿ä¸Šä¸‹æ–‡é˜…è¯»
    )

    # å­˜å‚¨åˆ° state
    return {
        "discovered_influencers": result.influencers
    }
```

---

### é˜¶æ®µ 3ï¼šé¡ºè—¤æ‘¸ç“œæœç´¢åšä¸»å†…å®¹

**ä¿®æ”¹ç°æœ‰é€»è¾‘**ï¼šåˆ©ç”¨å‘ç°çš„åšä¸»ä¿¡æ¯

```python
def _deterministic_plan_v2(state: RadarState) -> Optional[Tuple]:
    """
    æ–°çš„ç¡®å®šæ€§è§„åˆ’é€»è¾‘
    """
    # 1. å¦‚æœæœ‰å‘ç°çš„åšä¸»ï¼Œä¼˜å…ˆæœç´¢ä»–ä»¬çš„å†…å®¹
    if state.discovered_influencers:
        for influencer in state.discovered_influencers:
            # æ£€æŸ¥æ˜¯å¦å·²ç»æœç´¢è¿‡è¿™ä¸ªåšä¸»
            if influencer.identifier in state.searched_influencers:
                continue

            if influencer.platform == "youtube":
                return (
                    "youtube_search",
                    {
                        "keyword": f"{influencer.name} {state.target_domains[0]}",
                        "limit": 8
                    },
                    f"æœç´¢é¡¶çº§åšä¸» {influencer.name} çš„å†…å®¹"
                )

            elif influencer.platform == "bilibili":
                return (
                    "bilibili_search",
                    {
                        "keyword": f"{influencer.name} {state.target_domains[0]}",
                        "limit": 8
                    },
                    f"æœç´¢é¡¶çº§UPä¸» {influencer.name} çš„å†…å®¹"
                )

        # æ‰€æœ‰åšä¸»éƒ½æœç´¢å®Œäº†ï¼Œæ ‡è®°çŠ¶æ€
        state.influencer_search_done = True

    # 2. åšä¸»æœç´¢å®Œæˆåï¼Œæ‰æ‰§è¡Œç›‘æ§
    if state.influencer_search_done:
        return _schedule_pending_monitor(state)

    return None
```

---

## ğŸ”„ å®Œæ•´çš„æ–°å·¥ä½œæµ

### æ–°å¢çŠ¶æ€å­—æ®µ

```python
# core/state.py
class RadarState(BaseModel):
    # ... åŸæœ‰å­—æ®µ ...

    # æ–°å¢ï¼šæœç´¢è¯è®¾è®¡
    discovery_queries: List[str] = Field(default_factory=list)
    content_queries: List[str] = Field(default_factory=list)

    # æ–°å¢ï¼šå‘ç°çš„åšä¸»
    discovered_influencers: List[InfluencerInfo] = Field(default_factory=list)
    searched_influencers: List[str] = Field(default_factory=list)
    influencer_search_done: bool = False
```

### æ–°çš„ LangGraph æµç¨‹

```python
# core/graph.py
workflow = StateGraph(RadarState)

# åŸæœ‰èŠ‚ç‚¹
workflow.add_node("planner", planner.run_planner)
workflow.add_node("executor", executor.run_executor)
workflow.add_node("filter", filter.run_hybrid_filter)
workflow.add_node("architect", architect.run_architect)

# ğŸ†• æ–°å¢èŠ‚ç‚¹
workflow.add_node("keyword_designer", keyword_designer.run_keyword_designer)
workflow.add_node("influencer_extractor", influencer_extractor.run_influencer_extractor)

# æ–°çš„æµç¨‹
workflow.set_entry_point("keyword_designer")  # ä»è®¾è®¡æœç´¢è¯å¼€å§‹

def router(state):
    # é˜¶æ®µ 1: è®¾è®¡æœç´¢è¯ â†’ Web æœç´¢
    if not state.discovery_queries:
        return "keyword_designer"

    # é˜¶æ®µ 2: Web æœç´¢ â†’ æå–åšä¸»
    if not state.leads:
        return "planner"  # è®© Planner æ‰§è¡Œ web_search

    # é˜¶æ®µ 3: æå–åšä¸» â†’ æœç´¢åšä¸»å†…å®¹
    if not state.discovered_influencers:
        return "influencer_extractor"

    # é˜¶æ®µ 4: æ­£å¸¸çš„ Planner-Executor å¾ªç¯
    if state.plan_status == "executing":
        return "executor"
    elif state.plan_status == "finished":
        return "filter"
    else:
        return "planner"
```

---

## ğŸ¬ å®é™…è¿è¡Œæµç¨‹ç¤ºä¾‹

### ç”¨æˆ·è¾“å…¥
```
ç›®æ ‡é¢†åŸŸ: ["AI News", "Python Tutorials"]
```

### è¿è¡Œæ—¥å¿—
```
--- é˜¶æ®µ 1: æœç´¢è¯è®¾è®¡ ---
ğŸ§  è®¾è®¡æœç´¢è¯...
âœ… ç”Ÿæˆå‘ç°åšä¸»æœç´¢è¯:
  - "best AI news YouTube channels 2025"
  - "é¡¶çº§AIåšä¸»æ¨è"
âœ… ç”Ÿæˆå†…å®¹æœç´¢è¯:
  - "AI news November 2025"

--- é˜¶æ®µ 2: å‘ç°åšä¸» ---
ğŸ” Web æœç´¢: "best AI news YouTube channels 2025"
âœ… æ‰¾åˆ° 12 ç¯‡æ–‡ç« 

ğŸ§  æå–åšä¸»ä¿¡æ¯...
âœ… å‘ç°é¡¶çº§åšä¸»:
  - AI Explained (@AIExplained) [YouTube]
  - Two Minute Papers [YouTube]
  - ææ°¸ä¹è€å¸ˆ [Bilibili]
  - å›åˆ°2049 [Bilibili]

--- é˜¶æ®µ 3: é¡ºè—¤æ‘¸ç“œ ---
ğŸ” æœç´¢åšä¸»: AI Explained
âœ… æ‰¾åˆ° 8 ä¸ªè§†é¢‘

ğŸ” æœç´¢åšä¸»: ææ°¸ä¹è€å¸ˆ
âœ… æ‰¾åˆ° 8 ä¸ªè§†é¢‘

ğŸ“Š ç›‘æ§é¢‘é“: AI Explained
âœ… è·å– 10 ä¸ªæœ€æ–°è§†é¢‘

--- é˜¶æ®µ 4: ç­›é€‰å’Œç­–åˆ’ ---
ğŸ§¹ æ™ºèƒ½ç­›é€‰: 26 æ¡ â†’ 10 æ¡
ğŸ¨ é€‰é¢˜ç­–åˆ’: ç”Ÿæˆ 3 ä¸ªé€‰é¢˜æ–¹æ¡ˆ

âœ… å®Œæˆï¼
```

---

## ğŸ’¡ è¿™ä¸ªæ–°æµç¨‹çš„ä¼˜åŠ¿

### 1. è´¨é‡ä¿è¯ â­â­â­â­â­
- åˆ©ç”¨äººç±»çš„æ¨èæ–‡ç« ï¼ˆå·²ç»ç­›é€‰è¿‡çš„é¡¶çº§åšä¸»ï¼‰
- ä¸æ˜¯ç›²ç›®æœç´¢ï¼Œè€Œæ˜¯"é¡ºè—¤æ‘¸ç“œ"

### 2. æ•ˆç‡æå‡ â­â­â­â­
- ä¸€æ¬¡å‘ç°ï¼ŒæŒä¹…ä½¿ç”¨
- å¯ä»¥æŠŠ `discovered_influencers` å­˜åˆ°æ•°æ®åº“
- ä¸‹æ¬¡ç›´æ¥ä»åšä¸»åˆ—è¡¨å¼€å§‹

### 3. è¦†ç›–æ›´å…¨ â­â­â­â­
- åŒæ—¶å‘ç° YouTube å’Œ Bilibili åšä¸»
- è‡ªç„¶å¹³è¡¡ä¸¤ä¸ªå¹³å°

### 4. å¯æ‰©å±•æ€§ â­â­â­â­â­
- å¯ä»¥æ”¯æŒæ›´å¤šå¹³å°ï¼ˆTwitter, Redditï¼‰
- å¯ä»¥æ”¯æŒåšä¸»è¯„åˆ†ï¼ˆæ ¹æ®æåŠæ¬¡æ•°ï¼‰

---

## ğŸ”§ å®ç°ä¼˜å…ˆçº§

### ç«‹å³å®ç°ï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰
1. âœ… è®¾è®¡æœç´¢è¯ï¼ˆ`keyword_designer.py`ï¼‰
2. âœ… Web æœç´¢å‘ç°åšä¸»ï¼ˆåˆ©ç”¨ç°æœ‰ `web_search`ï¼‰
3. âœ… æå–åšä¸»ä¿¡æ¯ï¼ˆ`influencer_extractor.py`ï¼‰
4. âœ… ä¿®æ”¹ Planner é€»è¾‘ï¼ˆä¼˜å…ˆæœç´¢åšä¸»å†…å®¹ï¼‰

### åç»­ä¼˜åŒ–
5. åšä¸»ä¿¡æ¯æŒä¹…åŒ–ï¼ˆå­˜åˆ°æ–‡ä»¶/æ•°æ®åº“ï¼‰
6. åšä¸»è¯„åˆ†æœºåˆ¶ï¼ˆæ ¹æ®ç²‰ä¸æ•°ã€æ›´æ–°é¢‘ç‡ï¼‰
7. è‡ªåŠ¨è¡¥å……åšä¸»åˆ—è¡¨ï¼ˆå®šæœŸæ‰§è¡Œï¼‰

---

## ğŸ“‹ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

æˆ‘ç°åœ¨å¯ä»¥å¸®ä½ ï¼š

### é€‰é¡¹ Aï¼šç«‹å³å®ç°æ–°æµç¨‹
- åˆ›å»º `keyword_designer.py`
- åˆ›å»º `influencer_extractor.py`
- ä¿®æ”¹ `planner.py` å’Œ `graph.py`
- æ·»åŠ æ–°çš„çŠ¶æ€å­—æ®µ

### é€‰é¡¹ Bï¼šå…ˆæµ‹è¯•å¯è¡Œæ€§
- æ‰‹åŠ¨æµ‹è¯• Web æœç´¢èƒ½å¦æ‰¾åˆ°åšä¸»æ¨èæ–‡ç« 
- æ‰‹åŠ¨æµ‹è¯• LLM èƒ½å¦å‡†ç¡®æå–åšä¸»ä¿¡æ¯
- éªŒè¯åå†å…¨é¢å®ç°

### é€‰é¡¹ Cï¼šæ¸è¿›å¼å®ç°
- å…ˆå®ç°æ ¸å¿ƒåŠŸèƒ½ï¼ˆæœç´¢è¯è®¾è®¡ + åšä¸»æå–ï¼‰
- ä¿ç•™ç°æœ‰æµç¨‹ä½œä¸ºå¤‡ç”¨
- é€æ­¥åˆ‡æ¢åˆ°æ–°æµç¨‹

---

ä½ è§‰å¾—å“ªä¸ªæ–¹æ¡ˆæ›´å¥½ï¼Ÿæˆ‘å€¾å‘äº **é€‰é¡¹ A**ï¼ˆç«‹å³å®ç°ï¼‰ï¼Œå› ä¸ºä½ çš„æƒ³æ³•éå¸¸æ¸…æ™°ï¼Œè€Œä¸”æŠ€æœ¯ä¸Šå®Œå…¨å¯è¡Œã€‚ğŸš€
