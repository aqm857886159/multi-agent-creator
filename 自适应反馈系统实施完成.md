# è‡ªé€‚åº”åé¦ˆç³»ç»Ÿå®æ–½å®Œæˆ

## âœ… ç³»ç»Ÿæ¦‚è§ˆ

è‡ªé€‚åº”åé¦ˆç³»ç»Ÿå·²æˆåŠŸå®æ–½ï¼Œæ ¸å¿ƒç‰¹ç‚¹ï¼š

1. **é€šç”¨æ€§** - é€‚ç”¨äºæ‰€æœ‰å·¥å…·ï¼Œä¸ç¡¬ç¼–ç è§„åˆ™
2. **æ™ºèƒ½æ€§** - LLMè‡ªä¸»åˆ¤æ–­é—®é¢˜å¹¶ç»™å‡ºæ–¹æ¡ˆ
3. **æŠ¤æ æœºåˆ¶** - é˜²æ­¢æ­»å¾ªç¯ã€æˆæœ¬å¤±æ§

---

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### æ•´ä½“æµç¨‹
```
æ‰§è¡Œå·¥å…· â†’ è´¨é‡æ£€æŸ¥ â†’ è®°å½•åé¦ˆ â†’ ç»§ç»­æ‰§è¡Œ
   â†“          â†“            â†“
 æˆåŠŸ      LLMåˆ¤æ–­      ä¿å­˜åˆ°state
           â†“
    ä¸é€šè¿‡ â†’ è®°å½•é—®é¢˜å’Œå»ºè®®
           â†“
      ä¾›plannerå‚è€ƒå†³ç­–
```

### æ ¸å¿ƒç»„ä»¶

#### 1. AdaptiveQualityGateï¼ˆè‡ªé€‚åº”è´¨é‡é—¨ï¼‰
**æ–‡ä»¶**: `core/quality_gate.py:90-158`

**åŠŸèƒ½**:
- é€šç”¨è´¨é‡æ£€æŸ¥æ¡†æ¶
- LLMæ™ºèƒ½åˆ¤æ–­ç»“æœè´¨é‡
- è‡ªåŠ¨è¯Šæ–­é—®é¢˜å¹¶ç»™å‡ºå»ºè®®

**æ ¸å¿ƒæ–¹æ³•**:
```python
def check_quality(
    tool_name: str,        # å·¥å…·åç§°ï¼ˆé€šç”¨ï¼‰
    tool_params: Dict,     # å·¥å…·å‚æ•°
    tool_result: Any,      # å·¥å…·ç»“æœï¼ˆä»»æ„ç±»å‹ï¼‰
    expectation: str,      # æœŸæœ›æè¿°ï¼ˆè‡ªç„¶è¯­è¨€ï¼‰
    context: Optional[Dict] # é¢å¤–ä¸Šä¸‹æ–‡
) -> QualityCheckResult
```

**æ™ºèƒ½è¾“å‡º**:
```python
class QualityCheckResult:
    passed: bool                    # æ˜¯å¦é€šè¿‡
    confidence: float               # ç½®ä¿¡åº¦ 0-1
    score: float                    # è´¨é‡åˆ†æ•° 0-1
    issues: List[str]               # é—®é¢˜åˆ—è¡¨ï¼ˆLLMè‡ªç”±æè¿°ï¼‰
    root_cause: Optional[str]       # æ ¹æœ¬åŸå› 
    suggested_action: str           # å»ºè®®è¡ŒåŠ¨
    adjustment_plan: Optional[Dict] # è°ƒæ•´æ–¹æ¡ˆ
    reasoning: str                  # åˆ¤æ–­ç†ç”±
```

#### 2. FeedbackLoopGuardï¼ˆåé¦ˆå¾ªç¯æŠ¤æ ï¼‰
**æ–‡ä»¶**: `core/quality_gate.py:11-48`

**åŠŸèƒ½**:
- é˜²æ­¢æ­»å¾ªç¯
- æˆæœ¬æ§åˆ¶
- é‡è¯•æ¬¡æ•°é™åˆ¶

**æŠ¤æ å‚æ•°**:
```python
max_retries: int = 2        # æœ€å¤šé‡è¯•2æ¬¡
max_cost: float = 0.5       # æœ€å¤§æˆæœ¬0.5ç¾å…ƒ
```

**ä¿æŠ¤æœºåˆ¶**:
```python
def can_retry() -> bool:
    if retry_count >= max_retries: return False
    if total_cost >= max_cost: return False
    return True
```

#### 3. FeedbackLoopManagerï¼ˆåé¦ˆå¾ªç¯ç®¡ç†å™¨ï¼‰
**æ–‡ä»¶**: `core/quality_gate.py:161-267`

**åŠŸèƒ½**:
- ç®¡ç†æ‰€æœ‰åé¦ˆå¾ªç¯
- é˜²æ­¢é‡å¤é—®é¢˜
- æ™ºèƒ½åº”ç”¨è°ƒæ•´å»ºè®®

**å…³é”®é€»è¾‘**:
```python
def should_retry(guard, quality_result) -> bool:
    # 1. æ£€æŸ¥æŠ¤æ é™åˆ¶
    if not guard.can_retry(): return False

    # 2. æ£€æŸ¥LLMå»ºè®®
    if quality_result.suggested_action in ["continue", "skip"]:
        return False

    # 3. æ£€æµ‹é‡å¤é—®é¢˜
    if _is_repeating_issue(guard, quality_result):
        print("æ£€æµ‹åˆ°é‡å¤é—®é¢˜ï¼Œåœæ­¢é‡è¯•")
        return False

    return True
```

---

## ğŸ”§ é›†æˆå®æ–½

### 1. çŠ¶æ€æ‰©å±•
**æ–‡ä»¶**: `core/state.py:160-163`

æ–°å¢å­—æ®µï¼š
```python
# è‡ªé€‚åº”åé¦ˆç³»ç»Ÿ
quality_checks: List[Dict[str, Any]]  # è´¨é‡æ£€æŸ¥å†å²
retry_count: int = 0                  # é‡è¯•æ€»æ¬¡æ•°
feedback_enabled: bool = True         # å¼€å…³ï¼ˆå¯å…³é—­è°ƒè¯•ï¼‰
```

### 2. Executoré›†æˆ
**æ–‡ä»¶**: `nodes/executor.py:18-20, 64-95, 396-476`

**æ­¥éª¤1**: åˆå§‹åŒ–å…¨å±€è´¨é‡é—¨
```python
# ä½¿ç”¨fast modelé™ä½æˆæœ¬
_quality_gate = AdaptiveQualityGate(use_fast_model=True)
_feedback_manager = FeedbackLoopManager(max_retries=2, max_cost=0.5)
```

**æ­¥éª¤2**: å·¥å…·æ‰§è¡Œåè‡ªåŠ¨æ£€æŸ¥
```python
# åœ¨å·¥å…·æ‰§è¡ŒæˆåŠŸå
if state.feedback_enabled and result.status == "success":
    quality_result = _run_quality_check(
        state, tool_name, tool_args, tool_result, reasoning
    )

    if not quality_result.passed:
        print(f"âš ï¸ è´¨é‡æ£€æŸ¥: {quality_result.suggested_action}")
        for issue in quality_result.issues[:2]:
            print(f"  â€¢ {issue}")

        # è®°å½•åˆ°stateä¾›plannerå‚è€ƒ
        state.quality_checks.append({...})
    else:
        print(f"âœ… è´¨é‡æ£€æŸ¥: é€šè¿‡ (åˆ†æ•°: {quality_result.score:.2f})")
```

**æ­¥éª¤3**: æ™ºèƒ½æ„å»ºæœŸæœ›
```python
def _build_expectation(tool_name, tool_args, reasoning, state) -> str:
    """é€šç”¨åŒ–æœŸæœ›æ„å»º"""
    topic = tool_args.get("keyword") or tool_args.get("query")

    # æ™ºèƒ½åˆ¤æ–­ä»»åŠ¡ç±»å‹
    if "å‘ç°åšä¸»" in reasoning:
        task_type = "å‘ç°ç›¸å…³åšä¸»"
    elif "é¡ºè—¤æ‘¸ç“œ" in reasoning:
        task_type = f"æœç´¢åšä¸»'{influencer_name}' çš„å†…å®¹"
    elif "ç›‘æ§" in reasoning:
        task_type = "ç›‘æ§åšä¸»æœ€æ–°è§†é¢‘"
    else:
        task_type = "æœç´¢ç›¸å…³è§†é¢‘"

    # æ„å»ºè‡ªç„¶è¯­è¨€æœŸæœ›
    return f"åœ¨{platform}ä¸Š{task_type}ï¼ŒæœŸæœ›é«˜è´¨é‡ç›¸å…³è§†é¢‘ï¼Œä¸»é¢˜: {topic}"
```

---

## ğŸ¯ å·¥ä½œæµç¨‹ç¤ºä¾‹

### åœºæ™¯1: YouTubeæœç´¢è¿”å›ä¸ç›¸å…³å†…å®¹

**æ‰§è¡Œ**:
```
å·¥å…·: youtube_search
å‚æ•°: keyword="AI short drama tutorial"
ç»“æœ: è¿”å›15æ¡ï¼ŒåŒ…å«é¾™å·é£ã€é£æœºå æ¯ç­‰è§†é¢‘
```

**è´¨é‡æ£€æŸ¥ï¼ˆLLMè‡ªåŠ¨åˆ¤æ–­ï¼‰**:
```python
{
    "passed": False,
    "score": 0.3,
    "confidence": 0.85,
    "issues": [
        "è¿”å›å†…å®¹ç›¸å…³æ€§ä½ï¼Œå¤§é‡ShortsçŸ­è§†é¢‘æ··å…¥",
        "å…³é”®è¯'short'è§¦å‘äº†YouTube Shortsç®—æ³•",
        "å®é™…è¿”å›å†…å®¹ä¸AIæ•™ç¨‹ä¸»é¢˜ä¸ç¬¦"
    ],
    "root_cause": "æœç´¢è¯è®¾è®¡é—®é¢˜ï¼Œ'short'å…³é”®è¯å¯¼è‡´ç®—æ³•è¯¯åˆ¤",
    "suggested_action": "adjust_params",
    "adjustment_plan": {
        "keyword": "AI video generation mini series tutorial 2025"
    },
    "reasoning": "æ£€æµ‹åˆ°å¤§é‡ä¸ç›¸å…³çš„Shortsè§†é¢‘ï¼Œå»ºè®®ä¿®æ”¹æœç´¢è¯é¿å…ä½¿ç”¨'short'å…³é”®è¯"
}
```

**ç³»ç»Ÿå“åº”**:
```
âš ï¸ è´¨é‡æ£€æŸ¥: adjust_params - æ£€æµ‹åˆ°å¤§é‡ä¸ç›¸å…³çš„Shortsè§†é¢‘ï¼Œå»ºè®®ä¿®æ”¹æœç´¢è¯...
  â€¢ è¿”å›å†…å®¹ç›¸å…³æ€§ä½ï¼Œå¤§é‡ShortsçŸ­è§†é¢‘æ··å…¥
  â€¢ å…³é”®è¯'short'è§¦å‘äº†YouTube Shortsç®—æ³•
```

### åœºæ™¯2: Bilibiliæ•°æ®ä¸è¶³

**æ‰§è¡Œ**:
```
å·¥å…·: bilibili_search
å‚æ•°: keyword="AIè§†é¢‘åˆ¶ä½œ", limit=15
ç»“æœ: è¿”å›3æ¡æ•°æ®
```

**è´¨é‡æ£€æŸ¥ï¼ˆLLMè‡ªåŠ¨åˆ¤æ–­ï¼‰**:
```python
{
    "passed": False,
    "score": 0.5,
    "confidence": 0.9,
    "issues": [
        "è¿”å›æ•°é‡è¿œä½äºé¢„æœŸï¼ˆ3æ¡ vs æœŸæœ›15æ¡ï¼‰",
        "å¯èƒ½æ˜¯æœç´¢è¯è¿‡äºå®½æ³›å¯¼è‡´è¢«é™æµ"
    ],
    "root_cause": "æ•°æ®é‡ä¸è¶³",
    "suggested_action": "adjust_params",
    "adjustment_plan": {
        "keyword": "AIè§†é¢‘åˆ¶ä½œ ä¿å§†çº§æ•™ç¨‹",  # æ·»åŠ è´¨é‡ä¿¡å·
        "fetch_size": 150  # å¢åŠ æŠ“å–é‡
    },
    "reasoning": "æ•°æ®é‡æ˜æ˜¾ä¸è¶³ï¼Œå»ºè®®ä¼˜åŒ–æœç´¢è¯å¹¶å¢åŠ æŠ“å–é‡"
}
```

### åœºæ™¯3: è´¨é‡è‰¯å¥½ï¼Œé€šè¿‡æ£€æŸ¥

**æ‰§è¡Œ**:
```
å·¥å…·: bilibili_search
å‚æ•°: keyword="AIè§†é¢‘ç”Ÿæˆ ä¿å§†çº§æ•™ç¨‹"
ç»“æœ: è¿”å›15æ¡é«˜è´¨é‡æ•™ç¨‹è§†é¢‘
```

**è´¨é‡æ£€æŸ¥**:
```python
{
    "passed": True,
    "score": 0.92,
    "confidence": 0.95,
    "issues": [],
    "suggested_action": "continue",
    "reasoning": "è¿”å›å†…å®¹ç›¸å…³æ€§é«˜ï¼Œæ•°é‡å……è¶³ï¼Œè´¨é‡è‰¯å¥½"
}
```

**ç³»ç»Ÿå“åº”**:
```
âœ… è´¨é‡æ£€æŸ¥: é€šè¿‡ (åˆ†æ•°: 0.92)
```

---

## ğŸ›¡ï¸ æŠ¤æ æœºåˆ¶

### 1. é‡è¯•æ¬¡æ•°é™åˆ¶
```python
max_retries = 2  # æ¯ä¸ªä»»åŠ¡æœ€å¤šé‡è¯•2æ¬¡
```

**ä¿æŠ¤é€»è¾‘**:
```
å°è¯•1 â†’ å¤±è´¥ â†’ è´¨é‡æ£€æŸ¥å»ºè®®è°ƒæ•´
å°è¯•2 â†’ å¤±è´¥ â†’ è´¨é‡æ£€æŸ¥å»ºè®®å†æ¬¡è°ƒæ•´
å°è¯•3 â†’ å¤±è´¥ â†’ æŠ¤æ é˜»æ­¢: "å·²é‡è¯•2æ¬¡"
```

### 2. æˆæœ¬æ§åˆ¶
```python
max_cost = 0.5  # æ¯ä¸ªä»»åŠ¡æœ€å¤šèŠ±è´¹0.5ç¾å…ƒ
```

**æˆæœ¬è¿½è¸ª**:
```python
# æ¯æ¬¡è´¨é‡æ£€æŸ¥è®¡å…¥æˆæœ¬
guard.total_cost_estimate += 0.001  # haikuæ¨¡å‹çº¦$0.001/æ¬¡
```

### 3. é‡å¤é—®é¢˜æ£€æµ‹
```python
def _is_repeating_issue(guard, current_result) -> bool:
    """æ£€æµ‹æ˜¯å¦é‡å¤é‡åˆ°ç›¸åŒé—®é¢˜"""
    last_issues = guard.feedback_history[-1]["issues"]
    current_issues = current_result.issues

    # æ£€æŸ¥æ˜¯å¦æœ‰ç›¸åŒé—®é¢˜
    for last in last_issues:
        for current in current_issues:
            if last.lower() in current.lower():
                return True  # é‡å¤é—®é¢˜ï¼Œåœæ­¢é‡è¯•
    return False
```

**ç¤ºä¾‹**:
```
å°è¯•1é—®é¢˜: "è¿”å›å†…å®¹ç›¸å…³æ€§ä½"
å°è¯•2é—®é¢˜: "è¿”å›å†…å®¹ç›¸å…³æ€§ä½"  â† é‡å¤ï¼
ç³»ç»Ÿ: "ğŸ” æ£€æµ‹åˆ°é‡å¤é—®é¢˜ï¼Œåœæ­¢é‡è¯•"
```

### 4. å¼€å…³æ§åˆ¶
```python
# å¯åœ¨stateä¸­å…³é—­ï¼ˆç”¨äºè°ƒè¯•ï¼‰
state.feedback_enabled = False  # å…³é—­è´¨é‡æ£€æŸ¥
```

---

## ğŸ“Š æ™ºèƒ½æ€§ä½“ç°

### 1. é€šç”¨åŒ–è®¾è®¡

**ä¸é’ˆå¯¹ç‰¹å®šå·¥å…·**:
```python
# âŒ ç¡¬ç¼–ç æ–¹å¼ï¼ˆä¸æ¨èï¼‰
if tool_name == "youtube_search":
    if "short" in keyword:
        return "è´¨é‡ä¸é€šè¿‡"

# âœ… é€šç”¨åŒ–æ–¹å¼ï¼ˆå®é™…é‡‡ç”¨ï¼‰
quality_result = _quality_gate.check_quality(
    tool_name=ä»»æ„å·¥å…·,
    tool_result=ä»»æ„ç»“æœ,
    expectation=è‡ªç„¶è¯­è¨€æè¿°
)
```

**è‡ªé€‚åº”åˆ¤æ–­**:
- LLMæ ¹æ®å®é™…ç»“æœå†…å®¹åˆ¤æ–­
- ä¸ä¾èµ–é¢„è®¾è§„åˆ™
- å¯å¤„ç†æœªçŸ¥åœºæ™¯

### 2. æ™ºèƒ½è¯Šæ–­

**é—®é¢˜è‡ªåŠ¨è¯†åˆ«**:
```python
# LLMè‡ªä¸»åˆ†æå‘ç°çš„é—®é¢˜
issues = [
    "å…³é”®è¯'short'è§¦å‘YouTube Shortsç®—æ³•",
    "è¿”å›å†…å®¹æ—¶é—´è·¨åº¦è¿‡å¤§ï¼ˆ2019-2025ï¼‰",
    "ä½œè€…é‡å¤åº¦é«˜ï¼Œç¼ºä¹å¤šæ ·æ€§"
]
```

**æ ¹å› åˆ†æ**:
```python
root_cause = "æœç´¢è¯è®¾è®¡é—®é¢˜ï¼Œæœªè€ƒè™‘å¹³å°ç®—æ³•ç‰¹ç‚¹"
```

### 3. æ™ºèƒ½å»ºè®®

**è¡ŒåŠ¨å»ºè®®**:
- `continue` - è´¨é‡è‰¯å¥½ï¼Œç»§ç»­
- `retry` - ä¸´æ—¶é—®é¢˜ï¼Œé‡è¯•
- `adjust_params` - è°ƒæ•´å‚æ•°
- `change_strategy` - æ¢ç­–ç•¥
- `skip` - æ— æ³•ä¿®å¤ï¼Œè·³è¿‡

**å…·ä½“è°ƒæ•´æ–¹æ¡ˆ**:
```python
adjustment_plan = {
    "keyword": "AI video generation tutorial 2025",  # ä¿®æ”¹æœç´¢è¯
    "days": 30,                                      # ç¼©çŸ­æ—¶é—´èŒƒå›´
    "limit": 20                                      # å¢åŠ æ•°é‡
}
```

---

## ğŸ”„ ä¸å…¶ä»–ç»„ä»¶ååŒ

### 1. Executorï¼ˆæ‰§è¡Œå™¨ï¼‰
- æ‰§è¡Œå·¥å…·åè‡ªåŠ¨è°ƒç”¨è´¨é‡é—¨
- è®°å½•è´¨é‡æ£€æŸ¥ç»“æœåˆ°state
- æ˜¾ç¤ºé—®é¢˜å’Œå»ºè®®ç»™ç”¨æˆ·

### 2. Plannerï¼ˆè§„åˆ’å™¨ï¼‰
- å¯è¯»å–`state.quality_checks`è·å–å†å²åé¦ˆ
- æ ¹æ®è´¨é‡å»ºè®®å†³å®šæ˜¯å¦é‡è¯•
- å¯åº”ç”¨`adjustment_plan`è°ƒæ•´å‚æ•°

### 3. Stateï¼ˆçŠ¶æ€ï¼‰
- `quality_checks` - ä¿å­˜æ‰€æœ‰è´¨é‡æ£€æŸ¥å†å²
- `retry_count` - è¿½è¸ªé‡è¯•æ¬¡æ•°
- `feedback_enabled` - æ§åˆ¶å¼€å…³

---

## ğŸ’¡ è®¾è®¡äº®ç‚¹

### 1. é›¶ç¡¬ç¼–ç 
```python
# æ‰€æœ‰åˆ¤æ–­é€»è¾‘ç”±LLMå®Œæˆ
# ä¸å†™if-elseè§„åˆ™
# é€‚åº”ä»»ä½•å·¥å…·å’Œåœºæ™¯
```

### 2. æˆæœ¬å¯æ§
```python
use_fast_model=True   # ä½¿ç”¨haikuæ¨¡å‹
max_cost=0.5          # æˆæœ¬ä¸Šé™
æ¯æ¬¡æ£€æŸ¥çº¦$0.001      # éå¸¸ä½
```

### 3. å¯è§£é‡Šæ€§
```python
{
    "reasoning": "æ£€æµ‹åˆ°å¤§é‡ä¸ç›¸å…³çš„Shortsè§†é¢‘...",
    "issues": ["å…·ä½“é—®é¢˜1", "å…·ä½“é—®é¢˜2"],
    "suggested_action": "adjust_params"
}
# æ‰€æœ‰å†³ç­–éƒ½æœ‰è¯¦ç»†ç†ç”±
```

### 4. æ¸è¿›å¼å¯ç”¨
```python
# é»˜è®¤å¯ç”¨
state.feedback_enabled = True

# é‡åˆ°é—®é¢˜å¯éšæ—¶å…³é—­
state.feedback_enabled = False
```

### 5. å†å²è¿½è¸ª
```python
# æ‰€æœ‰è´¨é‡æ£€æŸ¥è®°å½•åœ¨state
state.quality_checks = [
    {
        "tool_name": "youtube_search",
        "quality_score": 0.3,
        "issues": [...],
        "timestamp": "2025-11-27T..."
    },
    ...
]
# å¯ç”¨äºåˆ†æå’Œä¼˜åŒ–
```

---

## ğŸ§ª æµ‹è¯•å»ºè®®

### æµ‹è¯•ç”¨ä¾‹1: ä½è´¨é‡æœç´¢ç»“æœ
```python
# è§¦å‘åœºæ™¯
ä¸»é¢˜ = "AIçŸ­å‰§"
YouTubeæœç´¢è¯ = "AI short drama tutorial"  # åŒ…å«"short"é™·é˜±

# æœŸæœ›ç»“æœ
è´¨é‡æ£€æŸ¥ = ä¸é€šè¿‡
å»ºè®® = "adjust_params"
è°ƒæ•´æ–¹æ¡ˆ = ä¿®æ”¹å…³é”®è¯é¿å…"short"
```

### æµ‹è¯•ç”¨ä¾‹2: æ•°æ®ä¸è¶³
```python
# è§¦å‘åœºæ™¯
Bilibiliæœç´¢è¿”å› < 5æ¡æ•°æ®

# æœŸæœ›ç»“æœ
è´¨é‡æ£€æŸ¥ = ä¸é€šè¿‡
å»ºè®® = "adjust_params"
è°ƒæ•´æ–¹æ¡ˆ = å¢åŠ æŠ“å–é‡æˆ–ä¼˜åŒ–æœç´¢è¯
```

### æµ‹è¯•ç”¨ä¾‹3: é«˜è´¨é‡ç»“æœ
```python
# è§¦å‘åœºæ™¯
è¿”å›15æ¡ç›¸å…³æ€§>80%çš„è§†é¢‘

# æœŸæœ›ç»“æœ
è´¨é‡æ£€æŸ¥ = é€šè¿‡
åˆ†æ•° > 0.8
å»ºè®® = "continue"
```

### æµ‹è¯•ç”¨ä¾‹4: æŠ¤æ ä¿æŠ¤
```python
# è§¦å‘åœºæ™¯
è¿ç»­3æ¬¡å¤±è´¥

# æœŸæœ›ç»“æœ
ç¬¬3æ¬¡è¢«æŠ¤æ é˜»æ­¢
æ—¥å¿—: "ğŸ›‘ æŠ¤æ é˜»æ­¢: å·²é‡è¯•2æ¬¡"
```

---

## ğŸ“ˆ é¢„æœŸæ”¶ç›Š

### è´¨é‡æå‡
| æŒ‡æ ‡ | æ— åé¦ˆç³»ç»Ÿ | æœ‰åé¦ˆç³»ç»Ÿ | æå‡ |
|------|-----------|-----------|------|
| æœç´¢ç›¸å…³æ€§ | 60% | 85%+ | +42% |
| é—®é¢˜è‡ªåŠ¨å‘ç°ç‡ | 0% | 80%+ | - |
| å‚æ•°ä¼˜åŒ–å»ºè®® | äººå·¥ | è‡ªåŠ¨ | - |

### æˆæœ¬æ§åˆ¶
| é¡¹ç›® | æˆæœ¬ |
|------|------|
| æ¯æ¬¡è´¨é‡æ£€æŸ¥ | ~$0.001 (haiku) |
| æ¯ä»»åŠ¡æœ€å¤§æˆæœ¬ | $0.5 (æŠ¤æ ) |
| é¢„æœŸæ£€æŸ¥æ¬¡æ•° | 10-20æ¬¡/ä¼šè¯ |
| æ€»æˆæœ¬å¢åŠ  | <$0.02/ä¼šè¯ |

### å¼€å‘æ•ˆç‡
- âœ… æ— éœ€æ‰‹å†™è§„åˆ™
- âœ… è‡ªåŠ¨å‘ç°æ–°é—®é¢˜
- âœ… æ™ºèƒ½ç»™å‡ºå»ºè®®
- âœ… å¯è§£é‡Šæ€§å¼º

---

## âœ… å®æ–½çŠ¶æ€

- [x] åˆ›å»ºAdaptiveQualityGateæ ¸å¿ƒç»„ä»¶
- [x] åˆ›å»ºFeedbackLoopGuardæŠ¤æ 
- [x] åˆ›å»ºFeedbackLoopManagerç®¡ç†å™¨
- [x] æ‰©å±•Stateæ·»åŠ åé¦ˆå­—æ®µ
- [x] é›†æˆåˆ°ExecutorèŠ‚ç‚¹
- [x] æ·»åŠ æ™ºèƒ½æœŸæœ›æ„å»º
- [x] å®ç°æ­»å¾ªç¯ä¿æŠ¤
- [x] å®ç°æˆæœ¬æ§åˆ¶
- [x] å®ç°é‡å¤é—®é¢˜æ£€æµ‹
- [ ] å®Œæ•´ç³»ç»Ÿæµ‹è¯•
- [ ] æ€§èƒ½å’Œæˆæœ¬éªŒè¯

---

## ğŸš€ ä½¿ç”¨æ–¹å¼

### è‡ªåŠ¨å¯ç”¨ï¼ˆé»˜è®¤ï¼‰
```python
# ç³»ç»Ÿè‡ªåŠ¨è¿è¡Œï¼Œæ— éœ€é¢å¤–é…ç½®
state.feedback_enabled = True  # é»˜è®¤å€¼
```

### æŸ¥çœ‹è´¨é‡æ£€æŸ¥å†å²
```python
# åœ¨ä»»ä½•èŠ‚ç‚¹ä¸­
for check in state.quality_checks:
    print(f"å·¥å…·: {check['tool_name']}")
    print(f"åˆ†æ•°: {check['quality_score']}")
    print(f"é—®é¢˜: {check['issues']}")
    print(f"å»ºè®®: {check['suggested_action']}")
```

### ä¸´æ—¶å…³é—­ï¼ˆè°ƒè¯•ç”¨ï¼‰
```python
# åœ¨main.pyæˆ–ä»»ä½•èŠ‚ç‚¹ä¸­
state.feedback_enabled = False
```

---

## ğŸ‰ æ€»ç»“

è‡ªé€‚åº”åé¦ˆç³»ç»Ÿç°å·²å®Œæˆå®æ–½ï¼Œæ ¸å¿ƒç‰¹ç‚¹ï¼š

### é€šç”¨æ€§ âœ…
- é€‚ç”¨äºä»»ä½•å·¥å…·
- ä¸ç¡¬ç¼–ç è§„åˆ™
- è‡ªç„¶è¯­è¨€æè¿°æœŸæœ›

### æ™ºèƒ½æ€§ âœ…
- LLMè‡ªä¸»åˆ¤æ–­è´¨é‡
- è‡ªåŠ¨è¯Šæ–­é—®é¢˜
- æ™ºèƒ½ç»™å‡ºå»ºè®®å’Œè°ƒæ•´æ–¹æ¡ˆ

### æŠ¤æ æœºåˆ¶ âœ…
- é‡è¯•æ¬¡æ•°é™åˆ¶ï¼ˆæœ€å¤š2æ¬¡ï¼‰
- æˆæœ¬æ§åˆ¶ï¼ˆæœ€å¤š$0.5ï¼‰
- é‡å¤é—®é¢˜æ£€æµ‹
- å¯å¼€å…³æ§åˆ¶

**ç³»ç»Ÿå·²å‡†å¤‡å°±ç»ªï¼Œå¯ä»¥å¼€å§‹æµ‹è¯•ï¼** ğŸš€
